<audio title="课前热身_这些需求给到你，你会怎么写代码？" src="https://static001.geekbang.org/resource/audio/9c/b2/9ca637986e4029b124e11be0af947eb2.mp3" controls="controls"></audio> 
<p>你好，我是郑晔。</p><p>我在开篇词中提到，缺乏识别代码坏味道的感觉，这才让很多问题代码堂而皇之地留在了自己的眼皮底下。识别坏味道，单纯学理论是不够的，你得结合具体问题进行分析，所以我才在课程中加入了大量真实的代码案例，帮助你理解坏味道。当然，除此之外，你还要有足够多的练习。</p><p>为了让你能够深度地参与到这个专栏的学习中，代码能力得到有效提升，我准备了一个课前热身的环节：大家一起来写代码。</p><p>我们要编写一个待办事项管理的软件，你可以看我下面给出的需求，它是以<strong>命令行应用</strong>的方式存在的。</p><h2>第一阶段：基本功能</h2><ul>
<li>添加 Todo 项。</li>
</ul><pre><code>todo add &lt;item&gt;


1. &lt;item&gt;


Item &lt;itemIndex&gt; added
</code></pre><ul>
<li>完成 Todo 项。</li>
</ul><pre><code>todo done &lt;itemIndex&gt;


Item &lt;itemIndex&gt; done.
</code></pre><ul>
<li>查看 Todo 列表，缺省情况下，只列出未完成的 Todo 项。</li>
</ul><pre><code>todo list


1. &lt;item1&gt;
2. &lt;item2&gt;


Total: 2 items
</code></pre><ul>
<li>使用 all 参数，查看所有的 Todo 项。</li>
</ul><pre><code>todo list --all


1. &lt;item1&gt;
2. &lt;item2&gt;
3. [Done] &lt;item3&gt;


Total: 3 items, 1 item done
</code></pre><p>要求：</p><ol>
<li>Todo 项存储在本地文件中；</li>
<li>Todo 项索引逐一递增。</li>
</ol><h2>第二阶段：支持多用户</h2><ul>
<li>用户登录。</li>
</ul><pre><code>todo login -u user
Password: 


Login success!
</code></pre><ul>
<li>用户退出。</li>
</ul><pre><code>todo logout


Logout success!
</code></pre><p>要求：</p><ol>
<li>只能看到当前用户的 Todo 列表；</li>
<li>同一个用户的Todo 项索引逐一递增；</li>
<li>当前用户信息存储在配置文件中 ~/.todo-config。</li>
</ol><h2>第三阶段：支持 Todo 列表导入和导出</h2><!-- [[[read_end]]] --><ul>
<li>Todo 列表导出。</li>
</ul><pre><code>todo export &gt; todolist
</code></pre><ul>
<li>Todo 列表导入。</li>
</ul><pre><code>todo import -f todolist
</code></pre><h2>第四阶段：支持数据库持久化</h2><p>在配置文件中，配置数据库连接信息。</p><ul>
<li>初始化数据库。</li>
</ul><pre><code>todo init
</code></pre><p>要求：</p><ol>
<li>没有数据库的情况下，使用本地文件；</li>
<li>在有数据库的情况下，使用数据库；</li>
<li>在本地文件已经存在的情况，将本地信息导入到数据库中。</li>
</ol><p>以上我给出的是最基本的需求，你可以根据自己的实际编码情况，适当补充一些细节，比如，相应的错误提示。</p><p>你可以用自己最熟悉的程序设计语言、按照自己最习惯的方式编写代码，并在 Github 上以公开仓库的方式提交自己的代码，将仓库链接贴在这节课的留言区下，我会顺着链接找到你的仓库，去查看你写的代码。</p><p>为了方便代码的阅读，请你按如下要求编写你的代码：</p><ul>
<li>在项目的 README 文件中，写出如何构建和执行你的应用；</li>
<li>需求分成四个阶段，请你按顺序依次完成每个阶段的需求；</li>
<li>每完成一个阶段的代码，创建一个 tag，tag 名称分别为 todo-phase-1、todo-phase-2、todo-phase-3、todo-phase-4。</li>
</ul><p>之所以要把需求分阶段，主要是方便大家参与，即便你时间有限，只写第一个阶段的代码，依然是一个完整的需求。学过《<a href="https://time.geekbang.org/column/intro/100022301">10x 程序员工作法</a>》的同学都知道，任务分解是一个重要的工作原则，分阶段需求其实就是一种需求层面上的任务分解。</p><p>在专栏结束之前，我会专门制作一期加餐，点评大家的代码；同时，我也会选出代码写的最整洁的3位同学，送出价值<a href="https://shop18793264.m.youzan.com/wscgoods/detail/360fd7mtqj71k?banner_id=ag.18601096~goods.2~106~aKZdZHmE&amp;alg_id=0&amp;reft=1608863554063_1608863999769&amp;spm=f.69794282_ag.18601096">149元的华为智能体脂电子称</a>。</p><p><img src="https://static001.geekbang.org/resource/image/5d/6b/5d6600a2769c6924d732d80eb365206b.jpg?wh=1142*867" alt=""><br>
欢迎加入这次编码的训练中，期待你在留言区分享你的代码。</p>
<style>
    ul {
      list-style: none;
      display: block;
      list-style-type: disc;
      margin-block-start: 1em;
      margin-block-end: 1em;
      margin-inline-start: 0px;
      margin-inline-end: 0px;
      padding-inline-start: 40px;
    }
    li {
      display: list-item;
      text-align: -webkit-match-parent;
    }
    ._2sjJGcOH_0 {
      list-style-position: inside;
      width: 100%;
      display: -webkit-box;
      display: -ms-flexbox;
      display: flex;
      -webkit-box-orient: horizontal;
      -webkit-box-direction: normal;
      -ms-flex-direction: row;
      flex-direction: row;
      margin-top: 26px;
      border-bottom: 1px solid rgba(233,233,233,0.6);
    }
    ._2sjJGcOH_0 ._3FLYR4bF_0 {
      width: 34px;
      height: 34px;
      -ms-flex-negative: 0;
      flex-shrink: 0;
      border-radius: 50%;
    }
    ._2sjJGcOH_0 ._36ChpWj4_0 {
      margin-left: 0.5rem;
      -webkit-box-flex: 1;
      -ms-flex-positive: 1;
      flex-grow: 1;
      padding-bottom: 20px;
    }
    ._2sjJGcOH_0 ._36ChpWj4_0 ._2zFoi7sd_0 {
      font-size: 16px;
      color: #3d464d;
      font-weight: 500;
      -webkit-font-smoothing: antialiased;
      line-height: 34px;
    }
    ._2sjJGcOH_0 ._36ChpWj4_0 ._2_QraFYR_0 {
      margin-top: 12px;
      color: #505050;
      -webkit-font-smoothing: antialiased;
      font-size: 14px;
      font-weight: 400;
      white-space: normal;
      word-break: break-all;
      line-height: 24px;
    }
    ._2sjJGcOH_0 ._10o3OAxT_0 {
      margin-top: 18px;
      border-radius: 4px;
      background-color: #f6f7fb;
    }
    ._2sjJGcOH_0 ._3klNVc4Z_0 {
      display: -webkit-box;
      display: -ms-flexbox;
      display: flex;
      -webkit-box-orient: horizontal;
      -webkit-box-direction: normal;
      -ms-flex-direction: row;
      flex-direction: row;
      -webkit-box-pack: justify;
      -ms-flex-pack: justify;
      justify-content: space-between;
      -webkit-box-align: center;
      -ms-flex-align: center;
      align-items: center;
      margin-top: 15px;
    }
    ._2sjJGcOH_0 ._10o3OAxT_0 ._3KxQPN3V_0 {
      color: #505050;
      -webkit-font-smoothing: antialiased;
      font-size: 14px;
      font-weight: 400;
      white-space: normal;
      word-break: break-word;
      padding: 20px 20px 20px 24px;
    }
    ._2sjJGcOH_0 ._3klNVc4Z_0 {
      display: -webkit-box;
      display: -ms-flexbox;
      display: flex;
      -webkit-box-orient: horizontal;
      -webkit-box-direction: normal;
      -ms-flex-direction: row;
      flex-direction: row;
      -webkit-box-pack: justify;
      -ms-flex-pack: justify;
      justify-content: space-between;
      -webkit-box-align: center;
      -ms-flex-align: center;
      align-items: center;
      margin-top: 15px;
    }
    ._2sjJGcOH_0 ._3Hkula0k_0 {
      color: #b2b2b2;
      font-size: 14px;
    }
</style><ul><li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/11/73/a0/7dcc9212.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>adang</span>
  </div>
  <div class="_2_QraFYR_0">交作业<br>github地址：https:&#47;&#47;github.com&#47;caitlingao&#47;task_demo<br>交付内容包括：四个阶段的代码和每个阶段简单的开发分析设计文档<br>最近在学习Rust，所以尝试用Rust完成这次作业，断断续续用了一周多终于完成第一版，在第一版的基础上又重构了一版，这是重构后的第二版。<br></div>
  <div class="_10o3OAxT_0">
    <p class="_3KxQPN3V_0">作者回复: 真棒，有 Rust 的版本了！</p>
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2021-01-13 14:32:16</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/0f/59/26/1015d573.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>gevin</span>
  </div>
  <div class="_2_QraFYR_0">老师，我也提交了一版：https:&#47;&#47;github.com&#47;igevin&#47;terminal-todo<br><br>实现了老师说的四个阶段需求，我是按迭代的方式逐一开展的，四个阶段分别对应loop01-loop04 四个分支，采用了面向对象的风格，且由于每次迭代是在前一步的基础上，尽量遵守开闭原则去做，所以单看master分支，会有“历史包袱”的影子<br><br>项目的doc文件夹下，有每个阶段的需求和基本的设计，我在老师要求的基础上，对需求略有加码，如持久化，支持存储到mysql或redis，通过配置文件控制</div>
  <div class="_10o3OAxT_0">
    
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2022-04-25 09:01:54</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/15/6a/f5/8d1b34ae.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>北海</span>
  </div>
  <div class="_2_QraFYR_0">前端er来提交代码了😋  完成了前三个阶段<br>https:&#47;&#47;github.com&#47;front-end-captain&#47;todo</div>
  <div class="_10o3OAxT_0">
    <p class="_3KxQPN3V_0">作者回复: 继续加油！</p>
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2021-01-12 17:27:25</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/13/17/27/ec30d30a.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>Jxin</span>
  </div>
  <div class="_2_QraFYR_0">第一阶段,草草写完,有些地方还是设计得有问题,后续在优化。<br>https:&#47;&#47;github.com&#47;Jxin-Cai&#47;ugly-code-work-jxin</div>
  <div class="_10o3OAxT_0">
    <p class="_3KxQPN3V_0">作者回复: 改进慢慢来。</p>
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2021-01-02 23:57:15</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/26/eb/d7/90391376.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>ifelse</span>
  </div>
  <div class="_2_QraFYR_0">都很厉害</div>
  <div class="_10o3OAxT_0">
    
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2022-05-25 20:53:17</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/18/84/0d/4e289b94.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>三生</span>
  </div>
  <div class="_2_QraFYR_0">https:&#47;&#47;github.com&#47;blankqwq&#47;todo 迟来的golang版本，这门课差点就遗忘了，马上学起来！顺便复习一下10x</div>
  <div class="_10o3OAxT_0">
    
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2022-03-26 17:41:54</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/15/45/c3/775fe460.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>rubys_</span>
  </div>
  <div class="_2_QraFYR_0">https:&#47;&#47;github.com&#47;eleven26&#47;todo-cli<br>第一版一个文件里写完了，重构了一版，真正理解了很多设计上带来的好处。</div>
  <div class="_10o3OAxT_0">
    <p class="_3KxQPN3V_0">作者回复: 我在《程序员的测试课》中给出了一个我写的实现，欢迎参考</p>
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2021-08-20 17:47:08</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/0f/43/d6/626128be.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>robbietree</span>
  </div>
  <div class="_2_QraFYR_0">https:&#47;&#47;github.com&#47;robbietree8&#47;todo-cli</div>
  <div class="_10o3OAxT_0">
    
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2021-04-01 18:32:26</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/0f/f5/b9/888fe350.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>不记年</span>
  </div>
  <div class="_2_QraFYR_0">https:&#47;&#47;github.com&#47;JetaimeNotLove&#47;todo 第一阶段基本完成， 明天完善下，感觉写的还不错，期待下面的课程打脸哈哈</div>
  <div class="_10o3OAxT_0">
    <p class="_3KxQPN3V_0">作者回复: 一起加油哦！</p>
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2021-02-21 19:47:09</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/12/c5/80/6aefea8a.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>王登武</span>
  </div>
  <div class="_2_QraFYR_0">https:&#47;&#47;gitee.com&#47;wangdengwu&#47;todo-list&#47;  Java实现 <br>目前完成了第一阶段。</div>
  <div class="_10o3OAxT_0">
    <p class="_3KxQPN3V_0">作者回复: 继续加油！</p>
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2021-02-08 09:17:55</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/10/b4/46/686f5abe.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>SnoWalker</span>
  </div>
  <div class="_2_QraFYR_0">完成第一个阶段，努力在结课前都完成<br>https:&#47;&#47;github.com&#47;TaXueWWL&#47;todo-board</div>
  <div class="_10o3OAxT_0">
    <p class="_3KxQPN3V_0">作者回复: 加油啊，马上就要结课了。</p>
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2021-02-07 22:01:17</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src=""
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>Sun</span>
  </div>
  <div class="_2_QraFYR_0">https:&#47;&#47;github.com&#47;tofdragon&#47;todoList</div>
  <div class="_10o3OAxT_0">
    <p class="_3KxQPN3V_0">作者回复: 欢迎加入代码改进之旅。</p>
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2021-01-24 14:42:11</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/24/b2/3c/22028324.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>呆呆狗的兽</span>
  </div>
  <div class="_2_QraFYR_0">第一阶段昨天下午工作之余写的，今天上午来交个一阶段的作业，有空了剩下也会继续写的<br>https:&#47;&#47;github.com&#47;kamjin1996&#47;todo-manager</div>
  <div class="_10o3OAxT_0">
    <p class="_3KxQPN3V_0">作者回复: 加油！</p>
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2021-01-14 11:41:52</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/12/1c/cd/8d552516.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>Gojustforfun</span>
  </div>
  <div class="_2_QraFYR_0">第一阶段，all参数，item展示问题。请问老师是不是——总体上未完成的item先于已完成的item展示。未完成item之间按照加入顺序展示，已完成item之间按照完成的顺序展示，是这样吗？</div>
  <div class="_10o3OAxT_0">
    <p class="_3KxQPN3V_0">作者回复: 这是实现细节，都可以，最简单的做法是直接按照顺序展示，不分完成未完成。</p>
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2021-01-13 15:14:08</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/0f/7c/16/4d1e5cc1.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>mgxian</span>
  </div>
  <div class="_2_QraFYR_0">https:&#47;&#47;github.com&#47;mgxian&#47;todolist<br>刚刚写完第一阶段</div>
  <div class="_10o3OAxT_0">
    <p class="_3KxQPN3V_0">作者回复: 一点一点进步</p>
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2021-01-10 11:37:30</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/18/87/4e/98173974.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>明</span>
  </div>
  <div class="_2_QraFYR_0">我终于可以交作业啦，虽然只是第一阶段，但是居然花了我近20个小时，果然变写代码，菜是原罪啊   ，地址：https:&#47;&#47;github.com&#47;chenmingchao92&#47;todo-manager</div>
  <div class="_10o3OAxT_0">
    <p class="_3KxQPN3V_0">作者回复: 多好的一个练手的项目啊！可以重写几遍试试。</p>
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2021-01-07 16:31:22</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/13/6a/de/8511211d.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>Trying</span>
  </div>
  <div class="_2_QraFYR_0">https:&#47;&#47;github.com&#47;quzehu&#47;todo-command.git<br>第一阶段功能完成，Java实现</div>
  <div class="_10o3OAxT_0">
    <p class="_3KxQPN3V_0">作者回复: 继续努力</p>
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2021-01-05 20:48:45</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/14/ac/91/a6c0a413.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>LiuTianyou</span>
  </div>
  <div class="_2_QraFYR_0">https:&#47;&#47;github.com&#47;LiuTianyou&#47;todo<br>第一阶段完成，以后一边听课 一边改。</div>
  <div class="_10o3OAxT_0">
    <p class="_3KxQPN3V_0">作者回复: 一点一点地提高。</p>
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2021-01-04 12:00:57</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/0f/ed/84/0b8e2d25.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>邓志国</span>
  </div>
  <div class="_2_QraFYR_0">https:&#47;&#47;github.com&#47;bobdeng&#47;todolist  todoList的作业</div>
  <div class="_10o3OAxT_0">
    <p class="_3KxQPN3V_0">作者回复: 欢迎加入</p>
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2021-01-03 14:37:22</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/0f/cb/49/0b9ffc8e.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>刘大明</span>
  </div>
  <div class="_2_QraFYR_0">第一版功能初步完成了，但是很多细节还需重构。<br>https:&#47;&#47;github.com&#47;liudaming&#47;todo<br></div>
  <div class="_10o3OAxT_0">
    <p class="_3KxQPN3V_0">作者回复: 完成比完美更重要。</p>
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2020-12-30 17:46:31</div>
  </div>
</div>
</div>
</li>
</ul>