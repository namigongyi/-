<audio title="86_å¼€æºå®æˆ˜å››ï¼ˆä¸‹ï¼‰ï¼šæ€»ç»“Springæ¡†æ¶ç”¨åˆ°çš„11ç§è®¾è®¡æ¨¡å¼" src="https://static001.geekbang.org/resource/audio/a1/96/a1487f501e160e7dbc20de07c9b9cb96.mp3" controls="controls"></audio> 
<p>ä¸Šä¸€èŠ‚è¯¾ï¼Œæˆ‘ä»¬è®²è§£äº†Springä¸­æ”¯æŒæ‰©å±•åŠŸèƒ½çš„ä¸¤ç§è®¾è®¡æ¨¡å¼ï¼šè§‚å¯Ÿè€…æ¨¡å¼å’Œæ¨¡æ¿æ¨¡å¼ã€‚è¿™ä¸¤ç§æ¨¡å¼èƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬åˆ›å»ºæ‰©å±•ç‚¹ï¼Œè®©æ¡†æ¶çš„ä½¿ç”¨è€…åœ¨ä¸ä¿®æ”¹æºç çš„æƒ…å†µä¸‹ï¼ŒåŸºäºæ‰©å±•ç‚¹å®šåˆ¶åŒ–æ¡†æ¶åŠŸèƒ½ã€‚</p><p>å®é™…ä¸Šï¼ŒSpringæ¡†æ¶ä¸­ç”¨åˆ°çš„è®¾è®¡æ¨¡å¼éå¸¸å¤šï¼Œä¸ä¸‹åå‡ ç§ã€‚æˆ‘ä»¬ä»Šå¤©å°±æ€»ç»“ç½—åˆ—ä¸€ä¸‹å®ƒä»¬ã€‚é™äºç¯‡å¹…ï¼Œæˆ‘ä¸å¯èƒ½å¯¹æ¯ç§è®¾è®¡æ¨¡å¼éƒ½è¿›è¡Œéå¸¸è¯¦ç»†çš„è®²è§£ã€‚æœ‰äº›å‰é¢å·²ç»è®²è¿‡çš„æˆ–è€…æ¯”è¾ƒç®€å•çš„ï¼Œæˆ‘å°±ç‚¹åˆ°ä¸ºæ­¢ã€‚å¦‚æœæœ‰ä»€ä¹ˆä¸æ˜¯å¾ˆæ‡‚çš„åœ°æ–¹ï¼Œä½ å¯ä»¥é€šè¿‡é˜…è¯»æºç ï¼ŒæŸ¥é˜…ä¹‹å‰çš„ç†è®ºè®²è§£ï¼Œè‡ªå·±å»æå®šå®ƒã€‚å¦‚æœä¸€ç›´è·Ÿç€æˆ‘çš„è¯¾ç¨‹å­¦ä¹ ï¼Œç›¸ä¿¡ä½ ç°åœ¨å·²ç»å…·å¤‡è¿™æ ·çš„å­¦ä¹ èƒ½åŠ›ã€‚</p><p>è¯ä¸å¤šè¯´ï¼Œè®©æˆ‘ä»¬æ­£å¼å¼€å§‹ä»Šå¤©çš„å­¦ä¹ å§ï¼</p><h2>é€‚é…å™¨æ¨¡å¼åœ¨Springä¸­çš„åº”ç”¨</h2><p>åœ¨Spring MVCä¸­ï¼Œå®šä¹‰ä¸€ä¸ªControlleræœ€å¸¸ç”¨çš„æ–¹å¼æ˜¯ï¼Œé€šè¿‡@Controlleræ³¨è§£æ¥æ ‡è®°æŸä¸ªç±»æ˜¯Controllerç±»ï¼Œé€šè¿‡@RequesMappingæ³¨è§£æ¥æ ‡è®°å‡½æ•°å¯¹åº”çš„URLã€‚ä¸è¿‡ï¼Œå®šä¹‰ä¸€ä¸ªControllerè¿œä¸æ­¢è¿™ä¸€ç§æ–¹æ³•ã€‚æˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡è®©ç±»å®ç°Controlleræ¥å£æˆ–è€…Servletæ¥å£ï¼Œæ¥å®šä¹‰ä¸€ä¸ªControllerã€‚é’ˆå¯¹è¿™ä¸‰ç§å®šä¹‰æ–¹å¼ï¼Œæˆ‘å†™äº†ä¸‰æ®µç¤ºä¾‹ä»£ç ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre><code>// æ–¹æ³•ä¸€ï¼šé€šè¿‡@Controllerã€@RequestMappingæ¥å®šä¹‰
@Controller
public class DemoController {
    @RequestMapping(&quot;/employname&quot;)
    public ModelAndView getEmployeeName() {
        ModelAndView model = new ModelAndView(&quot;Greeting&quot;);        
        model.addObject(&quot;message&quot;, &quot;Dinesh&quot;);       
        return model; 
    }  
}

// æ–¹æ³•äºŒï¼šå®ç°Controlleræ¥å£ + xmlé…ç½®æ–‡ä»¶:é…ç½®DemoControllerä¸URLçš„å¯¹åº”å…³ç³»
public class DemoController implements Controller {
    @Override
    public ModelAndView handleRequest(HttpServletRequest req, HttpServletResponse resp) throws Exception {
        ModelAndView model = new ModelAndView(&quot;Greeting&quot;);
        model.addObject(&quot;message&quot;, &quot;Dinesh Madhwal&quot;);
        return model;
    }
}

// æ–¹æ³•ä¸‰ï¼šå®ç°Servletæ¥å£ + xmlé…ç½®æ–‡ä»¶:é…ç½®DemoControllerç±»ä¸URLçš„å¯¹åº”å…³ç³»
public class DemoServlet extends HttpServlet {
  @Override
  protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
    this.doPost(req, resp);
  }
  
  @Override
  protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
    resp.getWriter().write(&quot;Hello World.&quot;);
  }
}
</code></pre><!-- [[[read_end]]] --><p>åœ¨åº”ç”¨å¯åŠ¨çš„æ—¶å€™ï¼ŒSpringå®¹å™¨ä¼šåŠ è½½è¿™äº›Controllerç±»ï¼Œå¹¶ä¸”è§£æå‡ºURLå¯¹åº”çš„å¤„ç†å‡½æ•°ï¼Œå°è£…æˆHandlerå¯¹è±¡ï¼Œå­˜å‚¨åˆ°HandlerMappingå¯¹è±¡ä¸­ã€‚å½“æœ‰è¯·æ±‚åˆ°æ¥çš„æ—¶å€™ï¼ŒDispatcherServletä»HanderMappingä¸­ï¼ŒæŸ¥æ‰¾è¯·æ±‚URLå¯¹åº”çš„Handlerï¼Œç„¶åè°ƒç”¨æ‰§è¡ŒHandlerå¯¹åº”çš„å‡½æ•°ä»£ç ï¼Œæœ€åå°†æ‰§è¡Œç»“æœè¿”å›ç»™å®¢æˆ·ç«¯ã€‚</p><p>ä½†æ˜¯ï¼Œä¸åŒæ–¹å¼å®šä¹‰çš„Controllerï¼Œå…¶å‡½æ•°çš„å®šä¹‰ï¼ˆå‡½æ•°åã€å…¥å‚ã€è¿”å›å€¼ç­‰ï¼‰æ˜¯ä¸ç»Ÿä¸€çš„ã€‚å¦‚ä¸Šç¤ºä¾‹ä»£ç æ‰€ç¤ºï¼Œæ–¹æ³•ä¸€ä¸­çš„å‡½æ•°çš„å®šä¹‰å¾ˆéšæ„ã€ä¸å›ºå®šï¼Œæ–¹æ³•äºŒä¸­çš„å‡½æ•°å®šä¹‰æ˜¯handleRequest()ã€æ–¹æ³•ä¸‰ä¸­çš„å‡½æ•°å®šä¹‰æ˜¯service()ï¼ˆçœ‹ä¼¼æ˜¯å®šä¹‰äº†doGet()ã€doPost()ï¼Œå®é™…ä¸Šï¼Œè¿™é‡Œç”¨åˆ°äº†æ¨¡æ¿æ¨¡å¼ï¼ŒServletä¸­çš„service()è°ƒç”¨äº†doGet()æˆ–doPost()æ–¹æ³•ï¼ŒDispatcherServletè°ƒç”¨çš„æ˜¯service()æ–¹æ³•ï¼‰ã€‚DispatcherServletéœ€è¦æ ¹æ®ä¸åŒç±»å‹çš„Controllerï¼Œè°ƒç”¨ä¸åŒçš„å‡½æ•°ã€‚ä¸‹é¢æ˜¯å…·ä½“çš„ä¼ªä»£ç ï¼š</p><pre><code>Handler handler = handlerMapping.get(URL);
if (handler instanceof Controller) {
  ((Controller)handler).handleRequest(...);
} else if (handler instanceof Servlet) {
  ((Servlet)handler).service(...);
} else if (hanlder å¯¹åº”é€šè¿‡æ³¨è§£æ¥å®šä¹‰çš„Controller) {
  åå°„è°ƒç”¨æ–¹æ³•...
}
</code></pre><p>ä»ä»£ç ä¸­æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œè¿™ç§å®ç°æ–¹å¼ä¼šæœ‰å¾ˆå¤šif-elseåˆ†æ”¯åˆ¤æ–­ï¼Œè€Œä¸”ï¼Œå¦‚æœè¦å¢åŠ ä¸€ä¸ªæ–°çš„Controllerçš„å®šä¹‰æ–¹æ³•ï¼Œæˆ‘ä»¬å°±è¦åœ¨DispatcherServletç±»ä»£ç ä¸­ï¼Œå¯¹åº”åœ°å¢åŠ ä¸€æ®µå¦‚ä¸Šä¼ªä»£ç æ‰€ç¤ºçš„ifé€»è¾‘ã€‚è¿™æ˜¾ç„¶ä¸ç¬¦åˆå¼€é—­åŸåˆ™ã€‚</p><p>å®é™…ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨æ˜¯é€‚é…å™¨æ¨¡å¼å¯¹ä»£ç è¿›è¡Œæ”¹é€ ï¼Œè®©å…¶æ»¡è¶³å¼€é—­åŸåˆ™ï¼Œèƒ½æ›´å¥½åœ°æ”¯æŒæ‰©å±•ã€‚åœ¨<a href="https://time.geekbang.org/column/article/205912">ç¬¬51èŠ‚è¯¾</a>ä¸­ï¼Œæˆ‘ä»¬è®²åˆ°ï¼Œé€‚é…å™¨å…¶ä¸­ä¸€ä¸ªä½œç”¨æ˜¯â€œç»Ÿä¸€å¤šä¸ªç±»çš„æ¥å£è®¾è®¡â€ã€‚åˆ©ç”¨é€‚é…å™¨æ¨¡å¼ï¼Œæˆ‘ä»¬å°†ä¸åŒæ–¹å¼å®šä¹‰çš„Controllerç±»ä¸­çš„å‡½æ•°ï¼Œé€‚é…ä¸ºç»Ÿä¸€çš„å‡½æ•°å®šä¹‰ã€‚è¿™æ ·ï¼Œæˆ‘ä»¬å°±èƒ½åœ¨DispatcherServletç±»ä»£ç ä¸­ï¼Œç§»é™¤æ‰if-elseåˆ†æ”¯åˆ¤æ–­é€»è¾‘ï¼Œè°ƒç”¨ç»Ÿä¸€çš„å‡½æ•°ã€‚</p><p>åˆšåˆšè®²äº†å¤§è‡´çš„è®¾è®¡æ€è·¯ï¼Œæˆ‘ä»¬å†å…·ä½“çœ‹ä¸‹Springçš„ä»£ç å®ç°ã€‚</p><p>Springå®šä¹‰äº†ç»Ÿä¸€çš„æ¥å£HandlerAdapterï¼Œå¹¶ä¸”å¯¹æ¯ç§Controllerå®šä¹‰äº†å¯¹åº”çš„é€‚é…å™¨ç±»ã€‚è¿™äº›é€‚é…å™¨ç±»åŒ…æ‹¬ï¼šAnnotationMethodHandlerAdapterã€SimpleControllerHandlerAdapterã€SimpleServletHandlerAdapterç­‰ã€‚æºç æˆ‘è´´åˆ°äº†ä¸‹é¢ï¼Œä½ å¯ä»¥ç»“åˆç€çœ‹ä¸‹ã€‚</p><pre><code>public interface HandlerAdapter {
  boolean supports(Object var1);

  ModelAndView handle(HttpServletRequest var1, HttpServletResponse var2, Object var3) throws Exception;

  long getLastModified(HttpServletRequest var1, Object var2);
}

// å¯¹åº”å®ç°Controlleræ¥å£çš„Controller
public class SimpleControllerHandlerAdapter implements HandlerAdapter {
  public SimpleControllerHandlerAdapter() {
  }

  public boolean supports(Object handler) {
    return handler instanceof Controller;
  }

  public ModelAndView handle(HttpServletRequest request, HttpServletResponse response, Object handler) throws Exception {
    return ((Controller)handler).handleRequest(request, response);
  }

  public long getLastModified(HttpServletRequest request, Object handler) {
    return handler instanceof LastModified ? ((LastModified)handler).getLastModified(request) : -1L;
  }
}

// å¯¹åº”å®ç°Servletæ¥å£çš„Controller
public class SimpleServletHandlerAdapter implements HandlerAdapter {
  public SimpleServletHandlerAdapter() {
  }

  public boolean supports(Object handler) {
    return handler instanceof Servlet;
  }

  public ModelAndView handle(HttpServletRequest request, HttpServletResponse response, Object handler) throws Exception {
    ((Servlet)handler).service(request, response);
    return null;
  }

  public long getLastModified(HttpServletRequest request, Object handler) {
    return -1L;
  }
}

//AnnotationMethodHandlerAdapterå¯¹åº”é€šè¿‡æ³¨è§£å®ç°çš„Controllerï¼Œ
//ä»£ç å¤ªå¤šäº†ï¼Œæˆ‘å°±ä¸è´´åœ¨è¿™é‡Œäº†
</code></pre><p>åœ¨DispatcherServletç±»ä¸­ï¼Œæˆ‘ä»¬å°±ä¸éœ€è¦åŒºåˆ†å¯¹å¾…ä¸åŒçš„Controllerå¯¹è±¡äº†ï¼Œç»Ÿä¸€è°ƒç”¨HandlerAdapterçš„handle()å‡½æ•°å°±å¯ä»¥äº†ã€‚æŒ‰ç…§è¿™ä¸ªæ€è·¯å®ç°çš„ä¼ªä»£ç å¦‚ä¸‹æ‰€ç¤ºã€‚ä½ çœ‹ï¼Œè¿™æ ·å°±æ²¡æœ‰çƒ¦äººçš„if-elseé€»è¾‘äº†å§ï¼Ÿ</p><pre><code>// ä¹‹å‰çš„å®ç°æ–¹å¼
Handler handler = handlerMapping.get(URL);
if (handler instanceof Controller) {
  ((Controller)handler).handleRequest(...);
} else if (handler instanceof Servlet) {
  ((Servlet)handler).service(...);
} else if (hanlder å¯¹åº”é€šè¿‡æ³¨è§£æ¥å®šä¹‰çš„Controller) {
  åå°„è°ƒç”¨æ–¹æ³•...
}

// ç°åœ¨å®ç°æ–¹å¼
HandlerAdapter handlerAdapter = handlerMapping.get(URL);
handlerAdapter.handle(...);
</code></pre><h2>ç­–ç•¥æ¨¡å¼åœ¨Springä¸­çš„åº”ç”¨</h2><p>æˆ‘ä»¬å‰é¢è®²åˆ°ï¼ŒSpring AOPæ˜¯é€šè¿‡åŠ¨æ€ä»£ç†æ¥å®ç°çš„ã€‚ç†Ÿæ‚‰Javaçš„åŒå­¦åº”è¯¥çŸ¥é“ï¼Œå…·ä½“åˆ°ä»£ç å®ç°ï¼ŒSpringæ”¯æŒä¸¤ç§åŠ¨æ€ä»£ç†å®ç°æ–¹å¼ï¼Œä¸€ç§æ˜¯JDKæä¾›çš„åŠ¨æ€ä»£ç†å®ç°æ–¹å¼ï¼Œå¦ä¸€ç§æ˜¯Cglibæä¾›çš„åŠ¨æ€ä»£ç†å®ç°æ–¹å¼ã€‚</p><p>å‰è€…éœ€è¦è¢«ä»£ç†çš„ç±»æœ‰æŠ½è±¡çš„æ¥å£å®šä¹‰ï¼Œåè€…ä¸éœ€è¦ï¼ˆè¿™ä¸¤ç§åŠ¨æ€ä»£ç†å®ç°æ–¹å¼çš„æ›´å¤šåŒºåˆ«è¯·è‡ªè¡Œç™¾åº¦ç ”ç©¶å§ï¼‰ã€‚é’ˆå¯¹ä¸åŒçš„è¢«ä»£ç†ç±»ï¼ŒSpringä¼šåœ¨è¿è¡Œæ—¶åŠ¨æ€åœ°é€‰æ‹©ä¸åŒçš„åŠ¨æ€ä»£ç†å®ç°æ–¹å¼ã€‚è¿™ä¸ªåº”ç”¨åœºæ™¯å®é™…ä¸Šå°±æ˜¯ç­–ç•¥æ¨¡å¼çš„å…¸å‹åº”ç”¨åœºæ™¯ã€‚</p><p>æˆ‘ä»¬å‰é¢è®²è¿‡ï¼Œç­–ç•¥æ¨¡å¼åŒ…å«ä¸‰éƒ¨åˆ†ï¼Œç­–ç•¥çš„å®šä¹‰ã€åˆ›å»ºå’Œä½¿ç”¨ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å…·ä½“çœ‹ä¸‹ï¼Œè¿™ä¸‰ä¸ªéƒ¨åˆ†æ˜¯å¦‚ä½•ä½“ç°åœ¨Springæºç ä¸­çš„ã€‚</p><p>åœ¨ç­–ç•¥æ¨¡å¼ä¸­ï¼Œç­–ç•¥çš„å®šä¹‰è¿™ä¸€éƒ¨åˆ†å¾ˆç®€å•ã€‚æˆ‘ä»¬åªéœ€è¦å®šä¹‰ä¸€ä¸ªç­–ç•¥æ¥å£ï¼Œè®©ä¸åŒçš„ç­–ç•¥ç±»éƒ½å®ç°è¿™ä¸€ä¸ªç­–ç•¥æ¥å£ã€‚å¯¹åº”åˆ°Springæºç ï¼ŒAopProxyæ˜¯ç­–ç•¥æ¥å£ï¼ŒJdkDynamicAopProxyã€CglibAopProxyæ˜¯ä¸¤ä¸ªå®ç°äº†AopProxyæ¥å£çš„ç­–ç•¥ç±»ã€‚å…¶ä¸­ï¼ŒAopProxyæ¥å£çš„å®šä¹‰å¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre><code>public interface AopProxy {
  Object getProxy();
  Object getProxy(ClassLoader var1);
}
</code></pre><p>åœ¨ç­–ç•¥æ¨¡å¼ä¸­ï¼Œç­–ç•¥çš„åˆ›å»ºä¸€èˆ¬é€šè¿‡å·¥å‚æ–¹æ³•æ¥å®ç°ã€‚å¯¹åº”åˆ°Springæºç ï¼ŒAopProxyFactoryæ˜¯ä¸€ä¸ªå·¥å‚ç±»æ¥å£ï¼ŒDefaultAopProxyFactoryæ˜¯ä¸€ä¸ªé»˜è®¤çš„å·¥å‚ç±»ï¼Œç”¨æ¥åˆ›å»ºAopProxyå¯¹è±¡ã€‚ä¸¤è€…çš„æºç å¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre><code>public interface AopProxyFactory {
  AopProxy createAopProxy(AdvisedSupport var1) throws AopConfigException;
}

public class DefaultAopProxyFactory implements AopProxyFactory, Serializable {
  public DefaultAopProxyFactory() {
  }

  public AopProxy createAopProxy(AdvisedSupport config) throws AopConfigException {
    if (!config.isOptimize() &amp;&amp; !config.isProxyTargetClass() &amp;&amp; !this.hasNoUserSuppliedProxyInterfaces(config)) {
      return new JdkDynamicAopProxy(config);
    } else {
      Class&lt;?&gt; targetClass = config.getTargetClass();
      if (targetClass == null) {
        throw new AopConfigException(&quot;TargetSource cannot determine target class: Either an interface or a target is required for proxy creation.&quot;);
      } else {
        return (AopProxy)(!targetClass.isInterface() &amp;&amp; !Proxy.isProxyClass(targetClass) ? new ObjenesisCglibAopProxy(config) : new JdkDynamicAopProxy(config));
      }
    }
  }

  //ç”¨æ¥åˆ¤æ–­ç”¨å“ªä¸ªåŠ¨æ€ä»£ç†å®ç°æ–¹å¼
  private boolean hasNoUserSuppliedProxyInterfaces(AdvisedSupport config) {
    Class&lt;?&gt;[] ifcs = config.getProxiedInterfaces();
    return ifcs.length == 0 || ifcs.length == 1 &amp;&amp; SpringProxy.class.isAssignableFrom(ifcs[0]);
  }
}
</code></pre><p>ç­–ç•¥æ¨¡å¼çš„å…¸å‹åº”ç”¨åœºæ™¯ï¼Œä¸€èˆ¬æ˜¯é€šè¿‡ç¯å¢ƒå˜é‡ã€çŠ¶æ€å€¼ã€è®¡ç®—ç»“æœç­‰åŠ¨æ€åœ°å†³å®šä½¿ç”¨å“ªä¸ªç­–ç•¥ã€‚å¯¹åº”åˆ°Springæºç ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å‚çœ‹åˆšåˆšç»™å‡ºçš„DefaultAopProxyFactoryç±»ä¸­çš„createAopProxy()å‡½æ•°çš„ä»£ç å®ç°ã€‚å…¶ä¸­ï¼Œç¬¬10è¡Œä»£ç æ˜¯åŠ¨æ€é€‰æ‹©å“ªç§ç­–ç•¥çš„åˆ¤æ–­æ¡ä»¶ã€‚</p><h2>ç»„åˆæ¨¡å¼åœ¨Springä¸­çš„åº”ç”¨</h2><p>ä¸ŠèŠ‚è¯¾è®²åˆ°Springâ€œå†å°è£…ã€å†æŠ½è±¡â€è®¾è®¡æ€æƒ³çš„æ—¶å€™ï¼Œæˆ‘ä»¬æåˆ°äº†Spring Cacheã€‚Spring Cacheæä¾›äº†ä¸€å¥—æŠ½è±¡çš„Cacheæ¥å£ã€‚ä½¿ç”¨å®ƒæˆ‘ä»¬èƒ½å¤Ÿç»Ÿä¸€ä¸åŒç¼“å­˜å®ç°ï¼ˆRedisã€Google Guavaâ€¦ï¼‰çš„ä¸åŒçš„è®¿é—®æ–¹å¼ã€‚Springä¸­é’ˆå¯¹ä¸åŒç¼“å­˜å®ç°çš„ä¸åŒç¼“å­˜è®¿é—®ç±»ï¼Œéƒ½ä¾èµ–è¿™ä¸ªæ¥å£ï¼Œæ¯”å¦‚ï¼šEhCacheCacheã€GuavaCacheã€NoOpCacheã€RedisCacheã€JCacheCacheã€ConcurrentMapCacheã€CaffeineCacheã€‚Cacheæ¥å£çš„æºç å¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre><code>public interface Cache {
  String getName();
  Object getNativeCache();
  Cache.ValueWrapper get(Object var1);
  &lt;T&gt; T get(Object var1, Class&lt;T&gt; var2);
  &lt;T&gt; T get(Object var1, Callable&lt;T&gt; var2);
  void put(Object var1, Object var2);
  Cache.ValueWrapper putIfAbsent(Object var1, Object var2);
  void evict(Object var1);
  void clear();

  public static class ValueRetrievalException extends RuntimeException {
    private final Object key;

    public ValueRetrievalException(Object key, Callable&lt;?&gt; loader, Throwable ex) {
      super(String.format(&quot;Value for key '%s' could not be loaded using '%s'&quot;, key, loader), ex);
      this.key = key;
    }

    public Object getKey() {
      return this.key;
    }
  }

  public interface ValueWrapper {
    Object get();
  }
}
</code></pre><p>åœ¨å®é™…çš„å¼€å‘ä¸­ï¼Œä¸€ä¸ªé¡¹ç›®æœ‰å¯èƒ½ä¼šç”¨åˆ°å¤šç§ä¸åŒçš„ç¼“å­˜ï¼Œæ¯”å¦‚æ—¢ç”¨åˆ°Google Guavaç¼“å­˜ï¼Œä¹Ÿç”¨åˆ°Redisç¼“å­˜ã€‚é™¤æ­¤ä¹‹å¤–ï¼ŒåŒä¸€ä¸ªç¼“å­˜å®ä¾‹ï¼Œä¹Ÿå¯ä»¥æ ¹æ®ä¸šåŠ¡çš„ä¸åŒï¼Œåˆ†å‰²æˆå¤šä¸ªå°çš„é€»è¾‘ç¼“å­˜å•å…ƒï¼ˆæˆ–è€…å«ä½œå‘½åç©ºé—´ï¼‰ã€‚</p><p>ä¸ºäº†ç®¡ç†å¤šä¸ªç¼“å­˜ï¼ŒSpringè¿˜æä¾›äº†ç¼“å­˜ç®¡ç†åŠŸèƒ½ã€‚ä¸è¿‡ï¼Œå®ƒåŒ…å«çš„åŠŸèƒ½å¾ˆç®€å•ï¼Œä¸»è¦æœ‰è¿™æ ·ä¸¤éƒ¨åˆ†ï¼šä¸€ä¸ªæ˜¯æ ¹æ®ç¼“å­˜åå­—ï¼ˆåˆ›å»ºCacheå¯¹è±¡çš„æ—¶å€™è¦è®¾ç½®nameå±æ€§ï¼‰è·å–Cacheå¯¹è±¡ï¼›å¦ä¸€ä¸ªæ˜¯è·å–ç®¡ç†å™¨ç®¡ç†çš„æ‰€æœ‰ç¼“å­˜çš„åå­—åˆ—è¡¨ã€‚å¯¹åº”çš„Springæºç å¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre><code>public interface CacheManager {
  Cache getCache(String var1);
  Collection&lt;String&gt; getCacheNames();
}
</code></pre><p>åˆšåˆšç»™å‡ºçš„æ˜¯CacheManageræ¥å£çš„å®šä¹‰ï¼Œé‚£å¦‚ä½•æ¥å®ç°è¿™ä¸¤ä¸ªæ¥å£å‘¢ï¼Ÿå®é™…ä¸Šï¼Œè¿™å°±è¦ç”¨åˆ°äº†æˆ‘ä»¬ä¹‹å‰è®²è¿‡çš„ç»„åˆæ¨¡å¼ã€‚</p><p>æˆ‘ä»¬å‰é¢è®²è¿‡ï¼Œç»„åˆæ¨¡å¼ä¸»è¦åº”ç”¨åœ¨èƒ½è¡¨ç¤ºæˆæ ‘å½¢ç»“æ„çš„ä¸€ç»„æ•°æ®ä¸Šã€‚æ ‘ä¸­çš„ç»“ç‚¹åˆ†ä¸ºå¶å­èŠ‚ç‚¹å’Œä¸­é—´èŠ‚ç‚¹ä¸¤ç±»ã€‚å¯¹åº”åˆ°Springæºç ï¼ŒEhCacheManagerã€SimpleCacheManagerã€NoOpCacheManagerã€RedisCacheManagerç­‰è¡¨ç¤ºå¶å­èŠ‚ç‚¹ï¼ŒCompositeCacheManagerè¡¨ç¤ºä¸­é—´èŠ‚ç‚¹ã€‚</p><p>å¶å­èŠ‚ç‚¹åŒ…å«çš„æ˜¯å®ƒæ‰€ç®¡ç†çš„Cacheå¯¹è±¡ï¼Œä¸­é—´èŠ‚ç‚¹åŒ…å«çš„æ˜¯å…¶ä»–CacheManagerç®¡ç†å™¨ï¼Œæ—¢å¯ä»¥æ˜¯CompositeCacheManagerï¼Œä¹Ÿå¯ä»¥æ˜¯å…·ä½“çš„ç®¡ç†å™¨ï¼Œæ¯”å¦‚EhCacheManagerã€RedisManagerç­‰ã€‚</p><p>æˆ‘æŠŠCompositeCacheMangerçš„ä»£ç è´´åˆ°äº†ä¸‹é¢ï¼Œä½ å¯ä»¥ç»“åˆç€è®²è§£ä¸€å—çœ‹ä¸‹ã€‚å…¶ä¸­ï¼ŒgetCache()ã€getCacheNames()ä¸¤ä¸ªå‡½æ•°çš„å®ç°éƒ½ç”¨åˆ°äº†é€’å½’ã€‚è¿™æ­£æ˜¯æ ‘å½¢ç»“æ„æœ€èƒ½å‘æŒ¥ä¼˜åŠ¿çš„åœ°æ–¹ã€‚</p><pre><code>public class CompositeCacheManager implements CacheManager, InitializingBean {
  private final List&lt;CacheManager&gt; cacheManagers = new ArrayList();
  private boolean fallbackToNoOpCache = false;

  public CompositeCacheManager() {
  }

  public CompositeCacheManager(CacheManager... cacheManagers) {
    this.setCacheManagers(Arrays.asList(cacheManagers));
  }

  public void setCacheManagers(Collection&lt;CacheManager&gt; cacheManagers) {
    this.cacheManagers.addAll(cacheManagers);
  }

  public void setFallbackToNoOpCache(boolean fallbackToNoOpCache) {
    this.fallbackToNoOpCache = fallbackToNoOpCache;
  }

  public void afterPropertiesSet() {
    if (this.fallbackToNoOpCache) {
      this.cacheManagers.add(new NoOpCacheManager());
    }

  }

  public Cache getCache(String name) {
    Iterator var2 = this.cacheManagers.iterator();

    Cache cache;
    do {
      if (!var2.hasNext()) {
        return null;
      }

      CacheManager cacheManager = (CacheManager)var2.next();
      cache = cacheManager.getCache(name);
    } while(cache == null);

    return cache;
  }

  public Collection&lt;String&gt; getCacheNames() {
    Set&lt;String&gt; names = new LinkedHashSet();
    Iterator var2 = this.cacheManagers.iterator();

    while(var2.hasNext()) {
      CacheManager manager = (CacheManager)var2.next();
      names.addAll(manager.getCacheNames());
    }

    return Collections.unmodifiableSet(names);
  }
}
</code></pre><h2>è£…é¥°å™¨æ¨¡å¼åœ¨Springä¸­çš„åº”ç”¨</h2><p>æˆ‘ä»¬çŸ¥é“ï¼Œç¼“å­˜ä¸€èˆ¬éƒ½æ˜¯é…åˆæ•°æ®åº“æ¥ä½¿ç”¨çš„ã€‚å¦‚æœå†™ç¼“å­˜æˆåŠŸï¼Œä½†æ•°æ®åº“äº‹åŠ¡å›æ»šäº†ï¼Œé‚£ç¼“å­˜ä¸­å°±ä¼šæœ‰è„æ•°æ®ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦å°†ç¼“å­˜çš„å†™æ“ä½œå’Œæ•°æ®åº“çš„å†™æ“ä½œï¼Œæ”¾åˆ°åŒä¸€ä¸ªäº‹åŠ¡ä¸­ï¼Œè¦ä¹ˆéƒ½æˆåŠŸï¼Œè¦ä¹ˆéƒ½å¤±è´¥ã€‚</p><p>å®ç°è¿™æ ·ä¸€ä¸ªåŠŸèƒ½ï¼ŒSpringä½¿ç”¨åˆ°äº†è£…é¥°å™¨æ¨¡å¼ã€‚TransactionAwareCacheDecoratorå¢åŠ äº†å¯¹äº‹åŠ¡çš„æ”¯æŒï¼Œåœ¨äº‹åŠ¡æäº¤ã€å›æ»šçš„æ—¶å€™åˆ†åˆ«å¯¹Cacheçš„æ•°æ®è¿›è¡Œå¤„ç†ã€‚</p><p>TransactionAwareCacheDecoratorå®ç°Cacheæ¥å£ï¼Œå¹¶ä¸”å°†æ‰€æœ‰çš„æ“ä½œéƒ½å§”æ‰˜ç»™targetCacheæ¥å®ç°ï¼Œå¯¹å…¶ä¸­çš„å†™æ“ä½œæ·»åŠ äº†äº‹åŠ¡åŠŸèƒ½ã€‚è¿™æ˜¯å…¸å‹çš„è£…é¥°å™¨æ¨¡å¼çš„åº”ç”¨åœºæ™¯å’Œä»£ç å®ç°ï¼Œæˆ‘å°±ä¸å¤šä½œè§£é‡Šäº†ã€‚</p><pre><code>public class TransactionAwareCacheDecorator implements Cache {
  private final Cache targetCache;

  public TransactionAwareCacheDecorator(Cache targetCache) {
    Assert.notNull(targetCache, &quot;Target Cache must not be null&quot;);
    this.targetCache = targetCache;
  }

  public Cache getTargetCache() {
    return this.targetCache;
  }

  public String getName() {
    return this.targetCache.getName();
  }

  public Object getNativeCache() {
    return this.targetCache.getNativeCache();
  }

  public ValueWrapper get(Object key) {
    return this.targetCache.get(key);
  }

  public &lt;T&gt; T get(Object key, Class&lt;T&gt; type) {
    return this.targetCache.get(key, type);
  }

  public &lt;T&gt; T get(Object key, Callable&lt;T&gt; valueLoader) {
    return this.targetCache.get(key, valueLoader);
  }

  public void put(final Object key, final Object value) {
    if (TransactionSynchronizationManager.isSynchronizationActive()) {
      TransactionSynchronizationManager.registerSynchronization(new TransactionSynchronizationAdapter() {
        public void afterCommit() {
          TransactionAwareCacheDecorator.this.targetCache.put(key, value);
        }
      });
    } else {
      this.targetCache.put(key, value);
    }
  }
  
  public ValueWrapper putIfAbsent(Object key, Object value) {
    return this.targetCache.putIfAbsent(key, value);
  }

  public void evict(final Object key) {
    if (TransactionSynchronizationManager.isSynchronizationActive()) {
      TransactionSynchronizationManager.registerSynchronization(new TransactionSynchronizationAdapter() {
        public void afterCommit() {
          TransactionAwareCacheDecorator.this.targetCache.evict(key);
        }
      });
    } else {
      this.targetCache.evict(key);
    }

  }

  public void clear() {
    if (TransactionSynchronizationManager.isSynchronizationActive()) {
      TransactionSynchronizationManager.registerSynchronization(new TransactionSynchronizationAdapter() {
        public void afterCommit() {
          TransactionAwareCacheDecorator.this.targetCache.clear();
        }
      });
    } else {
      this.targetCache.clear();
    }
  }
}
</code></pre><h2>å·¥å‚æ¨¡å¼åœ¨Springä¸­çš„åº”ç”¨</h2><p>åœ¨Springä¸­ï¼Œå·¥å‚æ¨¡å¼æœ€ç»å…¸çš„åº”ç”¨è«è¿‡äºå®ç°IOCå®¹å™¨ï¼Œå¯¹åº”çš„Springæºç ä¸»è¦æ˜¯BeanFactoryç±»å’ŒApplicationContextç›¸å…³ç±»ï¼ˆAbstractApplicationContextã€ClassPathXmlApplicationContextã€FileSystemXmlApplicationContextâ€¦ï¼‰ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œåœ¨ç†è®ºéƒ¨åˆ†ï¼Œæˆ‘è¿˜å¸¦ä½ æ‰‹æŠŠæ‰‹å®ç°äº†ä¸€ä¸ªç®€å•çš„IOCå®¹å™¨ã€‚ä½ å¯ä»¥å›è¿‡å¤´å»å†çœ‹ä¸‹ã€‚</p><p>åœ¨Springä¸­ï¼Œåˆ›å»ºBeançš„æ–¹å¼æœ‰å¾ˆå¤šç§ï¼Œæ¯”å¦‚å‰é¢æåˆ°çš„çº¯æ„é€ å‡½æ•°ã€æ— å‚æ„é€ å‡½æ•°åŠ setteræ–¹æ³•ã€‚æˆ‘å†™äº†ä¸€ä¸ªä¾‹å­æ¥è¯´æ˜è¿™ä¸¤ç§åˆ›å»ºæ–¹å¼ï¼Œä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre><code>public class Student {
  private long id;
  private String name;
  
  public Student(long id, String name) {
    this.id = id;
    this.name = name;
  }
  
  public void setId(long id) {
    this.id = id;
  }
  
  public void setName(String name) {
    this.name = name;
  }
}

// ä½¿ç”¨æ„é€ å‡½æ•°æ¥åˆ›å»ºBean
&lt;bean id=&quot;student&quot; class=&quot;com.xzg.cd.Student&quot;&gt;
    &lt;constructor-arg name=&quot;id&quot; value=&quot;1&quot;/&gt;
    &lt;constructor-arg name=&quot;name&quot; value=&quot;wangzheng&quot;/&gt;
&lt;/bean&gt;

// ä½¿ç”¨æ— å‚æ„é€ å‡½æ•°+setteræ–¹æ³•æ¥åˆ›å»ºBean
&lt;bean id=&quot;student&quot; class=&quot;com.xzg.cd.Student&quot;&gt;
    &lt;property name=&quot;id&quot; value=&quot;1&quot;&gt;&lt;/property&gt;
    &lt;property name=&quot;name&quot; value=&quot;wangzheng&quot;&gt;&lt;/property&gt;
&lt;/bean&gt;
</code></pre><p>å®é™…ä¸Šï¼Œé™¤äº†è¿™ä¸¤ç§åˆ›å»ºBeançš„æ–¹å¼ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡å·¥å‚æ–¹æ³•æ¥åˆ›å»ºBeanã€‚è¿˜æ˜¯åˆšåˆšè¿™ä¸ªä¾‹å­ï¼Œç”¨è¿™ç§æ–¹å¼æ¥åˆ›å»ºBeançš„è¯å°±æ˜¯ä¸‹é¢è¿™ä¸ªæ ·å­ï¼š</p><pre><code>public class StudentFactory {
  private static Map&lt;Long, Student&gt; students = new HashMap&lt;&gt;();
  
  static{
    map.put(1, new Student(1,&quot;wang&quot;));
    map.put(2, new Student(2,&quot;zheng&quot;));
    map.put(3, new Student(3,&quot;xzg&quot;));
  }
 
  public static Student getStudent(long id){
    return students.get(id);
  }
}

// é€šè¿‡å·¥å‚æ–¹æ³•getStudent(2)æ¥åˆ›å»ºBeanId=&quot;zheng&quot;&quot;çš„Bean
&lt;bean id=&quot;zheng&quot; class=&quot;com.xzg.cd.StudentFactory&quot; factory-method=&quot;getStudent&quot;&gt;
    &lt;constructor-arg value=&quot;2&quot;&gt;&lt;/constructor-arg&gt;           
&lt;/bean&gt;
</code></pre><h2>å…¶ä»–æ¨¡å¼åœ¨Springä¸­çš„åº”ç”¨</h2><p>å‰é¢çš„å‡ ä¸ªæ¨¡å¼åœ¨Springä¸­çš„åº”ç”¨è®²è§£çš„éƒ½æ¯”è¾ƒè¯¦ç»†ï¼Œæ¥ä¸‹æ¥çš„å‡ ä¸ªæ¨¡å¼ï¼Œå¤§éƒ¨åˆ†éƒ½æ˜¯æˆ‘ä»¬ä¹‹å‰è®²è¿‡çš„ï¼Œè¿™é‡Œåªæ˜¯ç®€å•æ€»ç»“ä¸€ä¸‹ï¼Œç‚¹åˆ°ä¸ºæ­¢ï¼Œå¦‚æœä½ å¯¹å“ªå—æœ‰é—å¿˜ï¼Œå¯ä»¥å›è¿‡å¤´å»çœ‹ä¸‹ç†è®ºéƒ¨åˆ†çš„è®²è§£ã€‚</p><p>SpELï¼Œå…¨ç§°å«Spring Expression Languageï¼Œæ˜¯Springä¸­å¸¸ç”¨æ¥ç¼–å†™é…ç½®çš„è¡¨è¾¾å¼è¯­è¨€ã€‚å®ƒå®šä¹‰äº†ä¸€ç³»åˆ—çš„è¯­æ³•è§„åˆ™ã€‚æˆ‘ä»¬åªè¦æŒ‰ç…§è¿™äº›è¯­æ³•è§„åˆ™æ¥ç¼–å†™è¡¨è¾¾å¼ï¼ŒSpringå°±èƒ½è§£æå‡ºè¡¨è¾¾å¼çš„å«ä¹‰ã€‚å®é™…ä¸Šï¼Œè¿™å°±æ˜¯æˆ‘ä»¬å‰é¢è®²åˆ°çš„è§£é‡Šå™¨æ¨¡å¼çš„å…¸å‹åº”ç”¨åœºæ™¯ã€‚</p><p>å› ä¸ºè§£é‡Šå™¨æ¨¡å¼æ²¡æœ‰ä¸€ä¸ªéå¸¸å›ºå®šçš„ä»£ç å®ç°ç»“æ„ï¼Œè€Œä¸”Springä¸­SpELç›¸å…³çš„ä»£ç ä¹Ÿæ¯”è¾ƒå¤šï¼Œæ‰€ä»¥è¿™é‡Œå°±ä¸å¸¦ä½ ä¸€å—é˜…è¯»æºç äº†ã€‚å¦‚æœæ„Ÿå…´è¶£æˆ–è€…é¡¹ç›®ä¸­æ­£å¥½è¦å®ç°ç±»ä¼¼çš„åŠŸèƒ½çš„æ—¶å€™ï¼Œä½ å¯ä»¥å†å»é˜…è¯»ã€å€Ÿé‰´å®ƒçš„ä»£ç å®ç°ã€‚ä»£ç ä¸»è¦é›†ä¸­åœ¨spring-expresssionè¿™ä¸ªæ¨¡å—ä¸‹é¢ã€‚</p><p>å‰é¢è®²åˆ°å•ä¾‹æ¨¡å¼çš„æ—¶å€™ï¼Œæˆ‘æåˆ°è¿‡ï¼Œå•ä¾‹æ¨¡å¼æœ‰å¾ˆå¤šå¼Šç«¯ï¼Œæ¯”å¦‚å•å…ƒæµ‹è¯•ä¸å‹å¥½ç­‰ã€‚åº”å¯¹ç­–ç•¥å°±æ˜¯é€šè¿‡IOCå®¹å™¨æ¥ç®¡ç†å¯¹è±¡ï¼Œé€šè¿‡IOCå®¹å™¨æ¥å®ç°å¯¹è±¡çš„å”¯ä¸€æ€§çš„æ§åˆ¶ã€‚å®é™…ä¸Šï¼Œè¿™æ ·å®ç°çš„å•ä¾‹å¹¶éçœŸæ­£çš„å•ä¾‹ï¼Œå®ƒçš„å”¯ä¸€æ€§çš„ä½œç”¨èŒƒå›´ä»…ä»…åœ¨åŒä¸€ä¸ªIOCå®¹å™¨å†…ã€‚</p><p>é™¤æ­¤ä¹‹å¤–ï¼ŒSpringè¿˜ç”¨åˆ°äº†è§‚å¯Ÿè€…æ¨¡å¼ã€æ¨¡æ¿æ¨¡å¼ã€èŒè´£é“¾æ¨¡å¼ã€ä»£ç†æ¨¡å¼ã€‚å…¶ä¸­ï¼Œè§‚å¯Ÿè€…æ¨¡å¼ã€æ¨¡æ¿æ¨¡å¼åœ¨ä¸Šä¸€èŠ‚è¯¾å·²ç»è¯¦ç»†è®²è¿‡äº†ã€‚</p><p>å®é™…ä¸Šï¼Œåœ¨Springä¸­ï¼Œåªè¦åç¼€å¸¦æœ‰Templateçš„ç±»ï¼ŒåŸºæœ¬ä¸Šéƒ½æ˜¯æ¨¡æ¿ç±»ï¼Œè€Œä¸”å¤§éƒ¨åˆ†éƒ½æ˜¯ç”¨Callbackå›è°ƒæ¥å®ç°çš„ï¼Œæ¯”å¦‚JdbcTemplateã€RedisTemplateç­‰ã€‚å‰©ä¸‹çš„ä¸¤ä¸ªæ¨¡å¼åœ¨Springä¸­çš„åº”ç”¨åº”è¯¥äººå°½çš†çŸ¥äº†ã€‚èŒè´£é“¾æ¨¡å¼åœ¨Springä¸­çš„åº”ç”¨æ˜¯æ‹¦æˆªå™¨ï¼ˆInterceptorï¼‰ï¼Œä»£ç†æ¨¡å¼ç»å…¸åº”ç”¨æ˜¯AOPã€‚</p><h2>é‡ç‚¹å›é¡¾</h2><p>å¥½äº†ï¼Œä»Šå¤©çš„å†…å®¹åˆ°æ­¤å°±è®²å®Œäº†ã€‚æˆ‘ä»¬ä¸€å—æ¥æ€»ç»“å›é¡¾ä¸€ä¸‹ï¼Œä½ éœ€è¦é‡ç‚¹æŒæ¡çš„å†…å®¹ã€‚</p><p>æˆ‘ä»¬ä»Šå¤©æåˆ°çš„è®¾è®¡æ¨¡å¼æœ‰11ç§ï¼Œå®ƒä»¬åˆ†åˆ«æ˜¯é€‚é…å™¨æ¨¡å¼ã€ç­–ç•¥æ¨¡å¼ã€ç»„åˆæ¨¡å¼ã€è£…é¥°å™¨æ¨¡å¼ã€å·¥å‚æ¨¡å¼ã€å•ä¾‹æ¨¡å¼ã€è§£é‡Šå™¨æ¨¡å¼ã€è§‚å¯Ÿè€…æ¨¡å¼ã€æ¨¡æ¿æ¨¡å¼ã€èŒè´£é“¾æ¨¡å¼ã€ä»£ç†æ¨¡å¼ï¼ŒåŸºæœ¬ä¸Šå äº†23ç§è®¾è®¡æ¨¡å¼çš„ä¸€åŠã€‚è¿™è¿˜åªæ˜¯æˆ‘æ‰€çŸ¥é“çš„ï¼Œå®é™…ä¸Šï¼ŒSpringç”¨åˆ°çš„è®¾è®¡æ¨¡å¼å¯èƒ½è¿˜è¦æ›´å¤šã€‚ä½ çœ‹ï¼Œè®¾è®¡æ¨¡å¼å¹¶éâ€œèŠ±æ‹³ç»£è…¿â€å§ï¼Œå®ƒåœ¨å®é™…çš„é¡¹ç›®å¼€å‘ä¸­ï¼Œç¡®å®æœ‰å¾ˆå¤šåº”ç”¨ï¼Œç¡®å®å¯ä»¥å‘æŒ¥å¾ˆå¤§çš„ä½œç”¨ã€‚</p><p>è¿˜æ˜¯é‚£å¥è¯ï¼Œå¯¹äºä»Šå¤©çš„å†…å®¹ï¼Œä½ ä¸éœ€è¦å»è®°å¿†å“ªä¸ªç±»ç”¨åˆ°äº†å“ªä¸ªè®¾è®¡æ¨¡å¼ã€‚ä½ åªéœ€è¦è·Ÿç€æˆ‘çš„è®²è§£ï¼ŒæŠŠæ¯ä¸ªè®¾è®¡æ¨¡å¼åœ¨Springä¸­çš„åº”ç”¨åœºæ™¯ï¼Œææ‡‚å°±å¯ä»¥äº†ã€‚çœ‹åˆ°ç±»ä¼¼çš„ä»£ç ï¼Œèƒ½å¤Ÿç«‹é©¬è¯†åˆ«å‡ºå®ƒç”¨åˆ°äº†å“ªç§è®¾è®¡æ¨¡å¼ï¼›çœ‹åˆ°ç±»ä¼¼çš„åº”ç”¨åœºæ™¯ï¼Œèƒ½å¤Ÿç«‹é©¬åæ˜ å‡ºè¦ç”¨å“ªç§æ¨¡å¼å»è§£å†³ï¼Œè¿™æ ·å°±è¯´æ˜ä½ å·²ç»æŒæ¡å¾—è¶³å¤Ÿå¥½äº†ã€‚</p><h2>è¯¾å ‚è®¨è®º</h2><p>æˆ‘ä»¬å‰é¢è®²åˆ°ï¼Œé™¤äº†çº¯æ„é€ å‡½æ•°ã€æ„é€ å‡½æ•°åŠ setteræ–¹æ³•å’Œå·¥å‚æ–¹æ³•ä¹‹å¤–ï¼Œè¿˜æœ‰å¦å¤–ä¸€ä¸ªç»å¸¸ç”¨æ¥åˆ›å»ºå¯¹è±¡çš„æ¨¡å¼ï¼ŒBuilderæ¨¡å¼ã€‚å¦‚æœæˆ‘ä»¬è®©Springæ”¯æŒé€šè¿‡Builderæ¨¡å¼æ¥åˆ›å»ºBeanï¼Œåº”è¯¥å¦‚ä½•æ¥ç¼–å†™ä»£ç å’Œé…ç½®å‘¢ï¼Ÿä½ å¯ä»¥è®¾è®¡ä¸€ä¸‹å—ï¼Ÿ</p><p>æ¬¢è¿ç•™è¨€å’Œæˆ‘åˆ†äº«ä½ çš„æƒ³æ³•ã€‚å¦‚æœæœ‰æ”¶è·ï¼Œä¹Ÿæ¬¢è¿ä½ æŠŠè¿™ç¯‡æ–‡ç« åˆ†äº«ç»™ä½ çš„æœ‹å‹ã€‚</p>
<style>
    ul {
      list-style: none;
      display: block;
      list-style-type: disc;
      margin-block-start: 1em;
      margin-block-end: 1em;
      margin-inline-start: 0px;
      margin-inline-end: 0px;
      padding-inline-start: 40px;
    }
    li {
      display: list-item;
      text-align: -webkit-match-parent;
    }
    ._2sjJGcOH_0 {
      list-style-position: inside;
      width: 100%;
      display: -webkit-box;
      display: -ms-flexbox;
      display: flex;
      -webkit-box-orient: horizontal;
      -webkit-box-direction: normal;
      -ms-flex-direction: row;
      flex-direction: row;
      margin-top: 26px;
      border-bottom: 1px solid rgba(233,233,233,0.6);
    }
    ._2sjJGcOH_0 ._3FLYR4bF_0 {
      width: 34px;
      height: 34px;
      -ms-flex-negative: 0;
      flex-shrink: 0;
      border-radius: 50%;
    }
    ._2sjJGcOH_0 ._36ChpWj4_0 {
      margin-left: 0.5rem;
      -webkit-box-flex: 1;
      -ms-flex-positive: 1;
      flex-grow: 1;
      padding-bottom: 20px;
    }
    ._2sjJGcOH_0 ._36ChpWj4_0 ._2zFoi7sd_0 {
      font-size: 16px;
      color: #3d464d;
      font-weight: 500;
      -webkit-font-smoothing: antialiased;
      line-height: 34px;
    }
    ._2sjJGcOH_0 ._36ChpWj4_0 ._2_QraFYR_0 {
      margin-top: 12px;
      color: #505050;
      -webkit-font-smoothing: antialiased;
      font-size: 14px;
      font-weight: 400;
      white-space: normal;
      word-break: break-all;
      line-height: 24px;
    }
    ._2sjJGcOH_0 ._10o3OAxT_0 {
      margin-top: 18px;
      border-radius: 4px;
      background-color: #f6f7fb;
    }
    ._2sjJGcOH_0 ._3klNVc4Z_0 {
      display: -webkit-box;
      display: -ms-flexbox;
      display: flex;
      -webkit-box-orient: horizontal;
      -webkit-box-direction: normal;
      -ms-flex-direction: row;
      flex-direction: row;
      -webkit-box-pack: justify;
      -ms-flex-pack: justify;
      justify-content: space-between;
      -webkit-box-align: center;
      -ms-flex-align: center;
      align-items: center;
      margin-top: 15px;
    }
    ._2sjJGcOH_0 ._10o3OAxT_0 ._3KxQPN3V_0 {
      color: #505050;
      -webkit-font-smoothing: antialiased;
      font-size: 14px;
      font-weight: 400;
      white-space: normal;
      word-break: break-word;
      padding: 20px 20px 20px 24px;
    }
    ._2sjJGcOH_0 ._3klNVc4Z_0 {
      display: -webkit-box;
      display: -ms-flexbox;
      display: flex;
      -webkit-box-orient: horizontal;
      -webkit-box-direction: normal;
      -ms-flex-direction: row;
      flex-direction: row;
      -webkit-box-pack: justify;
      -ms-flex-pack: justify;
      justify-content: space-between;
      -webkit-box-align: center;
      -ms-flex-align: center;
      align-items: center;
      margin-top: 15px;
    }
    ._2sjJGcOH_0 ._3Hkula0k_0 {
      color: #b2b2b2;
      font-size: 14px;
    }
</style><ul><li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/11/47/31/f35367c8.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>å°æ™å­</span>
  </div>
  <div class="_2_QraFYR_0">å¯ä»¥ä½¿ç”¨FactoryBeanæ¥å£æ¥å®ç°ï¼Œå¦‚ä¸‹ï¼š<br>&#47;&#47;StdHttpClientå¯ä»¥ç†è§£ä¸ºå·²ç»å®šä¹‰å¥½çš„ä¸€ä¸ªç±»ï¼Œä½¿ç”¨builderæ¨¡å¼å®ç°ã€‚<br>public class HttpFactoryBean implements FactoryBean&lt;HttpClient&gt;{<br><br>private String host;<br>private int port;<br><br><br>public HttpClient getObject() throws Exception {<br>    return new StdHttpClient.Builder()<br>                            .host(host)<br>                            .port(port)<br>                            .build();<br>}<br><br>public Class&lt;? extends HttpClient&gt; getObjectType() {<br>    return StdHttpClient.class;<br>}<br><br>public boolean isSingleton() {<br>    return true;<br>}<br><br>public void setHost(String host) {<br>    this.host = host;<br>}<br><br>public void setPort(int port) {<br>    this.port = port;<br>}}<br>æ·»åŠ é…ç½®åˆ°beanå®šä¹‰ï¼š<br>&lt;beans ...&gt; <br>   &lt;bean name=&quot;myHttpClient&quot; class=&quot;HttpFactoryBean&quot;&gt;<br>       &lt;property name=&quot;port&quot; value=&quot;8080&quot;&#47;&gt;<br>       &lt;property name=&quot;host&quot; value=&quot;localhost&quot;&#47;&gt;<br>   &lt;&#47;bean&gt;<br>&lt;&#47;beans&gt;<br>ä¹‹åä½ å°±å¯ä»¥ä½¿ç”¨StdHttpClientå®ä¾‹äº†ã€‚</div>
  <div class="_10o3OAxT_0">
    
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2020-05-20 13:16:54</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/14/68/fe/1353168d.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>å²æœˆ</span>
  </div>
  <div class="_2_QraFYR_0">ä¸æ˜¯åšjavaçš„çœ‹çš„å¥½ç´¯....çœ‹æºç å¿…é¡»æ˜¯å…ˆçŸ¥é“æ€ä¹ˆä½¿ç”¨, ç„¶åæ‰çœ‹æºç , è¿™æ ·æ‰æ¯”è¾ƒå¥½çœ‹æ‡‚æºç .</div>
  <div class="_10o3OAxT_0">
    
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2020-05-20 17:59:27</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJKj3GbvevFibxwJibTqm16NaE8MXibwDUlnt5tt73KF9WS2uypha2m1Myxic6Q47Zaj2DZOwia3AgicO7Q/132"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>é¥­</span>
  </div>
  <div class="_2_QraFYR_0">è¶Šçœ‹åˆ°åé¢ï¼Œè¶Šè§‰å¾—æœ€å¥½çš„æ¨¡å¼å°±æ˜¯æ²¡æœ‰æ¨¡å¼ï¼Œç”¨å¥½å¹¶ç†è§£åŸºæœ¬çš„é¢å‘å¯¹è±¡è®¾è®¡å°±æˆåŠŸä¸€åŠäº†ã€‚</div>
  <div class="_10o3OAxT_0">
    
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2020-05-20 17:57:35</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/0f/f2/56/c39046c0.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>Jie</span>
  </div>
  <div class="_2_QraFYR_0">è¿™ç¯‡å†…å®¹å¯†åº¦å¾ˆå¤§ï¼Œå¯ä»¥çœ‹ä¸Šä¸¤å¤©ã€‚<br><br>å¦å¤–ç­–ç•¥æ¨¡å¼é‚£å—æåˆ°â€œè¿™ä¸¤ç§åŠ¨æ€ä»£ç†å®ç°æ–¹å¼çš„æ›´å¤šåŒºåˆ«è¯·è‡ªè¡Œç™¾åº¦ç ”ç©¶å§â€ï¼Œä¸æ˜¯åº”è¯¥ç”¨Googleæœç´¢ä¹ˆ=w=ï¼Ÿ</div>
  <div class="_10o3OAxT_0">
    
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2020-05-20 18:01:40</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/15/f8/21/3fa228e6.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>æ‚Ÿå…‰</span>
  </div>
  <div class="_2_QraFYR_0">å°è¯•äº†ä¸€ä¸‹ï¼Œxmlé…ç½®æœªæ‰¾åˆ°ç›´æ¥è°ƒç”¨buildæ–¹æ³•çš„é…ç½®ï¼Œç”¨æ„é€ å™¨æ³¨å…¥<br>ç±»ï¼š<br><br>public class Student {<br>    private long id;<br>    private String name;<br><br>    private Student(Builder builder) {<br>        this.id =builder.id;<br>        this.name = builder.name;<br>    }<br><br>    public String getName() {<br>        return name;<br>    }<br><br><br>    public static class Builder {<br>        private long id;<br>        private String name;<br>        public Student build() {<br>            if (StringUtils.isEmpty(name)){<br>                throw  new IllegalArgumentException(&quot;name  is empty&quot;);<br>            }<br>           return new Student(this);<br>        }<br><br>        public void setId(long id) {<br>            this.id = id;<br>        }<br><br>        public void setName(String name) {<br>            this.name = name;<br>        }<br>    }<br>}<br>é…ç½®ï¼š<br>&lt;bean id=&quot;build&quot; class=&quot;cn.gitv.rt.advertisv5.utils.Student.Builder&quot; &gt;<br>        &lt;property name=&quot;name&quot; value=&quot;aa&quot;&#47;&gt;<br>        &lt;property name=&quot;id&quot; value=&quot;2&quot;&#47;&gt;<br>    &lt;&#47;bean&gt;<br>    &lt;bean id=&quot;student&quot; class=&quot;cn.gitv.rt.advertisv5.utils.Student&quot;&gt;<br>        &lt;constructor-arg ref=&quot;build&quot;&#47;&gt;<br>    &lt;&#47;bean&gt;<br>2ã€â€œå®é™…ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨æ˜¯é€‚é…å™¨æ¨¡å¼å¯¹ä»£ç è¿›è¡Œæ”¹é€ ï¼Œè®©å…¶æ»¡è¶³å¼€é—­åŸåˆ™ï¼Œèƒ½æ›´å¥½åœ°æ”¯æŒæ‰©èµâ€ã€‚ è¿™ä¸€å¥åº”è¯¥ â€œèµâ€ æ•²ä¸²è¡Œäº†ã€‚<br></div>
  <div class="_10o3OAxT_0">
    
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2020-05-20 09:14:15</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/19/d9/ff/b23018a6.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>Heaven</span>
  </div>
  <div class="_2_QraFYR_0">å¯¹è±¡çš„åˆå§‹åŒ–æœ‰ä¸¤ç§å®ç°æ–¹å¼ã€‚ä¸€ç§æ˜¯åœ¨ç±»ä¸­è‡ªå®šä¹‰ä¸€ä¸ªåˆå§‹åŒ–å‡½æ•°ï¼Œå¹¶ä¸”é€šè¿‡é…ç½®æ–‡ä»¶ï¼Œæ˜¾å¼åœ°å‘ŠçŸ¥ Springï¼Œå“ªä¸ªå‡½æ•°æ˜¯åˆå§‹åŒ–å‡½æ•°<br></div>
  <div class="_10o3OAxT_0">
    
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2020-05-20 11:45:35</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/13/50/2b/2344cdaa.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>ç¬¬ä¸€è£…ç”²é›†ç¾¤å¸ä»¤å…‹è±æ–¯ç‰¹</span>
  </div>
  <div class="_2_QraFYR_0">ä¸€çœ‹å°±ä¼šï¼Œä¸€å†™å°±åºŸï¼</div>
  <div class="_10o3OAxT_0">
    
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2022-11-11 09:44:05</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/pCUrja4Z78P36FkdXQFFwnsmnicUjTsY7ickbR1xxAEp9yD1JebIafWiaXJLMvW7Ptn7Z6r6z3BiadQHHBhk1icYovw/132"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>ç‰›å‡¡</span>
  </div>
  <div class="_2_QraFYR_0">åœ¨Springä¸­æ²¡æœ‰æ‰¾åˆ°AnnotationMethodHandlerAdapterï¼Œåº”è¯¥æ˜¯RequestMappingHandlerAdapterå§</div>
  <div class="_10o3OAxT_0">
    
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2021-12-14 17:34:31</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src=""
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>Geek_3b1096</span>
  </div>
  <div class="_2_QraFYR_0">ä¿¡æ¯é‡å¾ˆå¤§æ…¢æ…¢æ¶ˆåŒ–è°¢è°¢è€å¸ˆ</div>
  <div class="_10o3OAxT_0">
    
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2020-05-25 00:21:19</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/0f/75/a8/dfe4cade.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>ç”µå…‰ç«çŸ³</span>
  </div>
  <div class="_2_QraFYR_0">&#47;&#47; é€šè¿‡å‚è€ƒå·¥å‚æ–¹æ³•æ¥åˆ›å»ºBeanId=&quot;zheng&quot;&quot;çš„Bean<br><br>&lt;bean id=&quot;zheng&quot; class=&quot;com.xzg.cd.StudentBuilder&quot; build-method=&quot;build&quot;&gt;<br>	&lt;property name=&quot;id&quot; value=&quot;1&quot;&gt;&lt;&#47;property&gt;<br>	&lt;property name=&quot;name&quot; value=&quot;wangzheng&quot;&gt;&lt;&#47;property&gt;<br>&lt;&#47;bean&gt;<br>æŠŠfactory-methodæ”¹æˆbuild-method</div>
  <div class="_10o3OAxT_0">
    
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2020-05-20 11:47:11</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/15/e0/6b/f61d7466.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>prader26</span>
  </div>
  <div class="_2_QraFYR_0">å®ç°æ¥å£+ ç»„åˆç±»ï¼Œå®ç°è£…é¥°å™¨æ¨¡å¼</div>
  <div class="_10o3OAxT_0">
    
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2023-04-13 23:29:25</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/29/b6/06/cd1eaa49.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>å°ç‹åœ¨åŠªåŠ›</span>
  </div>
  <div class="_2_QraFYR_0">åšæŒï¼</div>
  <div class="_10o3OAxT_0">
    
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2022-06-30 15:10:29</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/20/40/6d/61caf56b.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>ğŸš¦æ³¨æ„æœ‰è½¦              à¼½</span>
  </div>
  <div class="_2_QraFYR_0">çœ‹äº†å¼€å¤´è€å¸ˆè®²çš„é€‚é…å™¨æ¨¡å¼ï¼Œè·Ÿç­–ç•¥æ¨¡å¼å¥½åƒå·®ä¸å¤šï¼Œæ€»è§‰å¾—é€‚é…å™¨æ¨¡å¼å°±æ˜¯ç­–ç•¥æ¨¡å¼ï¼›ä¸¤è€…è¯¥æ€ä¹ˆå…·ä½“åŒºåˆ†å‘¢</div>
  <div class="_10o3OAxT_0">
    
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2022-05-19 23:22:38</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTItudDLPfbZabQLjk1NE8NSibQocdRy88rerQdxHFKx4KzUyaEnSLPbszcKAaPX8NgG3sHbZXib41aQ/132"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>Mirss.zhao</span>
  </div>
  <div class="_2_QraFYR_0">åœ¨mappingä¸­ä¿å­˜adapterçš„æ—¶å€™ä¸éœ€è¦if else.åˆ¤æ–­æ˜¯å“ªç§controllerçš„adapterå—</div>
  <div class="_10o3OAxT_0">
    
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2022-01-17 21:12:49</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/11/6f/b4/4aefe4c0.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>é»„å¹³</span>
  </div>
  <div class="_2_QraFYR_0">å°†ç¼“å­˜çš„å†™æ“ä½œå’Œæ•°æ®åº“çš„å†™æ“ä½œï¼Œæ”¾åˆ°åŒä¸€ä¸ªäº‹åŠ¡ä¸­ï¼Œè¦ä¹ˆéƒ½æˆåŠŸï¼Œè¦ä¹ˆéƒ½å¤±è´¥ï¼Œè¿™ä¸ªé—®é¢˜åªæ˜¯è¯´äº†ç”¨äº†è£…é¥°å™¨è®¾è®¡æ¨¡å¼ï¼Œæœ€åå¦‚ä½•è§£å†³å‘¢ï¼Ÿ</div>
  <div class="_10o3OAxT_0">
    
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2022-01-08 17:58:16</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/11/47/18/293cd24d.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>o0oi1i</span>
  </div>
  <div class="_2_QraFYR_0">æ‰“å¡86</div>
  <div class="_10o3OAxT_0">
    
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2020-11-02 11:14:26</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/12/02/2a/90e38b94.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>John(æ˜“ç­‹)</span>
  </div>
  <div class="_2_QraFYR_0">è¿™ä¸¤ç§åŠ¨æ€ä»£ç†å®ç°æ–¹å¼çš„æ›´å¤šåŒºåˆ«è¯·è‡ªè¡ŒGoogle</div>
  <div class="_10o3OAxT_0">
    
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2020-08-24 12:15:01</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/11/6f/b4/4aefe4c0.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>é»„å¹³</span>
  </div>
  <div class="_2_QraFYR_0">TransactionAwareCacheDecoratoræ€ä¹ˆç”¨å‘¢ï¼Ÿ</div>
  <div class="_10o3OAxT_0">
    <p class="_3KxQPN3V_0">ä½œè€…å›å¤: ğŸ˜‚ è‡ªå·±æŸ¥æŸ¥å§</p>
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2020-06-11 01:45:07</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/17/1b/41/dbb7d785.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>xk_</span>
  </div>
  <div class="_2_QraFYR_0">public class Builder {<br>    private String id;<br>    private String name;<br>    private String age;<br><br>    public void setId(String id) {<br>        if (id == null)<br>            throw new RuntimeException(&quot;id can&#39;t be null&quot;);<br>        this.id = id;<br>    }<br><br>    public void setName(String name) {<br>        if (name == null)<br>            throw new RuntimeException(&quot;name can&#39;t be null&quot;);<br>        this.name = name;<br><br>    }<br>    public void setAge(String age) {<br>        if (age == null)<br>            throw new RuntimeException(&quot;age can&#39;t be null&quot;);<br>        this.age = age;<br><br>    }<br>    ...getter...<br>}<br>public class Student {<br>    String id;<br>    String name;<br>    String age;<br><br>    Student(Builder builder) {<br>        id = builder.getId();<br>        name = builder.getName();<br>        age = builder.getAge();<br>    }<br>}<br><br>&lt;bean id=&quot;build&quot; class=&quot;com.aaa.Builder&quot; &gt;<br>        &lt;property name=&quot;name&quot; value=&quot;aa&quot;&#47;&gt;<br>        &lt;property name=&quot;id&quot; value=&quot;2&quot;&#47;&gt;<br>        &lt;property name=&quot;age&quot; value=&quot;2&quot;&#47;&gt;<br>    &lt;&#47;bean&gt;<br>    &lt;bean id=&quot;student&quot; class=&quot;com.aaa.Student&quot;&gt;<br>        &lt;constructor-arg ref=&quot;build&quot;&#47;&gt;<br>    &lt;&#47;bean&gt;</div>
  <div class="_10o3OAxT_0">
    
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2020-05-27 23:53:02</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/16/a5/98/a65ff31a.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>djfhchdh</span>
  </div>
  <div class="_2_QraFYR_0">Bean çš„xmlçš„é…ç½®&lt;constructor-arg ref=&#39;Builderç±»&#39;&gt;ï¼Œå³æ„é€ å‡½æ•°çš„å…¥å‚æ˜¯builderç±»ï¼ˆå¼•ç”¨ç±»å‹ï¼‰ï¼ŒBeanFactoryä¸­ä¼šä½¿ç”¨é€’å½’ï¼Œæ„é€ å®ŒBuilderç±»å¯¹è±¡ä¹‹åï¼Œå†æ„é€ ä½ æƒ³è¦çš„Bean</div>
  <div class="_10o3OAxT_0">
    
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2020-05-25 11:22:38</div>
  </div>
</div>
</div>
</li>
</ul>