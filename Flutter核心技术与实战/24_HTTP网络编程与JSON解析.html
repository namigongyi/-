<audio title="24_HTTPç½‘ç»œç¼–ç¨‹ä¸JSONè§£æ" src="https://static001.geekbang.org/resource/audio/b8/a1/b840f321655f1d0c3eb1b6ef06e7eca1.mp3" controls="controls"></audio> 
<p>ä½ å¥½ï¼Œæˆ‘æ˜¯é™ˆèˆªã€‚</p><p>åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘å¸¦ä½ ä¸€èµ·å­¦ä¹ äº†Dartä¸­å¼‚æ­¥ä¸å¹¶å‘çš„æœºåˆ¶åŠå®ç°åŸç†ã€‚ä¸å…¶ä»–è¯­è¨€ç±»ä¼¼ï¼ŒDartçš„å¼‚æ­¥æ˜¯é€šè¿‡äº‹ä»¶å¾ªç¯ä¸é˜Ÿåˆ—å®ç°çš„ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨Futureæ¥å°è£…å¼‚æ­¥ä»»åŠ¡ã€‚è€Œå¦ä¸€æ–¹é¢ï¼Œå°½ç®¡Dartæ˜¯åŸºäºå•çº¿ç¨‹æ¨¡å‹çš„ï¼Œä½†ä¹Ÿæä¾›äº†Isolateè¿™æ ·çš„â€œå¤šçº¿ç¨‹â€èƒ½åŠ›ï¼Œè¿™ä½¿å¾—æˆ‘ä»¬å¯ä»¥å……åˆ†åˆ©ç”¨ç³»ç»Ÿèµ„æºï¼Œåœ¨å¹¶å‘Isolateä¸­æå®šCPUå¯†é›†å‹çš„ä»»åŠ¡ï¼Œå¹¶é€šè¿‡æ¶ˆæ¯æœºåˆ¶é€šçŸ¥ä¸»Isolateè¿è¡Œç»“æœã€‚</p><p>å¼‚æ­¥ä¸å¹¶å‘çš„ä¸€ä¸ªå…¸å‹åº”ç”¨åœºæ™¯ï¼Œå°±æ˜¯ç½‘ç»œç¼–ç¨‹ã€‚ä¸€ä¸ªå¥½çš„ç§»åŠ¨åº”ç”¨ï¼Œä¸ä»…éœ€è¦æœ‰è‰¯å¥½çš„ç•Œé¢å’Œæ˜“ç”¨çš„äº¤äº’ä½“éªŒï¼Œä¹Ÿéœ€è¦å…·å¤‡å’Œå¤–ç•Œè¿›è¡Œä¿¡æ¯äº¤äº’çš„èƒ½åŠ›ã€‚è€Œé€šè¿‡ç½‘ç»œï¼Œä¿¡æ¯éš”ç¦»çš„å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯é—´å¯ä»¥å»ºç«‹ä¸€ä¸ªåŒå‘çš„é€šä¿¡é€šé“ï¼Œä»è€Œå®ç°èµ„æºè®¿é—®ã€æ¥å£æ•°æ®è¯·æ±‚å’Œæäº¤ã€ä¸Šä¼ ä¸‹è½½æ–‡ä»¶ç­‰æ“ä½œã€‚</p><p>ä¸ºäº†ä¾¿äºæˆ‘ä»¬å¿«é€Ÿå®ç°åŸºäºç½‘ç»œé€šé“çš„ä¿¡æ¯äº¤æ¢å®æ—¶æ›´æ–°Appæ•°æ®ï¼ŒFlutterä¹Ÿæä¾›äº†ä¸€ç³»åˆ—çš„ç½‘ç»œç¼–ç¨‹ç±»åº“å’Œå·¥å…·ã€‚å› æ­¤åœ¨ä»Šå¤©çš„åˆ†äº«ä¸­ï¼Œæˆ‘ä¼šé€šè¿‡ä¸€äº›å°ä¾‹å­ä¸ä½ è®²è¿°åœ¨Flutteråº”ç”¨ä¸­ï¼Œå¦‚ä½•å®ç°ä¸æœåŠ¡ç«¯çš„æ•°æ®äº¤äº’ï¼Œä»¥åŠå¦‚ä½•å°†äº¤äº’å“åº”çš„æ•°æ®æ ¼å¼åŒ–ã€‚</p><h2>Httpç½‘ç»œç¼–ç¨‹</h2><p>æˆ‘ä»¬åœ¨é€šè¿‡ç½‘ç»œä¸æœåŠ¡ç«¯æ•°æ®äº¤äº’æ—¶ï¼Œä¸å¯é¿å…åœ°éœ€è¦ç”¨åˆ°ä¸‰ä¸ªæ¦‚å¿µï¼šå®šä½ã€ä¼ è¾“ä¸åº”ç”¨ã€‚</p><p>å…¶ä¸­ï¼Œ<strong>å®šä½</strong>ï¼Œå®šä¹‰äº†å¦‚ä½•å‡†ç¡®åœ°æ‰¾åˆ°ç½‘ç»œä¸Šçš„ä¸€å°æˆ–è€…å¤šå°ä¸»æœºï¼ˆå³IPåœ°å€ï¼‰ï¼›<strong>ä¼ è¾“</strong>ï¼Œåˆ™ä¸»è¦è´Ÿè´£åœ¨æ‰¾åˆ°ä¸»æœºåå¦‚ä½•é«˜æ•ˆä¸”å¯é åœ°è¿›è¡Œæ•°æ®é€šä¿¡ï¼ˆå³TCPã€UDPåè®®ï¼‰ï¼›è€Œ<strong>åº”ç”¨</strong>ï¼Œåˆ™è´Ÿè´£è¯†åˆ«åŒæ–¹é€šä¿¡çš„å†…å®¹ï¼ˆå³HTTPåè®®ï¼‰ã€‚</p><!-- [[[read_end]]] --><p>æˆ‘ä»¬åœ¨è¿›è¡Œæ•°æ®é€šä¿¡æ—¶ï¼Œå¯ä»¥åªä½¿ç”¨ä¼ è¾“å±‚åè®®ã€‚ä½†ä¼ è¾“å±‚ä¼ é€’çš„æ•°æ®æ˜¯äºŒè¿›åˆ¶æµï¼Œå¦‚æœæ²¡æœ‰åº”ç”¨å±‚ï¼Œæˆ‘ä»¬æ— æ³•è¯†åˆ«æ•°æ®å†…å®¹ã€‚å¦‚æœæƒ³è¦ä½¿ä¼ è¾“çš„æ•°æ®æœ‰æ„ä¹‰ï¼Œåˆ™å¿…é¡»è¦ç”¨åˆ°åº”ç”¨å±‚åè®®ã€‚ç§»åŠ¨åº”ç”¨é€šå¸¸ä½¿ç”¨HTTPåè®®ä½œåº”ç”¨å±‚åè®®ï¼Œæ¥å°è£…HTTPä¿¡æ¯ã€‚</p><p>åœ¨ç¼–ç¨‹æ¡†æ¶ä¸­ï¼Œä¸€æ¬¡HTTPç½‘ç»œè°ƒç”¨é€šå¸¸å¯ä»¥æ‹†è§£ä¸ºä»¥ä¸‹æ­¥éª¤ï¼š</p><ol>
<li>åˆ›å»ºç½‘ç»œè°ƒç”¨å®ä¾‹clientï¼Œè®¾ç½®é€šç”¨è¯·æ±‚è¡Œä¸ºï¼ˆå¦‚è¶…æ—¶æ—¶é—´ï¼‰ï¼›</li>
<li>æ„é€ URIï¼Œè®¾ç½®è¯·æ±‚headerã€bodyï¼›</li>
<li>å‘èµ·è¯·æ±‚, ç­‰å¾…å“åº”ï¼›</li>
<li>è§£ç å“åº”çš„å†…å®¹ã€‚</li>
</ol><p>å½“ç„¶ï¼ŒFlutterä¹Ÿä¸ä¾‹å¤–ã€‚åœ¨Flutterä¸­ï¼ŒHttpç½‘ç»œç¼–ç¨‹çš„å®ç°æ–¹å¼ä¸»è¦åˆ†ä¸ºä¸‰ç§ï¼šdart:ioé‡Œçš„HttpClientå®ç°ã€DartåŸç”Ÿhttpè¯·æ±‚åº“å®ç°ã€ç¬¬ä¸‰æ–¹åº“dioå®ç°ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä¾æ¬¡ä¸ºä½ è®²è§£è¿™ä¸‰ç§æ–¹å¼ã€‚</p><h3>HttpClient</h3><p>HttpClientæ˜¯dart:ioåº“ä¸­æä¾›çš„ç½‘ç»œè¯·æ±‚ç±»ï¼Œå®ç°äº†åŸºæœ¬çš„ç½‘ç»œç¼–ç¨‹åŠŸèƒ½ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘å°†å’Œä½ åˆ†äº«ä¸€ä¸ªå®ä¾‹ï¼Œå¯¹ç…§ç€ä¸Šé¢æåˆ°çš„ç½‘ç»œè°ƒç”¨æ­¥éª¤ï¼Œæ¥æ¼”ç¤ºHttpClientå¦‚ä½•ä½¿ç”¨ã€‚</p><p>åœ¨ä¸‹é¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªHttpClienç½‘ç»œè°ƒç”¨å®ä¾‹ï¼Œè®¾ç½®äº†å…¶è¶…æ—¶æ—¶é—´ä¸º5ç§’ã€‚éšåæ„é€ äº†Flutterå®˜ç½‘çš„URIï¼Œå¹¶è®¾ç½®äº†è¯·æ±‚Headerçš„user-agentä¸ºCustom-UAã€‚ç„¶åå‘èµ·è¯·æ±‚ï¼Œç­‰å¾…Flutterå®˜ç½‘å“åº”ã€‚æœ€ååœ¨æ”¶åˆ°å“åº”åï¼Œæ‰“å°å‡ºè¿”å›ç»“æœï¼š</p><pre><code>get() async {
  //åˆ›å»ºç½‘ç»œè°ƒç”¨ç¤ºä¾‹ï¼Œè®¾ç½®é€šç”¨è¯·æ±‚è¡Œä¸º(è¶…æ—¶æ—¶é—´)
  var httpClient = HttpClient();
  httpClient.idleTimeout = Duration(seconds: 5);
  
  //æ„é€ URIï¼Œè®¾ç½®user-agentä¸º&quot;Custom-UA&quot;
  var uri = Uri.parse(&quot;https://flutter.dev&quot;);
  var request = await httpClient.getUrl(uri);
  request.headers.add(&quot;user-agent&quot;, &quot;Custom-UA&quot;);
  
  //å‘èµ·è¯·æ±‚ï¼Œç­‰å¾…å“åº”
  var response = await request.close();
  
  //æ”¶åˆ°å“åº”ï¼Œæ‰“å°ç»“æœ
  if (response.statusCode == HttpStatus.ok) {
    print(await response.transform(utf8.decoder).join());
  } else {
    print('Error: \nHttp status ${response.statusCode}');
  }
}
</code></pre><p>å¯ä»¥çœ‹åˆ°ï¼Œä½¿ç”¨HttpClientæ¥å‘èµ·ç½‘ç»œè°ƒç”¨è¿˜æ˜¯ç›¸å¯¹æ¯”è¾ƒç®€å•çš„ã€‚</p><p>è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç”±äºç½‘ç»œè¯·æ±‚æ˜¯å¼‚æ­¥è¡Œä¸ºï¼Œå› æ­¤<strong>åœ¨Flutterä¸­ï¼Œæ‰€æœ‰ç½‘ç»œç¼–ç¨‹æ¡†æ¶éƒ½æ˜¯ä»¥Futureä½œä¸ºå¼‚æ­¥è¯·æ±‚çš„åŒ…è£…</strong>ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ä½¿ç”¨awaitä¸asyncè¿›è¡Œéé˜»å¡çš„ç­‰å¾…ã€‚å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥æ³¨å†Œthenï¼Œä»¥å›è°ƒçš„æ–¹å¼è¿›è¡Œç›¸åº”çš„äº‹ä»¶å¤„ç†ã€‚</p><h3>http</h3><p>HttpClientä½¿ç”¨æ–¹å¼è™½ç„¶ç®€å•ï¼Œä½†å…¶æ¥å£å´æš´éœ²äº†ä¸å°‘å†…éƒ¨å®ç°ç»†èŠ‚ã€‚æ¯”å¦‚ï¼Œå¼‚æ­¥è°ƒç”¨æ‹†åˆ†å¾—è¿‡ç»†ï¼Œé“¾æ¥éœ€è¦è°ƒç”¨æ–¹ä¸»åŠ¨å…³é—­ï¼Œè¯·æ±‚ç»“æœæ˜¯å­—ç¬¦ä¸²ä½†å´éœ€è¦æ‰‹åŠ¨è§£ç ç­‰ã€‚</p><p>httpæ˜¯Dartå®˜æ–¹æä¾›çš„å¦ä¸€ä¸ªç½‘ç»œè¯·æ±‚ç±»ï¼Œç›¸æ¯”äºHttpClientï¼Œæ˜“ç”¨æ€§æå‡äº†ä¸å°‘ã€‚åŒæ ·ï¼Œæˆ‘ä»¬ä»¥ä¸€ä¸ªä¾‹å­æ¥ä»‹ç»httpçš„ä½¿ç”¨æ–¹æ³•ã€‚</p><p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦å°†httpåŠ å…¥åˆ°pubspecä¸­çš„ä¾èµ–é‡Œï¼š</p><pre><code>dependencies:
  http: '&gt;=0.11.3+12'
</code></pre><p>åœ¨ä¸‹é¢çš„ä»£ç ä¸­ï¼Œä¸HttpClientçš„ä¾‹å­ç±»ä¼¼çš„ï¼Œæˆ‘ä»¬ä¹Ÿæ˜¯å…ˆåæ„é€ äº†httpç½‘ç»œè°ƒç”¨å®ä¾‹å’ŒFlutterå®˜ç½‘URIï¼Œåœ¨è®¾ç½®user-agentä¸ºCustom-UAåï¼Œå‘å‡ºè¯·æ±‚ï¼Œæœ€åæ‰“å°è¯·æ±‚ç»“æœï¼š</p><pre><code>httpGet() async {
  //åˆ›å»ºç½‘ç»œè°ƒç”¨ç¤ºä¾‹
  var client = http.Client();

  //æ„é€ URI
  var uri = Uri.parse(&quot;https://flutter.dev&quot;);
  
  //è®¾ç½®user-agentä¸º&quot;Custom-UA&quot;ï¼Œéšåç«‹å³å‘å‡ºè¯·æ±‚
  http.Response response = await client.get(uri, headers : {&quot;user-agent&quot; : &quot;Custom-UA&quot;});

  //æ‰“å°è¯·æ±‚ç»“æœ
  if(response.statusCode == HttpStatus.ok) {
    print(response.body);
  } else {
    print(&quot;Error: ${response.statusCode}&quot;);
  }
}
</code></pre><p>å¯ä»¥çœ‹åˆ°ï¼Œç›¸æ¯”äºHttpClientï¼Œhttpçš„ä½¿ç”¨æ–¹å¼æ›´åŠ ç®€å•ï¼Œä»…éœ€ä¸€æ¬¡å¼‚æ­¥è°ƒç”¨å°±å¯ä»¥å®ç°åŸºæœ¬çš„ç½‘ç»œé€šä¿¡ã€‚</p><h3>dio</h3><p>HttpClientå’Œhttpä½¿ç”¨æ–¹å¼è™½ç„¶ç®€å•ï¼Œä½†å…¶æš´éœ²çš„å®šåˆ¶åŒ–èƒ½åŠ›éƒ½ç›¸å¯¹è¾ƒå¼±ï¼Œå¾ˆå¤šå¸¸ç”¨çš„åŠŸèƒ½éƒ½ä¸æ”¯æŒï¼ˆæˆ–è€…å®ç°å¼‚å¸¸ç¹çï¼‰ï¼Œæ¯”å¦‚å–æ¶ˆè¯·æ±‚ã€å®šåˆ¶æ‹¦æˆªå™¨ã€Cookieç®¡ç†ç­‰ã€‚å› æ­¤å¯¹äºå¤æ‚çš„ç½‘ç»œè¯·æ±‚è¡Œä¸ºï¼Œæˆ‘æ¨èä½¿ç”¨ç›®å‰åœ¨Dartç¤¾åŒºäººæ°”è¾ƒé«˜çš„ç¬¬ä¸‰æ–¹dioæ¥å‘èµ·ç½‘ç»œè¯·æ±‚ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘é€šè¿‡å‡ ä¸ªä¾‹å­æ¥å’Œä½ ä»‹ç»dioçš„ä½¿ç”¨æ–¹æ³•ã€‚ä¸httpç±»ä¼¼çš„ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦æŠŠdioåŠ åˆ°pubspecä¸­çš„ä¾èµ–é‡Œï¼š</p><pre><code>dependencies:
  dio: '&gt;2.1.3'
</code></pre><p>åœ¨ä¸‹é¢çš„ä»£ç ä¸­ï¼Œä¸å‰é¢HttpClientä¸httpä¾‹å­ç±»ä¼¼çš„ï¼Œæˆ‘ä»¬ä¹Ÿæ˜¯å…ˆååˆ›å»ºäº†dioç½‘ç»œè°ƒç”¨å®ä¾‹ã€åˆ›å»ºURIã€è®¾ç½®Headerã€å‘å‡ºè¯·æ±‚ï¼Œæœ€åç­‰å¾…è¯·æ±‚ç»“æœï¼š</p><pre><code>void getRequest() async {
  //åˆ›å»ºç½‘ç»œè°ƒç”¨ç¤ºä¾‹
  Dio dio = new Dio();
  
  //è®¾ç½®URIåŠè¯·æ±‚user-agentåå‘èµ·è¯·æ±‚
  var response = await dio.get(&quot;https://flutter.dev&quot;, options:Options(headers: {&quot;user-agent&quot; : &quot;Custom-UA&quot;}));
  
 //æ‰“å°è¯·æ±‚ç»“æœ
  if(response.statusCode == HttpStatus.ok) {
    print(response.data.toString());
  } else {
    print(&quot;Error: ${response.statusCode}&quot;);
  }
}
</code></pre><blockquote>
<p>è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåˆ›å»ºURIã€è®¾ç½®HeaderåŠå‘å‡ºè¯·æ±‚çš„è¡Œä¸ºï¼Œéƒ½æ˜¯é€šè¿‡dio.getæ–¹æ³•å®ç°çš„ã€‚è¿™ä¸ªæ–¹æ³•çš„optionså‚æ•°æä¾›äº†ç²¾ç»†åŒ–æ§åˆ¶ç½‘ç»œè¯·æ±‚çš„èƒ½åŠ›ï¼Œå¯ä»¥æ”¯æŒè®¾ç½®Headerã€è¶…æ—¶æ—¶é—´ã€Cookieã€è¯·æ±‚æ–¹æ³•ç­‰ã€‚è¿™éƒ¨åˆ†å†…å®¹ä¸æ˜¯ä»Šå¤©åˆ†äº«çš„é‡ç‚¹ï¼Œå¦‚æœä½ æƒ³æ·±å…¥ç†è§£çš„è¯ï¼Œå¯ä»¥è®¿é—®å…¶<a href="https://github.com/flutterchina/dio#dio-apis">APIæ–‡æ¡£</a>å­¦ä¹ å…·ä½“ä½¿ç”¨æ–¹æ³•ã€‚</p>
</blockquote><p>å¯¹äºå¸¸è§çš„ä¸Šä¼ åŠä¸‹è½½æ–‡ä»¶éœ€æ±‚ï¼Œdioä¹Ÿæä¾›äº†è‰¯å¥½çš„æ”¯æŒï¼šæ–‡ä»¶ä¸Šä¼ å¯ä»¥é€šè¿‡æ„å»ºè¡¨å•FormDataå®ç°ï¼Œè€Œæ–‡ä»¶ä¸‹è½½åˆ™å¯ä»¥ä½¿ç”¨downloadæ–¹æ³•æå®šã€‚</p><p>åœ¨ä¸‹é¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡FormDataåˆ›å»ºäº†ä¸¤ä¸ªå¾…ä¸Šä¼ çš„æ–‡ä»¶ï¼Œé€šè¿‡postæ–¹æ³•å‘é€è‡³æœåŠ¡ç«¯ã€‚downloadçš„ä½¿ç”¨æ–¹æ³•åˆ™æ›´ä¸ºç®€å•ï¼Œæˆ‘ä»¬ç›´æ¥åœ¨è¯·æ±‚å‚æ•°ä¸­ï¼ŒæŠŠå¾…ä¸‹è½½çš„æ–‡ä»¶åœ°å€å’Œæœ¬åœ°æ–‡ä»¶åæä¾›ç»™dioå³å¯ã€‚å¦‚æœæˆ‘ä»¬éœ€è¦æ„ŸçŸ¥ä¸‹è½½è¿›åº¦ï¼Œå¯ä»¥å¢åŠ onReceiveProgresså›è°ƒå‡½æ•°ï¼š</p><pre><code>//ä½¿ç”¨FormDataè¡¨å•æ„å»ºå¾…ä¸Šä¼ æ–‡ä»¶
FormData formData = FormData.from({
  &quot;file1&quot;: UploadFileInfo(File(&quot;./file1.txt&quot;), &quot;file1.txt&quot;),
  &quot;file2&quot;: UploadFileInfo(File(&quot;./file2.txt&quot;), &quot;file1.txt&quot;),

});
//é€šè¿‡postæ–¹æ³•å‘é€è‡³æœåŠ¡ç«¯
var responseY = await dio.post(&quot;https://xxx.com/upload&quot;, data: formData);
print(responseY.toString());

//ä½¿ç”¨downloadæ–¹æ³•ä¸‹è½½æ–‡ä»¶
dio.download(&quot;https://xxx.com/file1&quot;, &quot;xx1.zip&quot;);

//å¢åŠ ä¸‹è½½è¿›åº¦å›è°ƒå‡½æ•°
dio.download(&quot;https://xxx.com/file1&quot;, &quot;xx2.zip&quot;, onReceiveProgress: (count, total) {
	//do something      
});
</code></pre><p>æœ‰æ—¶ï¼Œæˆ‘ä»¬çš„é¡µé¢ç”±å¤šä¸ªå¹¶è¡Œçš„è¯·æ±‚å“åº”ç»“æœæ„æˆï¼Œè¿™å°±éœ€è¦ç­‰å¾…è¿™äº›è¯·æ±‚éƒ½è¿”å›åæ‰èƒ½åˆ·æ–°ç•Œé¢ã€‚åœ¨dioä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç»“åˆFuture.waitæ–¹æ³•è½»æ¾å®ç°ï¼š</p><pre><code>//åŒæ—¶å‘èµ·ä¸¤ä¸ªå¹¶è¡Œè¯·æ±‚
List&lt;Response&gt; responseX= await Future.wait([dio.get(&quot;https://flutter.dev&quot;),dio.get(&quot;https://pub.dev/packages/dio&quot;)]);

//æ‰“å°è¯·æ±‚1å“åº”ç»“æœ
print(&quot;Response1: ${responseX[0].toString()}&quot;);
//æ‰“å°è¯·æ±‚2å“åº”ç»“æœ
print(&quot;Response2: ${responseX[1].toString()}&quot;);
</code></pre><p>æ­¤å¤–ï¼Œä¸Androidçš„okHttpä¸€æ ·ï¼Œdioè¿˜æä¾›äº†è¯·æ±‚æ‹¦æˆªå™¨ï¼Œé€šè¿‡æ‹¦æˆªå™¨ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è¯·æ±‚ä¹‹å‰ï¼Œæˆ–å“åº”ä¹‹ååšä¸€äº›ç‰¹æ®Šçš„æ“ä½œã€‚æ¯”å¦‚å¯ä»¥ä¸ºè¯·æ±‚optionç»Ÿä¸€å¢åŠ ä¸€ä¸ªheaderï¼Œæˆ–æ˜¯è¿”å›ç¼“å­˜æ•°æ®ï¼Œæˆ–æ˜¯å¢åŠ æœ¬åœ°æ ¡éªŒå¤„ç†ç­‰ç­‰ã€‚</p><p>åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä¸ºdioå¢åŠ äº†ä¸€ä¸ªæ‹¦æˆªå™¨ã€‚åœ¨è¯·æ±‚å‘é€ä¹‹å‰ï¼Œä¸ä»…ä¸ºæ¯ä¸ªè¯·æ±‚å¤´éƒ½åŠ ä¸Šäº†è‡ªå®šä¹‰çš„user-agentï¼Œè¿˜å®ç°äº†åŸºæœ¬çš„tokenè®¤è¯ä¿¡æ¯æ£€æŸ¥åŠŸèƒ½ã€‚è€Œå¯¹äºæœ¬åœ°å·²ç»ç¼“å­˜äº†è¯·æ±‚urièµ„æºçš„åœºæ™¯ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥è¿”å›ç¼“å­˜æ•°æ®ï¼Œé¿å…å†æ¬¡ä¸‹è½½ï¼š</p><pre><code>//å¢åŠ æ‹¦æˆªå™¨
dio.interceptors.add(InterceptorsWrapper(
    onRequest: (RequestOptions options){
      //ä¸ºæ¯ä¸ªè¯·æ±‚å¤´éƒ½å¢åŠ user-agent
      options.headers[&quot;user-agent&quot;] = &quot;Custom-UA&quot;;
      //æ£€æŸ¥æ˜¯å¦æœ‰tokenï¼Œæ²¡æœ‰åˆ™ç›´æ¥æŠ¥é”™
      if(options.headers['token'] == null) {
        return dio.reject(&quot;Error:è¯·å…ˆç™»å½•&quot;);
      } 
      //æ£€æŸ¥ç¼“å­˜æ˜¯å¦æœ‰æ•°æ®
      if(options.uri == Uri.parse('http://xxx.com/file1')) {
        return dio.resolve(&quot;è¿”å›ç¼“å­˜æ•°æ®&quot;);
      }
      //æ”¾è¡Œè¯·æ±‚
      return options;
    }
));

//å¢åŠ try catchï¼Œé˜²æ­¢è¯·æ±‚æŠ¥é”™
try {
  var response = await dio.get(&quot;https://xxx.com/xxx.zip&quot;);
  print(response.data.toString());
}catch(e) {
  print(e);
}
</code></pre><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç”±äºç½‘ç»œé€šä¿¡æœŸé—´æœ‰å¯èƒ½ä¼šå‡ºç°å¼‚å¸¸ï¼ˆæ¯”å¦‚ï¼ŒåŸŸåæ— æ³•è§£æã€è¶…æ—¶ç­‰ï¼‰ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦ä½¿ç”¨try-catchæ¥æ•è·è¿™äº›æœªçŸ¥é”™è¯¯ï¼Œé˜²æ­¢ç¨‹åºå‡ºç°å¼‚å¸¸ã€‚</p><p>é™¤äº†è¿™äº›åŸºæœ¬çš„ç”¨æ³•ï¼Œdioè¿˜æ”¯æŒè¯·æ±‚å–æ¶ˆã€è®¾ç½®ä»£ç†ï¼Œè¯ä¹¦æ ¡éªŒç­‰åŠŸèƒ½ã€‚ä¸è¿‡ï¼Œè¿™äº›é«˜çº§ç‰¹æ€§ä¸å±äºæœ¬æ¬¡åˆ†äº«çš„é‡ç‚¹ï¼Œæ•…ä¸å†èµ˜è¿°ï¼Œè¯¦æƒ…å¯ä»¥å‚è€ƒdioçš„<a href="https://github.com/flutterchina/dio/blob/master/README-ZH.md">GitHubä¸»é¡µ</a>äº†è§£å…·ä½“ç”¨æ³•ã€‚</p><h2>JSONè§£æ</h2><p>ç§»åŠ¨åº”ç”¨ä¸WebæœåŠ¡å™¨å»ºç«‹å¥½äº†è¿æ¥ä¹‹åï¼Œæ¥ä¸‹æ¥çš„ä¸¤ä¸ªé‡è¦å·¥ä½œåˆ†åˆ«æ˜¯ï¼šæœåŠ¡å™¨å¦‚ä½•ç»“æ„åŒ–åœ°å»æè¿°è¿”å›çš„é€šä¿¡ä¿¡æ¯ï¼Œä»¥åŠç§»åŠ¨åº”ç”¨å¦‚ä½•è§£æè¿™äº›æ ¼å¼åŒ–çš„ä¿¡æ¯ã€‚</p><h3>å¦‚ä½•ç»“æ„åŒ–åœ°æè¿°è¿”å›çš„é€šä¿¡ä¿¡æ¯ï¼Ÿ</h3><p>åœ¨å¦‚ä½•ç»“æ„åŒ–åœ°å»è¡¨è¾¾ä¿¡æ¯ä¸Šï¼Œæˆ‘ä»¬éœ€è¦ç”¨åˆ°JSONã€‚JSONæ˜¯ä¸€ç§è½»é‡çº§çš„ã€ç”¨äºè¡¨è¾¾ç”±å±æ€§å€¼å’Œå­—é¢é‡ç»„æˆå¯¹è±¡çš„æ•°æ®äº¤æ¢è¯­è¨€ã€‚</p><p>ä¸€ä¸ªç®€å•çš„è¡¨ç¤ºå­¦ç”Ÿæˆç»©çš„JSONç»“æ„ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre><code>String jsonString = '''
{
  &quot;id&quot;:&quot;123&quot;,
  &quot;name&quot;:&quot;å¼ ä¸‰&quot;,
  &quot;score&quot; : 95
}
''';
</code></pre><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç”±äºFlutterä¸æ”¯æŒè¿è¡Œæ—¶åå°„ï¼Œå› æ­¤å¹¶æ²¡æœ‰æä¾›åƒGsonã€Mantleè¿™æ ·è‡ªåŠ¨è§£æJSONçš„åº“æ¥é™ä½è§£ææˆæœ¬ã€‚åœ¨Flutterä¸­ï¼ŒJSONè§£æå®Œå…¨æ˜¯æ‰‹åŠ¨çš„ï¼Œå¼€å‘è€…è¦åšçš„äº‹æƒ…å¤šäº†ä¸€äº›ï¼Œä½†ä½¿ç”¨èµ·æ¥å€’ä¹Ÿç›¸å¯¹çµæ´»ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±çœ‹çœ‹Flutteråº”ç”¨æ˜¯å¦‚ä½•è§£æè¿™äº›æ ¼å¼åŒ–çš„ä¿¡æ¯ã€‚</p><h3>å¦‚ä½•è§£ææ ¼å¼åŒ–çš„ä¿¡æ¯ï¼Ÿ</h3><p>æ‰€è°“æ‰‹åŠ¨è§£æï¼Œæ˜¯æŒ‡ä½¿ç”¨dart:convertåº“ä¸­å†…ç½®çš„JSONè§£ç å™¨ï¼Œå°†JSONå­—ç¬¦ä¸²è§£ææˆè‡ªå®šä¹‰å¯¹è±¡çš„è¿‡ç¨‹ã€‚ä½¿ç”¨è¿™ç§æ–¹å¼ï¼Œæˆ‘ä»¬éœ€è¦å…ˆå°†JSONå­—ç¬¦ä¸²ä¼ é€’ç»™JSON.decodeæ–¹æ³•è§£ææˆä¸€ä¸ªMapï¼Œç„¶åæŠŠè¿™ä¸ªMapä¼ ç»™è‡ªå®šä¹‰çš„ç±»ï¼Œè¿›è¡Œç›¸å…³å±æ€§çš„èµ‹å€¼ã€‚</p><p>ä»¥ä¸Šé¢è¡¨ç¤ºå­¦ç”Ÿæˆç»©çš„JSONç»“æ„ä¸ºä¾‹ï¼Œæˆ‘æ¥å’Œä½ æ¼”ç¤ºæ‰‹åŠ¨è§£æçš„ä½¿ç”¨æ–¹æ³•ã€‚</p><p>é¦–å…ˆï¼Œæˆ‘ä»¬æ ¹æ®JSONç»“æ„å®šä¹‰Studentç±»ï¼Œå¹¶åˆ›å»ºä¸€ä¸ªå·¥å‚ç±»ï¼Œæ¥å¤„ç†Studentç±»å±æ€§æˆå‘˜ä¸JSONå­—å…¸å¯¹è±¡çš„å€¼ä¹‹é—´çš„æ˜ å°„å…³ç³»ï¼š</p><pre><code>class Student{
  //å±æ€§idï¼Œåå­—ä¸æˆç»©
  String id;
  String name;
  int score;
  //æ„é€ æ–¹æ³•  
  Student({
    this.id,
    this.name,
    this.score
  });
  //JSONè§£æå·¥å‚ç±»ï¼Œä½¿ç”¨å­—å…¸æ•°æ®ä¸ºå¯¹è±¡åˆå§‹åŒ–èµ‹å€¼
  factory Student.fromJson(Map&lt;String, dynamic&gt; parsedJson){
    return Student(
        id: parsedJson['id'],
        name : parsedJson['name'],
        score : parsedJson ['score']
    );
  }
}
</code></pre><p>æ•°æ®è§£æç±»åˆ›å»ºå¥½äº†ï¼Œå‰©ä¸‹çš„äº‹æƒ…å°±ç›¸å¯¹ç®€å•äº†ï¼Œæˆ‘ä»¬åªéœ€è¦æŠŠJSONæ–‡æœ¬é€šè¿‡JSON.decodeæ–¹æ³•è½¬æ¢æˆMapï¼Œç„¶åæŠŠå®ƒäº¤ç»™Studentçš„å·¥å‚ç±»fromJsonæ–¹æ³•ï¼Œå³å¯å®ŒæˆStudentå¯¹è±¡çš„è§£æï¼š</p><pre><code>loadStudent() {
  //jsonStringä¸ºJSONæ–‡æœ¬
  final jsonResponse = json.decode(jsonString);
  Student student = Student.fromJson(jsonResponse);
  print(student.name);
}
</code></pre><p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼ŒJSONæ–‡æœ¬æ‰€æœ‰çš„å±æ€§éƒ½æ˜¯åŸºæœ¬ç±»å‹ï¼Œå› æ­¤æˆ‘ä»¬ç›´æ¥ä»JSONå­—å…¸å–å‡ºç›¸åº”çš„å…ƒç´ ä¸ºå¯¹è±¡èµ‹å€¼å³å¯ã€‚è€Œå¦‚æœJSONä¸‹é¢è¿˜æœ‰åµŒå¥—å¯¹è±¡å±æ€§ï¼Œæ¯”å¦‚ä¸‹é¢çš„ä¾‹å­ä¸­ï¼ŒStudentè¿˜æœ‰ä¸€ä¸ªteacherçš„å±æ€§ï¼Œæˆ‘ä»¬åˆè¯¥å¦‚ä½•è§£æå‘¢ï¼Ÿ</p><pre><code>String jsonString = '''
{
  &quot;id&quot;:&quot;123&quot;,
  &quot;name&quot;:&quot;å¼ ä¸‰&quot;,
  &quot;score&quot; : 95,
  &quot;teacher&quot;: {
    &quot;name&quot;: &quot;æå››&quot;,
    &quot;age&quot; : 40
  }
}
''';
</code></pre><p>è¿™é‡Œï¼Œteacherä¸å†æ˜¯ä¸€ä¸ªåŸºæœ¬ç±»å‹ï¼Œè€Œæ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚é¢å¯¹è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬éœ€è¦ä¸ºæ¯ä¸€ä¸ªéåŸºæœ¬ç±»å‹å±æ€§åˆ›å»ºä¸€ä¸ªè§£æç±»ã€‚ä¸Studentç±»ä¼¼ï¼Œæˆ‘ä»¬ä¹Ÿéœ€è¦ä¸ºå®ƒçš„å±æ€§teacheråˆ›å»ºä¸€ä¸ªè§£æç±»Teacherï¼š</p><pre><code>class Teacher {
  //Teacherçš„åå­—ä¸å¹´é¾„
  String name;
  int age;
  //æ„é€ æ–¹æ³•
  Teacher({this.name,this.age});
  //JSONè§£æå·¥å‚ç±»ï¼Œä½¿ç”¨å­—å…¸æ•°æ®ä¸ºå¯¹è±¡åˆå§‹åŒ–èµ‹å€¼
  factory Teacher.fromJson(Map&lt;String, dynamic&gt; parsedJson){
    return Teacher(
        name : parsedJson['name'],
        age : parsedJson ['age']
    );
  }
}
</code></pre><p>ç„¶åï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨Studentç±»ä¸­ï¼Œå¢åŠ teacherå±æ€§åŠå¯¹åº”çš„JSONæ˜ å°„è§„åˆ™å³å¯ï¼š</p><pre><code>class Student{
  ...
  //å¢åŠ teacherå±æ€§
  Teacher teacher;
  //æ„é€ å‡½æ•°å¢åŠ teacher
  Student({
    ...
    this.teacher
  });
  factory Student.fromJson(Map&lt;String, dynamic&gt; parsedJson){
    return Student(
        ...
        //å¢åŠ æ˜ å°„è§„åˆ™
        teacher: Teacher.fromJson(parsedJson ['teacher'])
    );
  }
}
</code></pre><p>å®Œæˆäº†teacherå±æ€§çš„æ˜ å°„è§„åˆ™æ·»åŠ ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥ç»§ç»­ä½¿ç”¨Studentæ¥è§£æä¸Šè¿°çš„JSONæ–‡æœ¬äº†ï¼š</p><pre><code>final jsonResponse = json.decode(jsonString);//å°†å­—ç¬¦ä¸²è§£ç æˆMapå¯¹è±¡
Student student = Student.fromJson(jsonResponse);//æ‰‹åŠ¨è§£æ
print(student.teacher.name);
</code></pre><p>å¯ä»¥çœ‹åˆ°ï¼Œé€šè¿‡è¿™ç§æ–¹æ³•ï¼Œæ— è®ºå¯¹è±¡æœ‰å¤šå¤æ‚çš„éåŸºæœ¬ç±»å‹å±æ€§ï¼Œæˆ‘ä»¬éƒ½å¯ä»¥åˆ›å»ºå¯¹åº”çš„è§£æç±»è¿›è¡Œå¤„ç†ã€‚</p><p>ä¸è¿‡åˆ°ç°åœ¨ä¸ºæ­¢ï¼Œæˆ‘ä»¬çš„JSONæ•°æ®è§£æè¿˜æ˜¯åœ¨ä¸»Isolateä¸­å®Œæˆã€‚å¦‚æœJSONçš„æ•°æ®æ ¼å¼æ¯”è¾ƒå¤æ‚ï¼Œæ•°æ®é‡åˆå¤§ï¼Œè¿™ç§è§£ææ–¹å¼å¯èƒ½ä¼šé€ æˆçŸ­æœŸUIæ— æ³•å“åº”ã€‚å¯¹äºè¿™ç±»CPUå¯†é›†å‹çš„æ“ä½œï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­æåˆ°çš„computeå‡½æ•°ï¼Œå°†è§£æå·¥ä½œæ”¾åˆ°æ–°çš„Isolateä¸­å®Œæˆï¼š</p><pre><code>static Student parseStudent(String content) {
  final jsonResponse = json.decode(content);
  Student student = Student.fromJson(jsonResponse);
  return student;
}
doSth() {
 ...
 //ç”¨computeå‡½æ•°å°†jsonè§£ææ”¾åˆ°æ–°Isolate
 compute(parseStudent,jsonString).then((student)=&gt;print(student.teacher.name));
}
</code></pre><p>é€šè¿‡computeçš„æ”¹é€ ï¼Œæˆ‘ä»¬å°±ä¸ç”¨æ‹…å¿ƒJSONè§£ææ—¶é—´è¿‡é•¿é˜»å¡UIå“åº”äº†ã€‚</p><h2>æ€»ç»“</h2><p>å¥½äº†ï¼Œä»Šå¤©çš„åˆ†äº«å°±åˆ°è¿™é‡Œäº†ï¼Œæˆ‘ä»¬ç®€å•å›é¡¾ä¸€ä¸‹ä¸»è¦å†…å®¹ã€‚</p><p>é¦–å…ˆï¼Œæˆ‘å¸¦ä½ å­¦ä¹ äº†å®ç°Flutteråº”ç”¨ä¸æœåŠ¡ç«¯é€šä¿¡çš„ä¸‰ç§æ–¹å¼ï¼Œå³HttpClientã€httpä¸dioã€‚å…¶ä¸­dioæä¾›çš„åŠŸèƒ½æ›´ä¸ºå¼ºå¤§ï¼Œå¯ä»¥æ”¯æŒè¯·æ±‚æ‹¦æˆªã€æ–‡ä»¶ä¸Šä¼ ä¸‹è½½ã€è¯·æ±‚åˆå¹¶ç­‰é«˜çº§èƒ½åŠ›ã€‚å› æ­¤ï¼Œæˆ‘æ¨èä½ åœ¨å®é™…é¡¹ç›®ä¸­ä½¿ç”¨dioçš„æ–¹å¼ã€‚</p><p>ç„¶åï¼Œæˆ‘å’Œä½ åˆ†äº«äº†JSONè§£æçš„ç›¸å…³å†…å®¹ã€‚JSONè§£æåœ¨Flutterä¸­ç›¸å¯¹æ¯”è¾ƒç®€å•ï¼Œä½†ç”±äºä¸æ”¯æŒåå°„ï¼Œæ‰€ä»¥æˆ‘ä»¬åªèƒ½æ‰‹åŠ¨è§£æï¼Œå³ï¼šå…ˆå°†JSONå­—ç¬¦ä¸²è½¬æ¢æˆMapï¼Œç„¶åå†æŠŠè¿™ä¸ªMapç»™åˆ°è‡ªå®šä¹‰ç±»ï¼Œè¿›è¡Œç›¸å…³å±æ€§çš„èµ‹å€¼ã€‚</p><p>å¦‚æœä½ æœ‰åŸç”ŸAndroidã€iOSå¼€å‘ç»éªŒçš„è¯ï¼Œå¯èƒ½ä¼šè§‰å¾—Flutteræä¾›çš„JSONæ‰‹åŠ¨è§£ææ–¹æ¡ˆå¹¶ä¸å¥½ç”¨ã€‚åœ¨Flutterä¸­ï¼Œæ²¡æœ‰åƒåŸç”Ÿå¼€å‘é‚£æ ·æä¾›äº†Gsonæˆ–Mantleç­‰åº“ï¼Œç”¨äºå°†JSONå­—ç¬¦ä¸²ç›´æ¥è½¬æ¢ä¸ºå¯¹åº”çš„å®ä½“ç±»ã€‚è€Œè¿™äº›èƒ½åŠ›æ— ä¸€ä¾‹å¤–éƒ½éœ€è¦ç”¨åˆ°è¿è¡Œæ—¶åå°„ï¼Œè¿™æ˜¯Flutterä»è®¾è®¡ä¹‹åˆå°±ä¸æ”¯æŒçš„ï¼Œç†ç”±å¦‚ä¸‹ï¼š</p><ol>
<li>è¿è¡Œæ—¶åå°„ç ´åäº†ç±»çš„å°è£…æ€§å’Œå®‰å…¨æ€§ï¼Œä¼šå¸¦æ¥å®‰å…¨é£é™©ã€‚å°±åœ¨å‰æ®µæ—¶é—´ï¼ŒFastjsonæ¡†æ¶å°±çˆ†å‡ºäº†ä¸€ä¸ªå·¨å¤§çš„å®‰å…¨æ¼æ´ã€‚è¿™ä¸ªæ¼æ´ä½¿å¾—ç²¾å¿ƒæ„é€ çš„å­—ç¬¦ä¸²æ–‡æœ¬ï¼Œå¯ä»¥åœ¨ååºåˆ—åŒ–æ—¶è®©æœåŠ¡å™¨æ‰§è¡Œä»»æ„ä»£ç ï¼Œç›´æ¥å¯¼è‡´ä¸šåŠ¡æœºå™¨è¢«è¿œç¨‹æ§åˆ¶ã€å†…ç½‘æ¸—é€ã€çªƒå–æ•æ„Ÿä¿¡æ¯ç­‰æ“ä½œã€‚</li>
<li>è¿è¡Œæ—¶åå°„ä¼šå¢åŠ äºŒè¿›åˆ¶æ–‡ä»¶å¤§å°ã€‚å› ä¸ºæä¸æ¸…æ¥šå“ªäº›ä»£ç å¯èƒ½ä¼šåœ¨è¿è¡Œæ—¶ç”¨åˆ°ï¼Œå› æ­¤ä½¿ç”¨åå°„åï¼Œä¼šé»˜è®¤ä½¿ç”¨æ‰€æœ‰ä»£ç æ„å»ºåº”ç”¨ç¨‹åºï¼Œè¿™å°±å¯¼è‡´ç¼–è¯‘å™¨æ— æ³•ä¼˜åŒ–ç¼–è¯‘æœŸé—´æœªä½¿ç”¨çš„ä»£ç ï¼Œåº”ç”¨å®‰è£…åŒ…ä½“ç§¯æ— æ³•è¿›ä¸€æ­¥å‹ç¼©ï¼Œè¿™å¯¹äºè‡ªå¸¦Dartè™šæ‹Ÿæœºçš„Flutteråº”ç”¨ç¨‹åºæ˜¯éš¾ä»¥æ¥å—çš„ã€‚</li>
</ol><p>åå°„ç»™å¼€å‘è€…ç¼–ç¨‹å¸¦æ¥äº†æ–¹ä¾¿ï¼Œä½†ä¹Ÿå¸¦æ¥äº†å¾ˆå¤šéš¾ä»¥è§£å†³çš„æ–°é—®é¢˜ï¼Œå› æ­¤Flutterå¹¶ä¸æ”¯æŒåå°„ã€‚è€Œæˆ‘ä»¬è¦åšçš„å°±æ˜¯ï¼Œè€è€å®å®åœ°æ‰‹åŠ¨è§£æJSONå§ã€‚</p><p>æˆ‘æŠŠä»Šå¤©åˆ†äº«æ‰€æ¶‰åŠåˆ°çš„çŸ¥è¯†ç‚¹æ‰“åŒ…åˆ°äº†<a href="https://github.com/cyndibaby905/24_network_demo">GitHub</a>ä¸­ï¼Œä½ å¯ä»¥ä¸‹è½½ä¸‹æ¥ï¼Œåå¤è¿è¡Œå‡ æ¬¡ï¼ŒåŠ æ·±ç†è§£ä¸è®°å¿†ã€‚</p><h2>æ€è€ƒé¢˜</h2><p>æœ€åï¼Œæˆ‘ç»™ä½ ç•™ä¸¤é“æ€è€ƒé¢˜å§ã€‚</p><ol>
<li>è¯·ä½¿ç”¨dioå®ç°ä¸€ä¸ªè‡ªå®šä¹‰æ‹¦æˆªå™¨ï¼Œæ‹¦æˆªå™¨å†…æ£€æŸ¥headerä¸­çš„tokenï¼šå¦‚æœæ²¡æœ‰tokenï¼Œéœ€è¦æš‚åœæœ¬æ¬¡è¯·æ±‚ï¼ŒåŒæ—¶è®¿é—®"<a href="http://xxxx.com/token">http://xxxx.com/token</a>"ï¼Œåœ¨è·å–æ–°tokenåç»§ç»­æœ¬æ¬¡è¯·æ±‚ã€‚</li>
<li>ä¸ºä»¥ä¸‹Student JSONå†™ç›¸åº”çš„è§£æç±»ï¼š</li>
</ol><pre><code>String jsonString = '''
  {
    &quot;id&quot;:&quot;123&quot;,
    &quot;name&quot;:&quot;å¼ ä¸‰&quot;,
    &quot;score&quot; : 95,
    &quot;teachers&quot;: [
       {
         &quot;name&quot;: &quot;æå››&quot;,
         &quot;age&quot; : 40
       },
       {
         &quot;name&quot;: &quot;ç‹äº”&quot;,
         &quot;age&quot; : 45
       }
    ]
  }
  ''';
</code></pre><p>æ¬¢è¿ä½ åœ¨è¯„è®ºåŒºç»™æˆ‘ç•™è¨€åˆ†äº«ä½ çš„è§‚ç‚¹ï¼Œæˆ‘ä¼šåœ¨ä¸‹ä¸€ç¯‡æ–‡ç« ä¸­ç­‰å¾…ä½ ï¼æ„Ÿè°¢ä½ çš„æ”¶å¬ï¼Œä¹Ÿæ¬¢è¿ä½ æŠŠè¿™ç¯‡æ–‡ç« åˆ†äº«ç»™æ›´å¤šçš„æœ‹å‹ä¸€èµ·é˜…è¯»ã€‚</p><p></p>
<style>
    ul {
      list-style: none;
      display: block;
      list-style-type: disc;
      margin-block-start: 1em;
      margin-block-end: 1em;
      margin-inline-start: 0px;
      margin-inline-end: 0px;
      padding-inline-start: 40px;
    }
    li {
      display: list-item;
      text-align: -webkit-match-parent;
    }
    ._2sjJGcOH_0 {
      list-style-position: inside;
      width: 100%;
      display: -webkit-box;
      display: -ms-flexbox;
      display: flex;
      -webkit-box-orient: horizontal;
      -webkit-box-direction: normal;
      -ms-flex-direction: row;
      flex-direction: row;
      margin-top: 26px;
      border-bottom: 1px solid rgba(233,233,233,0.6);
    }
    ._2sjJGcOH_0 ._3FLYR4bF_0 {
      width: 34px;
      height: 34px;
      -ms-flex-negative: 0;
      flex-shrink: 0;
      border-radius: 50%;
    }
    ._2sjJGcOH_0 ._36ChpWj4_0 {
      margin-left: 0.5rem;
      -webkit-box-flex: 1;
      -ms-flex-positive: 1;
      flex-grow: 1;
      padding-bottom: 20px;
    }
    ._2sjJGcOH_0 ._36ChpWj4_0 ._2zFoi7sd_0 {
      font-size: 16px;
      color: #3d464d;
      font-weight: 500;
      -webkit-font-smoothing: antialiased;
      line-height: 34px;
    }
    ._2sjJGcOH_0 ._36ChpWj4_0 ._2_QraFYR_0 {
      margin-top: 12px;
      color: #505050;
      -webkit-font-smoothing: antialiased;
      font-size: 14px;
      font-weight: 400;
      white-space: normal;
      word-break: break-all;
      line-height: 24px;
    }
    ._2sjJGcOH_0 ._10o3OAxT_0 {
      margin-top: 18px;
      border-radius: 4px;
      background-color: #f6f7fb;
    }
    ._2sjJGcOH_0 ._3klNVc4Z_0 {
      display: -webkit-box;
      display: -ms-flexbox;
      display: flex;
      -webkit-box-orient: horizontal;
      -webkit-box-direction: normal;
      -ms-flex-direction: row;
      flex-direction: row;
      -webkit-box-pack: justify;
      -ms-flex-pack: justify;
      justify-content: space-between;
      -webkit-box-align: center;
      -ms-flex-align: center;
      align-items: center;
      margin-top: 15px;
    }
    ._2sjJGcOH_0 ._10o3OAxT_0 ._3KxQPN3V_0 {
      color: #505050;
      -webkit-font-smoothing: antialiased;
      font-size: 14px;
      font-weight: 400;
      white-space: normal;
      word-break: break-word;
      padding: 20px 20px 20px 24px;
    }
    ._2sjJGcOH_0 ._3klNVc4Z_0 {
      display: -webkit-box;
      display: -ms-flexbox;
      display: flex;
      -webkit-box-orient: horizontal;
      -webkit-box-direction: normal;
      -ms-flex-direction: row;
      flex-direction: row;
      -webkit-box-pack: justify;
      -ms-flex-pack: justify;
      justify-content: space-between;
      -webkit-box-align: center;
      -ms-flex-align: center;
      align-items: center;
      margin-top: 15px;
    }
    ._2sjJGcOH_0 ._3Hkula0k_0 {
      color: #b2b2b2;
      font-size: 14px;
    }
</style><ul><li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/12/04/37/aa04f997.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>å’Œå°èƒ–</span>
  </div>
  <div class="_2_QraFYR_0">ç¬¬ä¸€ä¸ªé—®é¢˜è§£å†³æ–¹æ³•ï¼š<br>dio.interceptors.add(InterceptorsWrapper(<br>      onRequest: (Options options) async {<br>        if (options.headers[&#39;token&#39;] == null) {<br>          print(&quot;no tokenï¼Œrequest token firstly...&quot;);<br>          &#47;&#47;lock the dio.<br>          dio.lock();<br>          return new Dio().get(&quot;http:&#47;&#47;xxxx.com&#47;token&quot;).then((d) {<br>            options.headers[&quot;token&quot;] = d.data[&#39;token&#39;];<br>            print(&quot;request token succeed, value: &quot; + d.data[&#39;token&#39;]);<br>            print(<br>                &#39;continue to perform requestï¼špath:${options.path}ï¼ŒbaseURL:${options.path}&#39;);<br>            return options;<br>          }).whenComplete(() =&gt; dio.unlock()); &#47;&#47; unlock the dio<br>        }<br>        return options;<br>      }<br>  ));</div>
  <div class="_10o3OAxT_0">
    <p class="_3KxQPN3V_0">ä½œè€…å›å¤: å‰å®³ğŸ‘</p>
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2019-10-09 18:22:20</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83epxMjZcn8LFy6PIT7uGzUOHTCZosTwh39jBKlyW3Ffzyscm14PQGh3QZ1GrEGF4UWxwKZrAib8AXCA/132"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>æ±Ÿå®å½­äºæ™</span>
  </div>
  <div class="_2_QraFYR_0">åˆ†äº«ä¸€ä¸ªjsonè½¬dartç±»çš„å·¥å…·ï¼Œç†è§£äº†åŸç†åï¼Œå®é™…é¡¹ç›®ä¸­å¯ä»¥çœä¸å°‘æ—¶é—´https:&#47;&#47;javiercbk.github.io&#47;json_to_dart&#47;</div>
  <div class="_10o3OAxT_0">
    <p class="_3KxQPN3V_0">ä½œè€…å›å¤: èµğŸ‘</p>
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2019-09-11 10:12:35</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/12/04/37/aa04f997.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>å’Œå°èƒ–</span>
  </div>
  <div class="_2_QraFYR_0">ç¬¬äºŒé“é¢˜è§£å†³æ–¹æ³•ï¼š<br><br>class Student {<br>  String id;<br>  String name;<br>  int score;<br>  List&lt;Teacher&gt; teachers;<br><br>  Student({this.id, this.name, this.score, this.teachers});<br><br>  factory Student.fromJson(Map&lt;String, dynamic&gt; parsedJson) {<br>    return Student(<br>        id: parsedJson[&#39;id&#39;],<br>        name: parsedJson[&#39;name&#39;],<br>        score: parsedJson[&#39;score&#39;],<br>        teachers: getTeacher(parsedJson[&#39;teachers&#39;]));<br>  }<br><br>  static List&lt;Teacher&gt; getTeacher(dynamic list) {<br>    List&lt;Teacher&gt; teachers = new List();<br>    list.forEach((f) {<br>      teachers.add(Teacher.fromJson(f));<br>    });<br>    return teachers;<br>  }<br>}<br><br>class Teacher {<br>  String name;<br>  int age;<br><br>  Teacher({this.age, this.name});<br><br>  factory Teacher.fromJson(Map&lt;String, dynamic&gt; parsedJson) {<br>    return Teacher(name: parsedJson[&#39;name&#39;], age: parsedJson[&#39;age&#39;]);<br>  }<br>}</div>
  <div class="_10o3OAxT_0">
    <p class="_3KxQPN3V_0">ä½œè€…å›å¤: ğŸ‘å‰å®³</p>
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2019-10-09 18:42:56</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/16/4f/c1/7f596aba.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>ç»™æˆ‘ç‚¹é˜³å…‰å°±ç¿çƒ‚</span>
  </div>
  <div class="_2_QraFYR_0">å¦‚ä½•è¿›è¡Œsocketé€šä¿¡</div>
  <div class="_10o3OAxT_0">
    <p class="_3KxQPN3V_0">ä½œè€…å›å¤: å¯ä»¥å‚è€ƒcnDartç¤¾åŒºçš„æ–‡ç« ï¼šhttp:&#47;&#47;www.cndartlang.com&#47;841.html</p>
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2019-08-22 10:32:45</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src=""
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>Geek_0793f1</span>
  </div>
  <div class="_2_QraFYR_0">ä½¿ç”¨è¿™ç§æ–¹å¼ï¼Œæˆ‘ä»¬éœ€è¦å…ˆå°† JSON å­—ç¬¦ä¸²ä¼ é€’ç»™ JSON.decode æ–¹æ³•è§£ææˆä¸€ä¸ª Mapï¼Œç„¶åæŠŠè¿™ä¸ª Map ä¼ ç»™è‡ªå®šä¹‰çš„ç±»ï¼Œè¿›è¡Œç›¸å…³å±æ€§çš„èµ‹å€¼ã€‚<br><br>å‰ç«¯ä¸€èˆ¬æŠŠjsonå­—ç¬¦ä¸²è§£ææˆmapä¹‹åï¼Œå°±ç›´æ¥ç”¨è¿™ä¸ªmapè¿›è¡Œç›¸å…³çš„å±æ€§èµ‹å€¼äº†ï¼Œè€å¸ˆèƒ½è§£é‡Šä¸€ä¸‹ï¼Œä¼ ç»™è‡ªå®šä¹‰ç±»çš„åšæ³•çš„å¥½å¤„å—ï¼Ÿ</div>
  <div class="_10o3OAxT_0">
    <p class="_3KxQPN3V_0">ä½œè€…å›å¤: ä»¥å¯¹è±¡çš„æ–¹å¼æ‰¿æ¥æœåŠ¡ç«¯è¿”å›çš„JSONå­—å…¸ï¼Œä¸ä»…æ›´ç›´è§‚ï¼Œä¹Ÿé¿å…äº†ä¸€äº›å› ä¸ºkeyå†™é”™å‡ºç°çš„ä»£ç é”™è¯¯ã€‚jsçš„ç±»å‹ç³»ç»Ÿæ¯”è¾ƒæ··ä¹±ï¼Œobjectå’Œå­—å…¸æ˜¯å¯ä»¥æ··ç”¨çš„ï¼Œæ¯”å¦‚ä¸‹é¢è¿™æ®µä»£ç ï¼š<br>var x = {&#39;number&#39;:123,&#39;title&#39;:&#39;title&#39;};<br>x.numberå’Œx[&#39;number&#39;]æ˜¯ç­‰ä»·çš„ï¼Œæ‰€ä»¥è¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆå‰ç«¯åŒå­¦ç›´æ¥æ‹¿å­—å…¸å°±å¯ä»¥å½“å¯¹è±¡ç”¨äº†ã€‚<br>è€ŒDartæ˜¯å¼ºç±»å‹è¯­è¨€ï¼Œå­—å…¸é‡Œçš„é”®å€¼å¯¹å’Œå¯¹è±¡çš„å±æ€§æ˜¯ä¸èƒ½æ··ç”¨çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å®šä¹‰ä¸€å±‚æ˜ å°„å…³ç³»ã€‚</p>
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2019-09-02 17:21:37</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/0f/5a/75/4e0d7419.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>é£“é£</span>
  </div>
  <div class="_2_QraFYR_0">https:&#47;&#47;github.com&#47;trevorwang&#47;retrofit.dart&#47;  <br>è¿™ä¸ªåº“é…åˆdioï¼Œç½‘ç»œè¯·æ±‚è½¬æ¢è¿™ä¸€æ­¥æˆ‘è§‰å¾—æ›´ç®€å•ç‚¹ï¼Ÿ</div>
  <div class="_10o3OAxT_0">
    
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2020-07-21 14:00:58</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/12/12/3c/2e7fd24f.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>Geek_0d3a08</span>
  </div>
  <div class="_2_QraFYR_0">é‡å®šå‘ç›‘å¬æœ‰å—ï¼Ÿ</div>
  <div class="_10o3OAxT_0">
    <p class="_3KxQPN3V_0">ä½œè€…å›å¤: Dioé»˜è®¤ä¼šè‡ªåŠ¨å¸®ä½ é‡å®šå‘ï¼Œä½ å¯ä»¥åœ¨optionså‚æ•°é‡Œé¢æŠŠfollowRedirectsç½®ä¸ºfalseï¼Œè‡ªå·±åœ¨æ‹¦æˆªå™¨ä¸­å¤„ç†é‡å®šå‘</p>
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2019-08-29 21:04:48</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/10/31/5e/d7cdc1d6.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>æ±Ÿåšå®</span>
  </div>
  <div class="_2_QraFYR_0">è€å¸ˆèƒ½ä¸èƒ½ä»‹ç»ä¸€ä¸‹ååºåˆ—åŒ–å·¥å…·ï¼Œæ¯”å¦‚json_serializableå’Œ built_valueï¼Œå»ºè®®ç”¨å“ªä¸€ä¸ªï¼Œå¦‚æœé‡åˆ°æ³›å‹ï¼Œè¯¥å¦‚ä½•å¤„ç†</div>
  <div class="_10o3OAxT_0">
    <p class="_3KxQPN3V_0">ä½œè€…å›å¤: å…¶å®æˆ‘è§‰å¾—Dartæä¾›çš„JSONè‡ªåŠ¨åºåˆ—åŒ–æ–¹æ¡ˆå¹¶ä¸å¥½ç”¨ï¼Œæ‰€ä»¥æˆ‘è¿˜æ˜¯æ¨èæ‰‹åŠ¨è§£æï¼Œå¯¹äºæ³›å‹ï¼Œç›´æ¥åœ¨è¿è¡Œæ˜¯åˆ¤æ–­ç±»å‹ï¼Œèµ°å¯¹åº”çš„è§£ææ–¹æ³•å°±å¯ä»¥äº†ã€‚<br>çœ‹ä½ çš„ä½¿ç”¨åœºæ™¯ï¼Œä¸€èˆ¬è€Œè¨€ï¼Œjson_serializableæ˜“ç”¨æ€§ä¸Šæ¯”built_valueä¼šæ›´å¥½ä¸€äº›ã€‚</p>
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2019-08-22 10:27:43</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/11/d6/7d/4b09b0bf.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>æé‘«é‘«</span>
  </div>
  <div class="_2_QraFYR_0">å¸¦æœ‰æ³›å‹ çš„bean è¿™ä¹ˆè½¬json????</div>
  <div class="_10o3OAxT_0">
    
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2022-02-26 17:48:27</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/26/2a/7e/6d2e703b.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>å°ä½•</span>
  </div>
  <div class="_2_QraFYR_0">è€å¸ˆå¥½ï¼Œé—®ä¸€ä¸ªé—®é¢˜ï¼Œflutteræ€ä¹ˆåšå›è°ƒå•Šï¼Œæˆ‘æƒ³å°è£…ä¸€ä¸ªå·¥å…·ç±»ï¼Œç½‘ç»œè¯·æ±‚çš„æ—¶å€™ä¼ å…¥callbackï¼Œç„¶åæˆåŠŸå°±è°ƒç”¨callback.onSuccess(t),å¤±è´¥å°±è°ƒç”¨callback.onFailed(t)</div>
  <div class="_10o3OAxT_0">
    
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2021-07-30 16:23:47</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/26/2a/7e/6d2e703b.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>å°ä½•</span>
  </div>
  <div class="_2_QraFYR_0">è€å¸ˆå¥½ï¼Œcomputeå’ŒFutureåŒºåˆ«æ˜¯ä»€ä¹ˆå•Šï¼Œ ä¸æ˜¯ç”¨Futureä¹Ÿå¯ä»¥å®ç°å¼‚æ­¥å˜›</div>
  <div class="_10o3OAxT_0">
    
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2021-07-21 18:09:08</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTIFgmmBXRltzZDa6lvibrCouDvOQYkfT2tJibZ97tJvNhGdfibntJdwmQ4BSzqr4bRB4m2SFxyAHBPsQ/132"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>ä»»é€é¥</span>
  </div>
  <div class="_2_QraFYR_0">æœ€è¿‘é‡åˆ°ä¸€ä¸ªé—®é¢˜ï¼Œé—®ä¸€ä¸‹è€å¸ˆæœåŠ¡å™¨æ›´æ–°SSLè¯ä¹¦æ—¶ä½¿ç”¨äº†pemæ ¼å¼ï¼Œå‘ç°å®‰å“ç«¯è¯·æ±‚å¤±è´¥ï¼ŒiOSç«¯æ­£å¸¸ï¼Œflutteråº”è¯¥å¦‚ä½•å…¼å®¹pemè¯ä¹¦å‘¢</div>
  <div class="_10o3OAxT_0">
    
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2021-07-12 12:01:57</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/12/65/e8/d1e52dbb.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>IF-Processing</span>
  </div>
  <div class="_2_QraFYR_0">è¯·é—®ï¼Œflutterå¯¹äºç½‘ç»œæœåŠ¡ï¼ˆæ¯”å¦‚Sambaï¼ŒNFSå…±äº«ï¼‰çš„è®¿é—®æœ‰æ”¯æŒå—ï¼Ÿ</div>
  <div class="_10o3OAxT_0">
    
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2020-02-07 10:34:04</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/15/2c/2c/77f80dfc.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>å®‰å—å¯¸æš–ğŸ¤•</span>
  </div>
  <div class="_2_QraFYR_0">json_model æ€ä¹ˆç”Ÿæˆçº¯æ•°ç»„çš„è§£æä»£ç ï¼Ÿ</div>
  <div class="_10o3OAxT_0">
    <p class="_3KxQPN3V_0">ä½œè€…å›å¤: å‚è€ƒå®˜æ–¹æ–‡æ¡£å§https:&#47;&#47;github.com&#47;flutterchina&#47;json_model</p>
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2019-11-07 14:14:04</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/12/3c/88/6bef27d6.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>å¤§ç¥åšå£«</span>
  </div>
  <div class="_2_QraFYR_0">æƒ³é—®ä¸‹ Flutter ä¸­ JSONP çš„è¯·æ±‚æ€ä¹ˆå¤„ç†</div>
  <div class="_10o3OAxT_0">
    <p class="_3KxQPN3V_0">ä½œè€…å›å¤: 1.ç›´æ¥å‘urlè¯·æ±‚å°±å¯ä»¥äº†ã€æŠŠæœåŠ¡ç«¯è¿”å›çš„æ•°æ®å½“ä½œå­—ç¬¦ä¸²ç®€å•å¤„ç†ä¸‹ï¼ŒæŠŠå®ƒè½¬æˆjsonæ ¼å¼<br>2.flutterä¸éœ€è¦å¤„ç†è·¨åŸŸé—®é¢˜ï¼Œä¸å»ºè®®ç”¨jsonpè¿™ç§å¥‡æ€ªçš„æ ¼å¼</p>
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2019-09-21 21:34:53</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/16/f2/1e/679789f7.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>ç±³ç±³å‘€ğŸ‘§</span>
  </div>
  <div class="_2_QraFYR_0">import &#39;dart:convert&#39;;<br><br>import &#39;package:flutter&#47;material.dart&#39;;<br>import &#39;package:http&#47;http.dart&#39; as http;<br>[...]<br>  loadData() async {<br>    String dataURL = &quot;https:&#47;&#47;jsonplaceholder.typicode.com&#47;posts&quot;;<br>    http.Response response = await http.get(dataURL);<br>    setState(() {<br>      widgets = JSON.decode(response.body);<br>    });<br>  }<br>}<br><br>å®˜ç½‘Demoé‡Œé¢æ˜¯ç”¨çš„è¿™ä¸ªï¼Œè·ŸHttpClientæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿæˆ‘è¯¥ç”¨å“ªä¸ªï¼Ÿ</div>
  <div class="_10o3OAxT_0">
    <p class="_3KxQPN3V_0">ä½œè€…å›å¤: è¿™ä¸ªå°±æ˜¯ä»Šå¤©åˆ†äº«è¯´çš„httpåŒ…å•Š</p>
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2019-09-10 16:51:20</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLFbNiaADSSo6SQhsoDRX95ey8zngVaj2fHqaVc6JAd1uXJFAle1sl4SaicicpSzcKwa4JjLvkpKItZQ/132"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>Geek_joestar</span>
  </div>
  <div class="_2_QraFYR_0">static List&lt;Teacher&gt; fromJsonList(List&lt;dynamic&gt; listJson){<br>    var list = List&lt;Teacher&gt;();<br>    for(Map&lt;String, dynamic&gt; parsedJson in listJson) {<br>      list.add(Teacher.fromJson(parsedJson));<br>    }<br>    return list;<br>  }</div>
  <div class="_10o3OAxT_0">
    <p class="_3KxQPN3V_0">ä½œè€…å›å¤: èµ</p>
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2019-09-08 13:17:22</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/18/67/d1/1c69ad22.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>C</span>
  </div>
  <div class="_2_QraFYR_0">class Teacher {<br>  String name;<br>  int age;<br><br>  Teacher({this.name, this.age});<br><br>  factory Teacher.fromJson(Map&lt;String, dynamic&gt; parsedJson) {<br>    return Teacher(<br>      name: parsedJson[&#39;name&#39;],<br>      age: parsedJson[&#39;age&#39;],<br>    );<br>  }<br><br>  static List&lt;Teacher&gt; parseTeachers(List&lt;dynamic&gt; mapList) {<br>    List&lt;Teacher&gt; teachers = List&lt;Teacher&gt;();<br>    for(Map&lt;String, dynamic&gt; map in mapList) {<br>      teachers.add(Teacher.fromJson(map));<br>    }<br>    return teachers;<br>  }<br>}<br><br>class Student {<br>  String id;<br>  String name;<br>  int score;<br>  List&lt;Teacher&gt; teachers;<br><br>  Student({this.id, this.name, this.score, this.teachers});<br><br>  factory Student.fromJson(Map&lt;String, dynamic&gt; parsedJson) {<br>    return Student(<br>      id: parsedJson[&#39;id&#39;],<br>      name: parsedJson[&#39;name&#39;],<br>      score: parsedJson[&#39;score&#39;],<br>      teachers: Teacher.parseTeachers(parsedJson[&#39;teachers&#39;]),<br>    );<br>  }<br>}</div>
  <div class="_10o3OAxT_0">
    <p class="_3KxQPN3V_0">ä½œè€…å›å¤: å¾ˆèµğŸ‘</p>
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2019-09-06 14:52:04</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/0f/8b/c3/bf56f46c.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>å¤§å’Œ</span>
  </div>
  <div class="_2_QraFYR_0">dio.interceptors.add(InterceptorsWrapper(<br>        onRequest: (RequestOptions options) async {<br>          if (options.headers[&quot;token&quot;] == null) {<br>            try {<br>              var token = await new Dio().get(&quot;https:&#47;&#47;xxx.com&#47;token&quot;);<br>              options.headers[&quot;token&quot;] = token;<br>            }catch(e) {<br>              return dio.reject(&quot;Error: è¯·å…ˆç™»å½•...&quot;);<br>            }<br>          }<br>          return options;<br>        }<br>    ));</div>
  <div class="_10o3OAxT_0">
    <p class="_3KxQPN3V_0">ä½œè€…å›å¤: æ€è·¯æ˜¯å¯¹çš„ï¼Œæœ‰ä¸€ä¸ªå°ç‚¹å¯ä»¥æ”¹è¿›ï¼šå¦‚æœæ­¤åˆ»æœ‰å¤šä¸ªrequeståŒæ—¶å‘å‡ºï¼Œtokenä¼šè¯·æ±‚å¤šæ¬¡ã€‚</p>
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2019-09-04 16:01:53</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/oawDPl6RMSNz5Br5hLUBZzdicRPshXVJyTe2runPeBiby76BqRa8ibs99xxZ7EcBnkLeRPvt4gSGfqEibz1bpzWuoA/132"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>å®ç¼º</span>
  </div>
  <div class="_2_QraFYR_0">è¯·é—®è€å¤§ï¼Œè¯¾åä½œä¸šçš„ç­”æ¡ˆå•¥æ—¶å€™ç»™å‚è€ƒä¸€ä¸‹</div>
  <div class="_10o3OAxT_0">
    <p class="_3KxQPN3V_0">ä½œè€…å›å¤: ä¼šè€ƒè™‘ä¸“é—¨å‡ºä¸€èŠ‚è®²è¯¾åé¢˜çš„è§£å†³æ€è·¯</p>
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2019-09-03 11:40:07</div>
  </div>
</div>
</div>
</li>
</ul>