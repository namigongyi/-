<audio title="07ï½œå…¨å±€çŠ¶æ€ç®¡ç†ï¼šå¦‚ä½•åœ¨å‡½æ•°ç»„ä»¶ä¸­ä½¿ç”¨Reduxï¼Ÿ" src="https://static001.geekbang.org/resource/audio/b9/40/b91b77776720f3d43f2b538014883140.mp3" controls="controls"></audio> 
<p>ä½ å¥½ï¼Œæˆ‘æ˜¯ç‹æ²›ã€‚ä»Šå¤©æˆ‘ä»¬æ¥èŠèŠæ€ä¹ˆåœ¨å‡½æ•°ç»„ä»¶ä¸­ä½¿ç”¨Reduxã€‚</p><p>Redux ä½œä¸ºä¸€æ¬¾çŠ¶æ€ç®¡ç†æ¡†æ¶å•Šï¼Œæ˜¯å…¬è®¤çš„React å¼€å‘ä¸­æœ€å¤§çš„ä¸€ä¸ªé—¨æ§›ï¼Œä½†åŒæ—¶å‘¢ï¼Œå®ƒä¹Ÿæ˜¯ React å¼€å‘äººå‘˜å¿…é¡»æŒæ¡çš„ä¸€é¡¹æŠ€èƒ½ã€‚å› ä¸ºåªæœ‰ç†Ÿç»ƒåº”ç”¨ Reduxï¼Œä½ æ‰èƒ½æ›´åŠ çµæ´»åœ°ä½¿ç”¨ Reactï¼Œæ¥ä»å®¹åº”å¯¹å¤§å‹é¡¹ç›®çš„å¼€å‘éš¾é¢˜ã€‚</p><p>è¿™é‡Œæˆ‘è¦è¯´å¥é¢˜å¤–è¯ã€‚Reduxè¯ç”Ÿäº 2015 å¹´ï¼Œä¹Ÿå°±æ˜¯React å‡ºç°ä¹‹åä¸€å¹´å¤šã€‚è™½ç„¶ä¸€å¼€å§‹æ˜¯ç”±ç¬¬ä¸‰æ–¹å¼€å‘è€…å¼€æºï¼Œä¸æ˜¯ Facebook å®˜æ–¹ï¼Œä½†æ˜¯ä¹Ÿè¿…é€Ÿæˆä¸ºäº†æœ€ä¸ºä¸»æµçš„ React çŠ¶æ€ç®¡ç†åº“ã€‚è€Œä¸”ï¼Œä¹‹å Redux è·Ÿå®ƒçš„å¼€å‘è€… Dan Abbramov å’Œ Andrew Clark ä¸€èµ·ï¼Œéƒ½è¢« Facebook æ”¶ç¼–ï¼Œæˆä¸º React å®˜æ–¹ç”Ÿæ€çš„ä¸€éƒ¨åˆ†ã€‚ä¾§é¢å¯ä»¥çœ‹åˆ° Redux åœ¨React ä¸­çš„é‡è¦ä½œç”¨ã€‚</p><p>éœ€è¦è¯´æ˜çš„æ˜¯ï¼ŒRedux ä½œä¸ºä¸€å¥—ç‹¬ç«‹çš„æ¡†æ¶ï¼Œè™½ç„¶å¯ä»¥å’Œä»»ä½• UI æ¡†æ¶ç»“åˆèµ·æ¥ä½¿ç”¨ã€‚ä½†æ˜¯å› ä¸ºå®ƒåŸºäºä¸å¯å˜æ•°æ®çš„æœºåˆ¶ï¼Œå¯ä»¥è¯´ï¼ŒåŸºæœ¬ä¸Šå°±æ˜¯ä¸º React é‡èº«å®šåˆ¶çš„ã€‚</p><p>ä¸è¿‡ä½ å¯èƒ½ä¼šè¯´ï¼ŒRedux ä¸Šæ‰‹æ¯”è¾ƒéš¾ï¼Œè¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿçš„ç¡®æ˜¯è¿™æ ·ï¼Œå› Reduxå¼•å…¥äº†ä¸€äº›æ–°çš„ç¼–ç¨‹æ€æƒ³ï¼Œè¿˜æœ‰æ¯”è¾ƒç¹ççš„æ ·æ¿ä»£ç ï¼Œç¡®å®å¸¦æ¥äº†ä¸€å®šçš„ä¸Šæ‰‹éš¾åº¦ã€‚</p><p>ä½†æ˜¯ä½ ä¸è¦æ‹…å¿ƒï¼Œä»Šå¤©è¿™èŠ‚è¯¾ï¼Œæˆ‘ä¼šé€šè¿‡å…·ä½“çš„ä¾‹å­å¸¦ä½ ä¸Šæ‰‹Reduxã€‚è€Œä¸”æˆ‘ä¼šè®²è§£ Redux è¦è§£å†³ä»€ä¹ˆé—®é¢˜ï¼Œå¼•å…¥äº†ä»€ä¹ˆæ ·çš„æ–°æ¦‚å¿µï¼Œäº‰å–èƒ½ä»æœ¬è´¨ä¸Šå»ç†è§£ Redux çš„ç†å¿µå’Œä½¿ç”¨æ–¹æ³•ï¼Œæé«˜ä½ ä¸¾ä¸€åä¸‰çš„èƒ½åŠ›ã€‚</p><!-- [[[read_end]]] --><h1>Redux å‡ºç°çš„èƒŒæ™¯</h1><p>å¾ˆå¤šåŒå­¦ä¸€å¼€å§‹å¯èƒ½ä¸å¤ªæ˜ç™½çŠ¶æ€ç®¡ç†æ¡†æ¶çš„ä½œç”¨ã€‚ä½†æ˜¯å¦‚æœéšç€å¯¹ React ä½¿ç”¨çš„æ·±å…¥ï¼Œä½ ä¼šå‘ç°ç»„ä»¶çº§åˆ«çš„ stateï¼Œå’Œä»ä¸Šè€Œä¸‹ä¼ é€’çš„ props è¿™ä¸¤ä¸ªçŠ¶æ€æœºåˆ¶ï¼Œæ— æ³•æ»¡è¶³å¤æ‚åŠŸèƒ½çš„éœ€è¦ã€‚ä¾‹å¦‚è·¨å±‚çº§ä¹‹é—´çš„ç»„ä»¶çš„æ•°æ®å…±äº«å’Œä¼ é€’ã€‚æˆ‘ä»¬å¯ä»¥ä»ä¸‹å›¾çš„å¯¹æ¯”å»ç†è§£ï¼š</p><p><img src="https://static001.geekbang.org/resource/image/f3/46/f3ba61ff5de2c3c6fbd658a22c00bf46.png?wh=2640*1100" alt=""></p><p>å…¶ä¸­å·¦å›¾æ˜¯å•ä¸ª React ç»„ä»¶ï¼Œå®ƒçš„çŠ¶æ€å¯ä»¥ç”¨å†…éƒ¨çš„ state æ¥ç»´æŠ¤ï¼Œè€Œä¸”è¿™ä¸ª state åœ¨ç»„ä»¶å¤–éƒ¨æ˜¯æ— æ³•è®¿é—®çš„ã€‚è€Œå³å›¾åˆ™æ˜¯ä½¿ç”¨ Redux çš„åœºæ™¯ï¼Œç”¨å…¨å±€å”¯ä¸€çš„ Store ç»´æŠ¤äº†æ•´ä¸ªåº”ç”¨ç¨‹åºçš„çŠ¶æ€ã€‚å¯ä»¥è¯´ï¼Œå¯¹äºé¡µé¢çš„å¤šä¸ªç»„ä»¶ï¼Œéƒ½æ˜¯ä»è¿™ä¸ª Store æ¥è·å–çŠ¶æ€çš„ï¼Œä¿è¯ç»„ä»¶ä¹‹é—´èƒ½å¤Ÿå…±äº«çŠ¶æ€ã€‚</p><p>æ‰€ä»¥ä»è¿™å¼ å¯¹æ¯”å›¾ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ° Redux Store çš„ä¸¤ä¸ªç‰¹ç‚¹ï¼š</p><ol>
<li><strong>Redux Store æ˜¯å…¨å±€å”¯ä¸€çš„</strong>ã€‚å³æ•´ä¸ªåº”ç”¨ç¨‹åºä¸€èˆ¬åªæœ‰ä¸€ä¸ª Storeã€‚</li>
<li><strong>Redux Store æ˜¯æ ‘çŠ¶ç»“æ„</strong>ï¼Œå¯ä»¥æ›´å¤©ç„¶åœ°æ˜ å°„åˆ°ç»„ä»¶æ ‘çš„ç»“æ„ï¼Œè™½ç„¶ä¸æ˜¯å¿…é¡»çš„ã€‚</li>
</ol><p>æˆ‘ä»¬é€šè¿‡æŠŠçŠ¶æ€æ”¾åœ¨ç»„ä»¶ä¹‹å¤–ï¼Œå°±å¯ä»¥è®© React ç»„ä»¶æˆä¸ºæ›´åŠ çº¯ç²¹çš„è¡¨ç°å±‚ï¼Œé‚£ä¹ˆå¾ˆå¤šå¯¹äºä¸šåŠ¡æ•°æ®å’ŒçŠ¶æ€æ•°æ®çš„ç®¡ç†ï¼Œå°±éƒ½å¯ä»¥åœ¨ç»„ä»¶ä¹‹å¤–å»å®Œæˆï¼ˆåé¢è¯¾ç¨‹ä¼šä»‹ç»çš„ Reducer å’Œ Actionï¼‰ã€‚åŒæ—¶è¿™ä¹Ÿå¤©ç„¶æä¾›äº†çŠ¶æ€å…±äº«çš„èƒ½åŠ›ï¼Œæœ‰ä¸¤ä¸ªåœºæ™¯å¯ä»¥å…¸å‹åœ°ä½“ç°å‡ºè¿™ä¸€ç‚¹ã€‚</p><ol>
<li>è·¨ç»„ä»¶çš„çŠ¶æ€å…±äº«ï¼šå½“æŸä¸ªç»„ä»¶å‘èµ·ä¸€ä¸ªè¯·æ±‚æ—¶ï¼Œå°†æŸä¸ª Loading çš„æ•°æ®çŠ¶æ€è®¾ä¸º Trueï¼Œå¦ä¸€ä¸ªå…¨å±€çŠ¶æ€ç»„ä»¶åˆ™æ˜¾ç¤º Loading çš„çŠ¶æ€ã€‚</li>
<li>åŒç»„ä»¶å¤šä¸ªå®ä¾‹çš„çŠ¶æ€å…±äº«ï¼šæŸä¸ªé¡µé¢ç»„ä»¶åˆæ¬¡åŠ è½½æ—¶ï¼Œä¼šå‘é€è¯·æ±‚æ‹¿å›äº†ä¸€ä¸ªæ•°æ®ï¼Œåˆ‡æ¢åˆ°å¦å¤–ä¸€ä¸ªé¡µé¢ååˆè¿”å›ã€‚è¿™æ—¶æ•°æ®å·²ç»å­˜åœ¨ï¼Œæ— éœ€é‡æ–°åŠ è½½ã€‚è®¾æƒ³å¦‚æœæ˜¯æœ¬åœ°çš„ç»„ä»¶ stateï¼Œé‚£ä¹ˆç»„ä»¶é”€æ¯åé‡æ–°åˆ›å»ºï¼Œstate ä¹Ÿä¼šè¢«é‡ç½®ï¼Œå°±è¿˜éœ€è¦é‡æ–°è·å–æ•°æ®ã€‚</li>
</ol><p>å› æ­¤ï¼Œå­¦ä¼š Redux ï¼Œæ‰èƒ½çœŸæ­£ç”¨ React å»çµæ´»è§£å†³é—®é¢˜ã€‚ä¸‹é¢æˆ‘ä»¬å°±æ¥äº†è§£ä¸‹ Redux ä¸­çš„ä¸€äº›åŸºæœ¬æ¦‚å¿µã€‚</p><h1>ç†è§£ Redux çš„ä¸‰ä¸ªåŸºæœ¬æ¦‚å¿µ</h1><p>Redux å¼•å…¥çš„æ¦‚å¿µå…¶å®å¹¶ä¸å¤šï¼Œä¸»è¦å°±æ˜¯ä¸‰ä¸ªï¼šStateã€Action å’Œ Reducerã€‚</p><ul>
<li>å…¶ä¸­ State å³ Storeï¼Œä¸€èˆ¬å°±æ˜¯ä¸€ä¸ªçº¯ JavaScript Objectã€‚</li>
<li>Action ä¹Ÿæ˜¯ä¸€ä¸ª Objectï¼Œç”¨äºæè¿°å‘ç”Ÿçš„åŠ¨ä½œã€‚</li>
<li>è€Œ Reducer åˆ™æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œæ¥æ”¶ Action å’Œ State å¹¶ä½œä¸ºå‚æ•°ï¼Œé€šè¿‡è®¡ç®—å¾—åˆ°æ–°çš„ Storeã€‚</li>
</ul><p>å®ƒä»¬ä¸‰è€…ä¹‹é—´çš„å…³ç³»å¯ä»¥ç”¨ä¸‹å›¾æ¥è¡¨ç¤ºï¼š<br>
<img src="https://static001.geekbang.org/resource/image/91/2c/9193e33b6d1715b845e1ed01cc348d2c.png?wh=932*354" alt=""></p><p>åœ¨ Redux ä¸­ï¼Œæ‰€æœ‰å¯¹äº Store çš„ä¿®æ”¹éƒ½å¿…é¡»é€šè¿‡è¿™æ ·ä¸€ä¸ªå…¬å¼å»å®Œæˆï¼Œå³é€šè¿‡ Reducer å®Œæˆï¼Œè€Œä¸æ˜¯ç›´æ¥ä¿®æ”¹ Storeã€‚è¿™æ ·çš„è¯ï¼Œä¸€æ–¹é¢å¯ä»¥ä¿è¯æ•°æ®çš„ä¸å¯å˜æ€§ï¼ˆImmutableï¼‰ï¼ŒåŒæ—¶ä¹Ÿèƒ½å¸¦æ¥ä¸¤ä¸ªéå¸¸å¤§çš„å¥½å¤„ã€‚</p><ol>
<li>å¯é¢„æµ‹æ€§ï¼ˆPredictableï¼‰ï¼šå³ç»™å®šä¸€ä¸ªåˆå§‹çŠ¶æ€å’Œä¸€ç³»åˆ—çš„ Actionï¼Œä¸€å®šèƒ½å¾—åˆ°ä¸€è‡´çš„ç»“æœï¼ŒåŒæ—¶è¿™ä¹Ÿè®©ä»£ç æ›´å®¹æ˜“æµ‹è¯•ã€‚</li>
<li>æ˜“äºè°ƒè¯•ï¼šå¯ä»¥è·Ÿè¸ª Store ä¸­æ•°æ®çš„å˜åŒ–ï¼Œç”šè‡³æš‚åœå’Œå›æ”¾ã€‚å› ä¸ºæ¯æ¬¡ Action äº§ç”Ÿçš„å˜åŒ–éƒ½ä¼šäº§ç”Ÿæ–°çš„å¯¹è±¡ï¼Œè€Œæˆ‘ä»¬å¯ä»¥ç¼“å­˜è¿™äº›å¯¹è±¡ç”¨äºè°ƒè¯•ã€‚Redux çš„åŸºäºæµè§ˆå™¨æ’ä»¶çš„å¼€å‘å·¥å…·å°±æ˜¯åŸºäºè¿™ä¸ªæœºåˆ¶ï¼Œéå¸¸æœ‰åˆ©äºè°ƒè¯•ã€‚</li>
</ol><p>è¿™ä¹ˆæŠ½è±¡çš„è§£é‡Šï¼Œä½ å¯èƒ½ä¸å¥½ç†è§£ï¼Œåˆ«ç€æ€¥ï¼Œæˆ‘ç»™ä½ ä¸¾ä¸ªä¾‹å­ï¼Œæ¥å¸®åŠ©ä½ ç†è§£è¿™å‡ ä¸ªæ¦‚å¿µã€‚è¿™ä¸ªä¾‹å­æ˜¯å¼€å‘ä¸€ä¸ªè®¡æ•°å™¨çš„é€»è¾‘ã€‚æ¯”å¦‚è¯´è¦å®ç°â€œåŠ ä¸€â€å’Œâ€œå‡ä¸€â€è¿™ä¸¤ä¸ªåŠŸèƒ½ï¼Œå¯¹äº Redux æ¥è¯´ï¼Œæˆ‘ä»¬éœ€è¦å¦‚ä¸‹ä»£ç ï¼š</p><pre><code>import { createStore } from 'redux'

// å®šä¹‰ Store çš„åˆå§‹å€¼
const initialState = { value: 0 }

// Reducerï¼Œå¤„ç† Action è¿”å›æ–°çš„ State
function counterReducer(state = initialState, action) {
  switch (action.type) {
    case 'counter/incremented':
      return { value: state.value + 1 }
    case 'counter/decremented':
      return { value: state.value - 1 }
    default:
      return state
  }
}

// åˆ©ç”¨ Redux API åˆ›å»ºä¸€ä¸ª Storeï¼Œå‚æ•°å°±æ˜¯ Reducer
const store = createStore(counterReducer)

// Store æä¾›äº† subscribe ç”¨äºç›‘å¬æ•°æ®å˜åŒ–
store.subscribe(() =&gt; console.log(store.getState()))

// è®¡æ•°å™¨åŠ  1ï¼Œç”¨ Store çš„ dispatch æ–¹æ³•åˆ†å‘ä¸€ä¸ª Actionï¼Œç”± Reducer å¤„ç†
const incrementAction = { type: 'counter/incremented' };
store.dispatch(incrementAction);
// ç›‘å¬å‡½æ•°è¾“å‡ºï¼š{value: 1}

// è®¡æ•°å™¨å‡ 1
const decrementAction = { type: 'counter/decremented' };
store.dispatch(decrementAction)
// ç›‘å¬å‡½æ•°è¾“å‡ºï¼š{value: 0}
</code></pre><p>é€šè¿‡è¿™æ®µä»£ç ï¼Œæˆ‘ä»¬å°±ç”¨ä¸‰ä¸ªæ­¥éª¤å®Œæˆäº†ä¸€ä¸ªå®Œæ•´çš„ Redux çš„é€»è¾‘ï¼š</p><ol>
<li>å…ˆåˆ›å»º Storeï¼›</li>
<li>å†åˆ©ç”¨ Action å’Œ Reducer ä¿®æ”¹ Storeï¼›</li>
<li>æœ€ååˆ©ç”¨ subscribe ç›‘å¬ Store çš„å˜åŒ–ã€‚</li>
</ol><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨ Reducer ä¸­ï¼Œæˆ‘ä»¬æ¯æ¬¡éƒ½å¿…é¡»è¿”å›ä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼Œç¡®ä¿ä¸å¯å˜æ•°æ®ï¼ˆImmutableï¼‰çš„åŸåˆ™ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å»¶å±•æ“ä½œç¬¦ï¼ˆSpread Operatorï¼‰æ¥ç®€å•åœ°å®ç°ä¸å¯å˜æ•°æ®çš„æ“ä½œï¼Œä¾‹å¦‚ï¼š</p><pre><code>return {
  ...state, // å¤åˆ¶åŸæœ‰çš„æ•°æ®ç»“æ„
  value: state.value + 1, // å˜åŒ– value å€¼ä½¿å…¶ + 1
}
</code></pre><p>è¿™åœ¨å¤§å¤šæ•°åœºæ™¯ä¸‹å·²ç»è¶³å¤Ÿä½¿ç”¨ã€‚å½“ç„¶å¯¹äºå¤æ‚çš„æ•°æ®ç»“æ„ï¼Œä¹Ÿæœ‰ä¸€äº›ç¬¬ä¸‰æ–¹çš„åº“å¯ä»¥å¸®åŠ©æ“ä½œä¸å¯å˜æ•°æ®ï¼Œæ¯”å¦‚ Immutableã€Immer ç­‰ç­‰ã€‚</p><p>é€šè¿‡è¿™ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬çœ‹åˆ°äº†çº¯ Redux ä½¿ç”¨çš„åœºæ™¯ï¼Œä»è€Œæ›´åŠ æ¸…æ¥šåœ°çœ‹åˆ°äº† Storeã€Action å’Œ Reducer è¿™ä¸‰ä¸ªåŸºæœ¬æ¦‚å¿µï¼Œä¹Ÿå°±èƒ½ç†è§£ State + Action =&gt; New State è¿™æ ·ä¸€ä¸ªç®€å•å´æ ¸å¿ƒçš„æœºåˆ¶ã€‚</p><h1>å¦‚ä½•åœ¨ React ä¸­ä½¿ç”¨ Redux</h1><p>åœ¨åˆšæ‰çš„è®²è§£å’Œå…·ä½“ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰æŠŠ Redux å’Œ React å»ºç«‹è”ç³»ï¼Œè¿™ä¸»è¦æ˜¯ä¸ºäº†å¸®åŠ©ä½ å…ˆç†è§£æ¦‚å¿µã€‚è¦çŸ¥é“ï¼Œåœ¨å®é™…åœºæ™¯ä¸­ï¼ŒRedux Store ä¸­çš„çŠ¶æ€æœ€ç»ˆä¸€å®šæ˜¯ä¼šä½“ç°åœ¨ UI ä¸Šçš„ï¼Œå³é€šè¿‡ React ç»„ä»¶å±•ç¤ºç»™ç”¨æˆ·ã€‚é‚£ä¹ˆå¦‚ä½•å»ºç«‹Redux å’Œ React çš„è”ç³»å‘¢ï¼Ÿ</p><p>ä¸»è¦æ˜¯ä¸¤ç‚¹ï¼š</p><ol>
<li>React ç»„ä»¶èƒ½å¤Ÿåœ¨ä¾èµ–çš„ Store çš„æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œé‡æ–° Renderï¼›</li>
<li>åœ¨ React ç»„ä»¶ä¸­ï¼Œèƒ½å¤Ÿåœ¨æŸäº›æ—¶æœºå» dispatch ä¸€ä¸ª actionï¼Œä»è€Œè§¦å‘ Store çš„æ›´æ–°ã€‚</li>
</ol><p>è¦å®ç°è¿™ä¸¤ç‚¹ï¼Œæˆ‘ä»¬éœ€è¦å¼•å…¥ Facebook æä¾›çš„ <code>react-redux</code> è¿™æ ·ä¸€ä¸ªå·¥å…·åº“ï¼Œå·¥å…·åº“çš„ä½œç”¨å°±æ˜¯å»ºç«‹ä¸€ä¸ªæ¡¥æ¢ï¼Œè®© React å’Œ Redux å®ç°äº’é€šã€‚</p><p>åœ¨ <code>react-redux</code> çš„å®ç°ä¸­ï¼Œä¸ºäº†ç¡®ä¿éœ€è¦ç»‘å®šçš„ç»„ä»¶èƒ½å¤Ÿè®¿é—®åˆ°å…¨å±€å”¯ä¸€çš„ Redux Storeï¼Œåˆ©ç”¨äº† React çš„ Context æœºåˆ¶å»å­˜æ”¾ Store çš„ä¿¡æ¯ã€‚é€šå¸¸æˆ‘ä»¬ä¼šå°†è¿™ä¸ª Context ä½œä¸ºæ•´ä¸ª React åº”ç”¨ç¨‹åºçš„æ ¹èŠ‚ç‚¹ã€‚å› æ­¤ï¼Œä½œä¸º Redux çš„é…ç½®çš„ä¸€éƒ¨åˆ†ï¼Œæˆ‘ä»¬é€šå¸¸éœ€è¦å¦‚ä¸‹çš„ä»£ç ï¼š</p><pre><code>import React from 'react'
import ReactDOM from 'react-dom'

import { Provider } from 'react-redux'
import store from './store'

import App from './App'

const rootElement = document.getElementById('root')
ReactDOM.render(
  &lt;Provider store={store}&gt;
    &lt;App /&gt;
  &lt;/Provider&gt;,
  rootElement
)
</code></pre><p>è¿™é‡Œä½¿ç”¨äº† Provider è¿™æ ·ä¸€ä¸ªç»„ä»¶æ¥ä½œä¸ºæ•´ä¸ªåº”ç”¨ç¨‹åºçš„æ ¹èŠ‚ç‚¹ï¼Œå¹¶å°† Store ä½œä¸ºå±æ€§ä¼ ç»™äº†è¿™ä¸ªç»„ä»¶ï¼Œè¿™æ ·æ‰€æœ‰ä¸‹å±‚çš„ç»„ä»¶å°±éƒ½èƒ½å¤Ÿä½¿ç”¨ Redux äº†ã€‚</p><p>å®Œæˆäº†è¿™æ ·çš„é…ç½®ä¹‹åï¼Œåœ¨å‡½æ•°ç»„ä»¶ä¸­ä½¿ç”¨ Redux å°±éå¸¸ç®€å•äº†ï¼šåˆ©ç”¨ react-redux æä¾›çš„ useSelector å’Œ useDispatch è¿™ä¸¤ä¸ª Hooksã€‚</p><p>åœ¨ç¬¬äºŒè®²æˆ‘ä»¬å·²ç»æåˆ°ï¼ŒHooks çš„æœ¬è´¨å°±æ˜¯æä¾›äº†è®© React ç»„ä»¶èƒ½å¤Ÿç»‘å®šåˆ°æŸä¸ªå¯å˜çš„æ•°æ®æºçš„èƒ½åŠ›ã€‚åœ¨è¿™é‡Œï¼Œå½“ Hooks ç”¨åˆ° Redux æ—¶å¯å˜çš„å¯¹è±¡å°±æ˜¯ Storeï¼Œè€Œ useSelector åˆ™è®©ä¸€ä¸ªç»„ä»¶èƒ½å¤Ÿåœ¨ Store çš„æŸäº›æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶é‡æ–° renderã€‚</p><p>æˆ‘åœ¨è¿™é‡Œä»ç„¶ä»¥å®˜æ–¹ç»™çš„è®¡æ•°å™¨ä¾‹å­ä¸ºä¾‹ï¼Œæ¥ç»™ä½ è®²è§£å¦‚ä½•åœ¨ React ä¸­ä½¿ç”¨ Reduxï¼š</p><pre><code>import React from 'react'
import { useSelector, useDispatch } from 'react-redux'

export function Counter() {
  // ä» state ä¸­è·å–å½“å‰çš„è®¡æ•°å€¼
  const count = useSelector(state =&gt; state.value)

  // è·å¾—å½“å‰ store çš„ dispatch æ–¹æ³•
  const dispatch = useDispatch()

  // åœ¨æŒ‰é’®çš„ click æ—¶é—´ä¸­å»åˆ†å‘ action æ¥ä¿®æ”¹ store
  return (
    &lt;div&gt;
      &lt;button
        onClick={() =&gt; dispatch({ type: 'counter/incremented' })}
      &gt;+&lt;/button&gt;
      &lt;span&gt;{count}&lt;/span&gt;
      &lt;button
        onClick={() =&gt; dispatch({ type: 'counter/decremented' })}
      &gt;-&lt;/button&gt;
    &lt;/div&gt;
  )
}

</code></pre><p>æ­¤å¤–ï¼Œé€šè¿‡è®¡æ•°å™¨è¿™ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥çœ‹åˆ° React å’Œ Redux å…±åŒä½¿ç”¨æ—¶çš„å•å‘æ•°æ®æµï¼š</p><p><img src="https://static001.geekbang.org/resource/image/b6/e0/b6991fd03d27ee987b1cd29ae16552e0.png?wh=752*412" alt=""></p><p>éœ€è¦å¼ºè°ƒçš„æ˜¯ï¼Œåœ¨å®é™…çš„ä½¿ç”¨ä¸­ï¼Œæˆ‘ä»¬æ— éœ€å…³å¿ƒ View æ˜¯å¦‚ä½•ç»‘å®šåˆ° Store çš„æŸä¸€éƒ¨åˆ†æ•°æ®çš„ï¼Œå› ä¸ºReact-Redux å¸®æˆ‘ä»¬åšäº†è¿™ä»¶äº‹æƒ…ã€‚æ€»ç»“æ¥è¯´ï¼Œé€šè¿‡è¿™æ ·ä¸€ç§ç®€å•çš„æœºåˆ¶ï¼ŒRedux ç»Ÿä¸€äº†æ›´æ–°æ•°æ®çŠ¶æ€çš„æ–¹å¼ï¼Œè®©æ•´ä¸ªåº”ç”¨ç¨‹åºæ›´åŠ å®¹æ˜“å¼€å‘ã€ç»´æŠ¤ã€è°ƒè¯•å’Œæµ‹è¯•ã€‚</p><h1>ä½¿ç”¨ Redux å¤„ç†å¼‚æ­¥é€»è¾‘</h1><p>å­¦å®Œäº†å¦‚ä½•åœ¨React ä¸­ä½¿ç”¨Reduxï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±è¿›å…¥åˆ°Reduxçš„è¿›é˜¶åœºæ™¯ä¸­ã€‚</p><p>åœ¨ Redux ä¸­ï¼Œå¤„ç†å¼‚æ­¥é€»è¾‘ä¹Ÿå¸¸å¸¸è¢«ç§°ä¸º<strong>å¼‚æ­¥ Action</strong>ï¼Œå®ƒå‡ ä¹æ˜¯ React é¢è¯•ä¸­å¿…é—®çš„ä¸€é“é¢˜ï¼Œå¯ä»¥è®¤ä¸ºè¿™æ˜¯ Redux ä½¿ç”¨çš„è¿›é˜¶åœºæ™¯ã€‚</p><p>è™½ç„¶ Redux çš„å®˜æ–¹æ–‡æ¡£ä¸­å·²ç»å°†å¼‚æ­¥é€»è¾‘çš„åŸç†å†™å¾—å¾ˆæ¸…æ¥šï¼Œä½†æ˜¯å¤§éƒ¨åˆ†åŒå­¦ä»ç„¶åªèƒ½è¯´ä¸ªå¤§æ¦‚ï¼Œæˆ–è€…è¹¦å‡º Thunkã€Saga ä¹‹ç±»çš„å‡ ä¸ªå•è¯ã€‚é€ æˆè¿™ç§ç°è±¡çš„å¾ˆå¤§ä¸€éƒ¨åˆ†åŸå› å¯èƒ½åœ¨äºï¼Œä»…æ»¡è¶³äºæ ¹æ®å‚è€ƒç¤ºä¾‹å†™å‡ºå¯è¿è¡Œçš„ä»£ç ï¼Œè€Œæ²¡æœ‰æ·±ç©¶èƒŒåçš„åŸç†ã€‚</p><p>ä½†æ˜¯è¦æ˜ç™½ä¸€ç‚¹ï¼Œåªæœ‰èƒ½å¤Ÿè§£é‡Šæ¸…æ¥šå¼‚æ­¥ Actionï¼Œæ‰ç®—æ˜¯çœŸæ­£ç†è§£äº† Reduxï¼Œæ‰èƒ½åœ¨å®é™…å¼€å‘ä¸­çµæ´»åº”ç”¨ã€‚</p><p>åœ¨ Redux çš„ Store ä¸­ï¼Œæˆ‘ä»¬ä¸ä»…ç»´æŠ¤ç€ä¸šåŠ¡æ•°æ®ï¼ŒåŒæ—¶ç»´æŠ¤ç€åº”ç”¨ç¨‹åºçš„çŠ¶æ€ã€‚æ¯”å¦‚å¯¹äºå‘é€è¯·æ±‚è·å–æ•°æ®è¿™æ ·ä¸€ä¸ªå¼‚æ­¥çš„åœºæ™¯ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹æ¶‰åŠåˆ° Store æ•°æ®ä¼šæœ‰å“ªäº›å˜åŒ–ï¼š</p><ol>
<li>è¯·æ±‚å‘é€å‡ºå»æ—¶ï¼šè®¾ç½® state.pending = trueï¼Œç”¨äº UI æ˜¾ç¤ºåŠ è½½ä¸­çš„çŠ¶æ€ï¼›</li>
<li>è¯·æ±‚å‘é€æˆåŠŸæ—¶ï¼šè®¾ç½® state.pending = false, state.data = resultã€‚å³å–æ¶ˆ UI çš„åŠ è½½çŠ¶æ€ï¼ŒåŒæ—¶å°†è·å–çš„æ•°æ®æ”¾åˆ° store ä¸­ç”¨äº UI çš„æ˜¾ç¤ºã€‚</li>
<li>è¯·æ±‚å‘é€å¤±è´¥æ—¶ï¼šè®¾ç½® state.pending = false, state.error = errorã€‚å³å–æ¶ˆ UI çš„åŠ è½½çŠ¶æ€ï¼ŒåŒæ—¶è®¾ç½®é”™è¯¯çš„çŠ¶æ€ï¼Œç”¨äº UI æ˜¾ç¤ºé”™è¯¯çš„å†…å®¹ã€‚</li>
</ol><p>å‰é¢æåˆ°ï¼Œä»»ä½•å¯¹ Store çš„ä¿®æ”¹éƒ½æ˜¯ç”± action å®Œæˆçš„ã€‚é‚£ä¹ˆå¯¹äºä¸€ä¸ªå¼‚æ­¥è¯·æ±‚ï¼Œä¸Šé¢çš„ä¸‰æ¬¡æ•°æ®ä¿®æ”¹æ˜¾ç„¶å¿…é¡»è¦ä¸‰ä¸ª action æ‰èƒ½å®Œæˆã€‚é‚£ä¹ˆå‡è®¾æˆ‘ä»¬åœ¨ React ç»„ä»¶ä¸­å»åšè¿™ä¸ªå‘èµ·è¯·æ±‚çš„åŠ¨ä½œï¼Œä»£ç é€»è¾‘åº”è¯¥ç±»ä¼¼å¦‚ä¸‹ï¼š</p><pre><code>function DataList() {
  const dispatch = useDispatch();
  // åœ¨ç»„ä»¶åˆæ¬¡åŠ è½½æ—¶å‘èµ·è¯·æ±‚
  useEffect(() =&gt; {
    // è¯·æ±‚å‘é€æ—¶
    dispatch({ type: 'FETCH_DATA_BEGIN' });
    fetch('/some-url').then(res =&gt; {
      // è¯·æ±‚æˆåŠŸæ—¶
      dispatch({ type: 'FETCH_DATA_SUCCESS', data: res });
    }).catch(err =&gt; {
      // è¯·æ±‚å¤±è´¥æ—¶
      dispatch({ type: 'FETCH_DATA_FAILURE', error: err });
    })
  }, []);
  
  // ç»‘å®šåˆ° state çš„å˜åŒ–
  const data = useSelector(state =&gt; state.data);
  const pending = useSelector(state =&gt; state.pending);
  const error = useSelector(state =&gt; state.error);
  
  // æ ¹æ® state æ˜¾ç¤ºä¸åŒçš„çŠ¶æ€
  if (error) return 'Error.';
  if (pending) return 'Loading...';
  return &lt;Table data={data} /&gt;;
}
</code></pre><p>ä»è¿™æ®µä»£ç å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†ä¸‰ä¸ªï¼ˆåŒæ­¥ï¼‰Actionå®Œæˆäº†è¿™ä¸ªå¼‚æ­¥è¯·æ±‚çš„åœºæ™¯ã€‚è¿™é‡Œæˆ‘ä»¬å°† Store å®Œå…¨ä½œä¸ºä¸€ä¸ªå­˜æ”¾æ•°æ®çš„åœ°æ–¹ï¼Œè‡³äºæ•°æ®å“ªé‡Œæ¥ï¼Œ Redux å¹¶ä¸å…³å¿ƒã€‚å°½ç®¡è¿™æ ·åšæ˜¯å¯è¡Œçš„ã€‚</p><p>ä½†æ˜¯å¾ˆæ˜¾ç„¶ï¼Œå‘é€è¯·æ±‚è·å–æ•°æ®å¹¶è¿›è¡Œé”™è¯¯å¤„ç†è¿™ä¸ªé€»è¾‘æ˜¯ä¸å¯é‡ç”¨çš„ã€‚å‡è®¾æˆ‘ä»¬å¸Œæœ›åœ¨å¦å¤–ä¸€ä¸ªç»„ä»¶ä¸­ä¹Ÿèƒ½å‘é€åŒæ ·çš„è¯·æ±‚ï¼Œå°±ä¸å¾—ä¸å°†è¿™æ®µä»£ç é‡æ–°å®ç°ä¸€éã€‚å› æ­¤ï¼ŒRedux ä¸­æä¾›äº† middleware è¿™æ ·ä¸€ä¸ªæœºåˆ¶ï¼Œè®©æˆ‘ä»¬å¯ä»¥å·§å¦™åœ°å®ç°æ‰€è°“å¼‚æ­¥ Action çš„æ¦‚å¿µã€‚</p><p>ç®€å•æ¥è¯´ï¼Œmiddleware å¯ä»¥è®©ä½ æä¾›ä¸€ä¸ªæ‹¦æˆªå™¨åœ¨ reducer å¤„ç† action ä¹‹å‰è¢«è°ƒç”¨ã€‚åœ¨è¿™ä¸ªæ‹¦æˆªå™¨ä¸­ï¼Œä½ å¯ä»¥è‡ªç”±å¤„ç†è·å¾—çš„ actionã€‚æ— è®ºæ˜¯æŠŠè¿™ä¸ª action ç›´æ¥ä¼ é€’åˆ° reducerï¼Œæˆ–è€…æ„å»ºæ–°çš„ action å‘é€åˆ° reducerï¼Œéƒ½æ˜¯å¯ä»¥çš„ã€‚</p><p>ä»ä¸‹é¢è¿™å¼ å›¾å¯ä»¥çœ‹åˆ°ï¼ŒMiddleware æ­£æ˜¯åœ¨ Action çœŸæ­£åˆ°è¾¾ Reducer ä¹‹å‰æä¾›çš„ä¸€ä¸ªé¢å¤–å¤„ç† Action çš„æœºä¼šï¼š</p><p><img src="https://static001.geekbang.org/resource/image/b4/3a/b438a3e944c5f15911637868e78cd13a.png?wh=1042*210" alt=""></p><p>æˆ‘ä»¬åˆšæ‰ä¹Ÿæåˆ°äº†ï¼ŒRedux ä¸­çš„ Action ä¸ä»…ä»…å¯ä»¥æ˜¯ä¸€ä¸ª Objectï¼Œå®ƒå¯ä»¥æ˜¯ä»»ä½•ä¸œè¥¿ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªå‡½æ•°ã€‚åˆ©ç”¨è¿™ä¸ªæœºåˆ¶ï¼ŒRedux æä¾›äº† <code>redux-thunk</code> è¿™æ ·ä¸€ä¸ªä¸­é—´ä»¶ï¼Œå®ƒå¦‚æœå‘ç°æ¥å—åˆ°çš„ action æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œé‚£ä¹ˆå°±ä¸ä¼šä¼ é€’ç»™ Reducerï¼Œè€Œæ˜¯æ‰§è¡Œè¿™ä¸ªå‡½æ•°ï¼Œå¹¶æŠŠ dispatch ä½œä¸ºå‚æ•°ä¼ ç»™è¿™ä¸ªå‡½æ•°ï¼Œä»è€Œåœ¨è¿™ä¸ªå‡½æ•°ä¸­ä½ å¯ä»¥è‡ªç”±å†³å®šä½•æ—¶ï¼Œå¦‚ä½•å‘é€ Actionã€‚</p><p>ä¾‹å¦‚å¯¹äºä¸Šé¢çš„åœºæ™¯ï¼Œå‡è®¾æˆ‘ä»¬åœ¨åˆ›å»º Redux Store æ—¶æŒ‡å®šäº† redux-thunk è¿™ä¸ªä¸­é—´ä»¶ï¼š</p><pre><code>import { createStore, applyMiddleware } from 'redux'
import thunkMiddleware from 'redux-thunk'
import rootReducer from './reducer'

const composedEnhancer = applyMiddleware(thunkMiddleware)
const store = createStore(rootReducer, composedEnhancer)
</code></pre><p>é‚£ä¹ˆåœ¨æˆ‘ä»¬dispatch action æ—¶å°±å¯ä»¥ dispatch ä¸€ä¸ªå‡½æ•°ç”¨äºæ¥å‘é€è¯·æ±‚ï¼Œé€šå¸¸ï¼Œæˆ‘ä»¬ä¼šå†™æˆå¦‚ä¸‹çš„ç»“æ„ï¼š</p><pre><code>function fetchData() {
  return dispatch =&gt; {
    dispatch({ type: 'FETCH_DATA_BEGIN' });
    fetch('/some-url').then(res =&gt; {
      dispatch({ type: 'FETCH_DATA_SUCCESS', data: res });
    }).catch(err =&gt; {
      dispatch({ type: 'FETCH_DATA_FAILURE', error: err });
    })
  }
}
</code></pre><p>é‚£ä¹ˆåœ¨æˆ‘ä»¬dispatch action æ—¶å°±å¯ä»¥ dispatch ä¸€ä¸ªå‡½æ•°ç”¨äºæ¥å‘é€è¯·æ±‚ï¼Œé€šå¸¸ï¼Œæˆ‘ä»¬ä¼šå†™æˆå¦‚ä¸‹çš„ç»“æ„ï¼š</p><pre><code>import fetchData from './fetchData';

function DataList() {
  const dispatch = useDispatch();
  // dispatch äº†ä¸€ä¸ªå‡½æ•°ç”± redux-thunk ä¸­é—´ä»¶å»æ‰§è¡Œ
  dispatch(fetchData());
}
</code></pre><p>å¯ä»¥çœ‹åˆ°ï¼Œé€šè¿‡è¿™ç§æ–¹å¼ï¼Œæˆ‘ä»¬å°±å®ç°äº†å¼‚æ­¥è¯·æ±‚é€»è¾‘çš„é‡ç”¨ã€‚é‚£ä¹ˆè¿™ä¸€å¥—ç»“åˆ <code>redux-thunk</code> ä¸­é—´ä»¶çš„æœºåˆ¶ï¼Œæˆ‘ä»¬å°±ç§°ä¹‹ä¸ºå¼‚æ­¥ Actionã€‚</p><p>æ‰€ä»¥è¯´å¼‚æ­¥ Action å¹¶ä¸æ˜¯ä¸€ä¸ªå…·ä½“çš„æ¦‚å¿µï¼Œè€Œå¯ä»¥æŠŠå®ƒçœ‹ä½œæ˜¯ Redux çš„ä¸€ä¸ªä½¿ç”¨æ¨¡å¼ã€‚å®ƒé€šè¿‡ç»„åˆä½¿ç”¨åŒæ­¥ Action ï¼Œåœ¨æ²¡æœ‰å¼•å…¥æ–°æ¦‚å¿µçš„åŒæ—¶ï¼Œç”¨ä¸€è‡´çš„æ–¹å¼æä¾›äº†å¤„ç†å¼‚æ­¥é€»è¾‘çš„æ–¹æ¡ˆã€‚</p><h1>å°ç»“</h1><p>å°½ç®¡ Redux æœ‰ä»¤äººè¯Ÿç—…çš„åœ°æ–¹ï¼Œä¾‹å¦‚å‡½æ•°å¼çš„æ¦‚å¿µæ¯”è¾ƒéš¾ä»¥ç†è§£ï¼Œæ ·æ¿ä»£ç è¿‡å¤šç­‰é—®é¢˜ã€‚ä½†å…¶å¸¦æ¥çš„å¥½å¤„ä¹Ÿæ˜¯å¾ˆæ˜æ˜¾çš„ï¼Œæ¯”å¦‚å¯ä»¥è®©ä»£ç æ›´å®¹æ˜“ç†è§£ï¼Œç»´æŠ¤å’Œæµ‹è¯•ã€‚å› æ­¤æœ‰è¶…è¿‡60%çš„ React åº”ç”¨éƒ½ä½¿ç”¨äº† Reduxã€‚</p><p>æ‰€ä»¥å³ä½¿å¯¹äºä¸€äº›å°å‹çš„åº”ç”¨ï¼Œä¸ä¸€å®šéœ€è¦ä½¿ç”¨ Reduxã€‚ä½†æ˜¯å¯¹äºå¼€å‘äººå‘˜æ¥è¯´ï¼Œå­¦ä¼šå’Œç†è§£ Redux ä»ç„¶æ˜¯ä¸€é¡¹å¿…é¡»æŒæ¡çš„æ—¢èƒ½ã€‚</p><h1>æ€è€ƒé¢˜</h1><p>åªè€ƒè™‘ Redux éƒ¨åˆ†ï¼Œå¯¹äºè®¡æ•°å™¨åº”ç”¨ï¼Œç›®å‰æ¯æ¬¡æ˜¯å›ºå®šåŠ å‡1ï¼Œå¦‚æœè¦èƒ½å¤Ÿåœ¨æ¯æ¬¡è°ƒç”¨æ—¶å¢åŠ æˆ–å‡å°‘æŒ‡å®šçš„å˜é‡å€¼ï¼Œåº”è¯¥å¦‚ä½•å®ç°ï¼Ÿ</p><p>æ¬¢è¿æŠŠä½ çš„æ€è€ƒå’Œæƒ³æ³•åˆ†äº«åœ¨ç•™è¨€åŒºï¼Œæˆ‘ä¼šå’Œä½ äº¤æµè®¨è®ºã€‚ä¹Ÿæ¬¢è¿ä½ æŠŠè¯¾ç¨‹åˆ†äº«ç»™ä½ çš„æœ‹å‹å’ŒåŒäº‹ï¼Œæˆ‘ä»¬å…±åŒè¿›æ­¥ï¼</p>
<style>
    ul {
      list-style: none;
      display: block;
      list-style-type: disc;
      margin-block-start: 1em;
      margin-block-end: 1em;
      margin-inline-start: 0px;
      margin-inline-end: 0px;
      padding-inline-start: 40px;
    }
    li {
      display: list-item;
      text-align: -webkit-match-parent;
    }
    ._2sjJGcOH_0 {
      list-style-position: inside;
      width: 100%;
      display: -webkit-box;
      display: -ms-flexbox;
      display: flex;
      -webkit-box-orient: horizontal;
      -webkit-box-direction: normal;
      -ms-flex-direction: row;
      flex-direction: row;
      margin-top: 26px;
      border-bottom: 1px solid rgba(233,233,233,0.6);
    }
    ._2sjJGcOH_0 ._3FLYR4bF_0 {
      width: 34px;
      height: 34px;
      -ms-flex-negative: 0;
      flex-shrink: 0;
      border-radius: 50%;
    }
    ._2sjJGcOH_0 ._36ChpWj4_0 {
      margin-left: 0.5rem;
      -webkit-box-flex: 1;
      -ms-flex-positive: 1;
      flex-grow: 1;
      padding-bottom: 20px;
    }
    ._2sjJGcOH_0 ._36ChpWj4_0 ._2zFoi7sd_0 {
      font-size: 16px;
      color: #3d464d;
      font-weight: 500;
      -webkit-font-smoothing: antialiased;
      line-height: 34px;
    }
    ._2sjJGcOH_0 ._36ChpWj4_0 ._2_QraFYR_0 {
      margin-top: 12px;
      color: #505050;
      -webkit-font-smoothing: antialiased;
      font-size: 14px;
      font-weight: 400;
      white-space: normal;
      word-break: break-all;
      line-height: 24px;
    }
    ._2sjJGcOH_0 ._10o3OAxT_0 {
      margin-top: 18px;
      border-radius: 4px;
      background-color: #f6f7fb;
    }
    ._2sjJGcOH_0 ._3klNVc4Z_0 {
      display: -webkit-box;
      display: -ms-flexbox;
      display: flex;
      -webkit-box-orient: horizontal;
      -webkit-box-direction: normal;
      -ms-flex-direction: row;
      flex-direction: row;
      -webkit-box-pack: justify;
      -ms-flex-pack: justify;
      justify-content: space-between;
      -webkit-box-align: center;
      -ms-flex-align: center;
      align-items: center;
      margin-top: 15px;
    }
    ._2sjJGcOH_0 ._10o3OAxT_0 ._3KxQPN3V_0 {
      color: #505050;
      -webkit-font-smoothing: antialiased;
      font-size: 14px;
      font-weight: 400;
      white-space: normal;
      word-break: break-word;
      padding: 20px 20px 20px 24px;
    }
    ._2sjJGcOH_0 ._3klNVc4Z_0 {
      display: -webkit-box;
      display: -ms-flexbox;
      display: flex;
      -webkit-box-orient: horizontal;
      -webkit-box-direction: normal;
      -ms-flex-direction: row;
      flex-direction: row;
      -webkit-box-pack: justify;
      -ms-flex-pack: justify;
      justify-content: space-between;
      -webkit-box-align: center;
      -ms-flex-align: center;
      align-items: center;
      margin-top: 15px;
    }
    ._2sjJGcOH_0 ._3Hkula0k_0 {
      color: #b2b2b2;
      font-size: 14px;
    }
</style><ul><li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/10/f2/4f/59bd4141.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>Isaac</span>
  </div>
  <div class="_2_QraFYR_0">è€å¸ˆï¼Œredux å¦‚ä½•å’Œè‡ªå®šä¹‰ hooks å¾ˆå¥½çš„ç»“åˆèµ·æ¥ï¼Ÿ<br>æ¯”å¦‚å¸¸è§çš„è·å–ä¸€ä¸ªåˆ—è¡¨ï¼Œæˆ‘å°è£…æˆä¸€ä¸ª useList çš„è‡ªå®šä¹‰ hookï¼Œé‚£ä¹ˆå°±å¯ä»¥åœ¨å¤šä¸ªç»„ä»¶ä¸­ä½¿ç”¨ useListã€‚ä½†æ˜¯æ¯æ¬¡ useList() çš„æ—¶å€™ï¼Œéƒ½ä¼šè§¦å‘æ¥å£è°ƒç”¨ï¼Œè·å–åˆ°çš„æ•°æ®æºç»„ä»¶ä¹‹é—´æ— æ³•å…±äº«ã€‚<br></div>
  <div class="_10o3OAxT_0">
    <p class="_3KxQPN3V_0">ä½œè€…å›å¤: ç»™ä½ çœ‹ä¸€ä¸ªå®é™…çš„ä¾‹å­ï¼Œä½ å¯èƒ½å°±å¯ä»¥ç†è§£äº†ã€‚å…³é”®åœ¨äºï¼ŒuseEffect ä¸­åˆ¤æ–­æ˜¯å¦è¦å»è·å–æ•°æ®ã€‚è¿™ä¸ªåˆ¤æ–­æ¡ä»¶å¯èƒ½å› åœºæ™¯è€Œå¼‚ï¼Œæ¯”å¦‚ä¸‹é¢çš„ä»£ç ï¼Œåªåœ¨ admins ä¸å­˜åœ¨ï¼Œå¹¶ä¸”æ²¡æœ‰ error ä¸åœ¨ pending çš„æƒ…å†µä¸‹ï¼Œæ‰è°ƒç”¨æ¥å£ã€‚<br><br>export function useFetchAdmins() {<br>  const dispatch = useDispatch();<br><br>  const { admins, fetchAdminsPending, fetchAdminsError } = useSelector(<br>    state =&gt; ({<br>      admins: state.pluginPluginManager.home.admins,<br>      fetchAdminsPending: state.pluginPluginManager.home.fetchAdminsPending,<br>      fetchAdminsError: state.pluginPluginManager.home.fetchAdminsError,<br>    }),<br>    shallowEqual,<br>  );<br><br>  const boundAction = useCallback(<br>    (...args) =&gt; {<br>      return dispatch(fetchAdmins(...args));<br>    },<br>    [dispatch],<br>  );<br><br>  useEffect(() =&gt; {<br>    if (!admins &amp;&amp; !fetchAdminsPending &amp;&amp; !fetchAdminsError) boundAction();<br>  }, [admins, fetchAdminsPending, fetchAdminsError, boundAction]);<br><br>  return {<br>    admins,<br>    fetchAdmins: boundAction,<br>    fetchAdminsPending,<br>    fetchAdminsError,<br>  };<br>}</p>
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2021-06-09 16:17:30</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/0f/51/4d/0aceadde.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>è…¾æŒª</span>
  </div>
  <div class="_2_QraFYR_0">ç»™æå®¢æ—¶é—´ç½‘é¡µç‰ˆæä¸€ä¸ªå»ºè®®ï¼Œå¼ºçƒˆå»ºè®®ç½‘é¡µç‰ˆä¹Ÿèƒ½åƒæ‰‹æœºç«¯ä¸€æ ·ï¼Œå¯¹å†™å¾—å¥½çš„æ–‡ç« è¿›è¡Œç‚¹èµğŸ‘ã€‚æœ¬æ–‡å†™å¾—é€šä¿—æ˜“æ‡‚ï¼Œè¯´æ˜ç‹è€å¸ˆæ°´å¹³å¾ˆé«˜ï¼Œå€¼å¾—èµã€‚</div>
  <div class="_10o3OAxT_0">
    
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2021-06-08 14:00:24</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/1f/11/b1/4379e143.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>H</span>
  </div>
  <div class="_2_QraFYR_0">è¯·é—®è€å¸ˆåœ¨è¿™ä¸ªä¸“æ æ›´æ–°å®Œä¹‹åè¿˜æœ‰æ²¡æœ‰å…¶ä»–çš„è®¡åˆ’ã€‹<br>å­¦ä¹ è€å¸ˆçš„æ¯ä¸€ç¯‡æ–‡ç« ä»¥åŠè§†é¢‘éƒ½æœ‰é†é†çŒé¡¶ï¼Œä»»è„‰æ‰“é€šçš„æ„Ÿè§‰ã€‚<br>å¾ˆæœŸå¾…è€å¸ˆæ¥ç€å‡ºä¸€ä¸ªå…³äºè§£è¯»reactæºç çš„è¯¾ç¨‹ï¼Œå¾ˆæœŸå¾…ï¼Œå¾ˆæœŸå¾…ã€‚<br>ä¸çŸ¥é“è€å¸ˆé™¤äº†reactçš„ä¸“æ å’Œè§†å±è¿˜æœ‰æ²¡æœ‰å…¶å®ƒçš„è¯¾ç¨‹ï¼Œå¾ˆæƒ³å¾ˆæƒ³è·Ÿç€å»å­¦ä¹ å­¦ä¹ ã€‚</div>
  <div class="_10o3OAxT_0">
    <p class="_3KxQPN3V_0">ä½œè€…å›å¤: è°¢è°¢æ”¯æŒï¼Œè¿‡å¥–äº†~~ ç›®å‰å…ˆæŠŠè¿™æ¬¡è¯¾ç¨‹å®Œç»“äº†å“¦ï¼Œæš‚æ—¶æ²¡æœ‰åç»­è®¡åˆ’</p>
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2021-06-20 13:28:44</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/10/4a/97/414d0e39.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>kotumato</span>
  </div>
  <div class="_2_QraFYR_0">function counterReducer(state = initialState, action) {<br>    switch (action.type) {<br>        case &#39;counter&#47;incremented&#39;: return {value: state.value + action.payload}<br>        case &#39;counter&#47;decremented&#39;: return {value: state.value - action.payload}<br>        default: return state<br>    }<br>}<br>const incrementAction = { type: &#39;counter&#47;incremented&#39;, payload: 10 };<br>store.dispatch(incrementAction); &#47;&#47; è®¡æ•°å™¨åŠ  10<br>const decrementAction = { type: &#39;counter&#47;decremented&#39;,  payload: 10 };<br>store.dispatch(decrementAction); &#47;&#47; è®¡æ•°å™¨å‡ 10</div>
  <div class="_10o3OAxT_0">
    
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2021-06-08 22:52:13</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/12/5d/22/6e78881e.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>Aaron</span>
  </div>
  <div class="_2_QraFYR_0">å¯ä»¥é€šè¿‡åœ¨actionæ·»åŠ å…¶ä»–å­—æ®µï¼Œå¦‚payloadæ¥ä¼ é€’éœ€è¦åŠ å‡çš„æ•°å€¼</div>
  <div class="_10o3OAxT_0">
    
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2021-06-08 09:23:28</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/11/b8/2c/0f7baf3a.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>Change</span>
  </div>
  <div class="_2_QraFYR_0">è€å¸ˆé—®ä¸ªé—®é¢˜ï¼Œredux toolkitå’Œreduxæœ‰å•¥åŒºåˆ«ï¼Œåœ¨é¡¹ç›®ç”¨å“ªä¸ªæ›´æ–¹ä¾¿ä¸€äº›</div>
  <div class="_10o3OAxT_0">
    
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2021-06-18 14:54:24</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/12/bd/ec/cc7abf0b.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>L</span>
  </div>
  <div class="_2_QraFYR_0">æ€»æ„Ÿè§‰reduxè¿™å¥—å·²ç»è¿‡æ—¶äº†ã€‚æ ·æ¿ä»£ç ä¹‹ç±»çš„å®åœ¨æ˜¯å¤ªå¤šå¤ªç¹çäº†ã€‚åŒæ ·æ˜¯è¿™ç§ç»Ÿä¸€ç®¡ç†æ•°æ®çš„æ–¹å¼ï¼Œvuexå°±æ¯”ä»–å¥½å¾ˆå¤šã€‚æ„Ÿè§‰ç°åœ¨å¾ˆå¤šç©çš„éƒ½æ˜¯çº¦å®šå¼</div>
  <div class="_10o3OAxT_0">
    
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2021-06-12 11:49:36</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/28/3b/43/dedbfc4c.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>Redmi_18117543951</span>
  </div>
  <div class="_2_QraFYR_0">ç»ˆäºçŸ¥é“å•¥æ˜¯å¼‚æ­¥Actionäº†ï¼Œä¹‹å‰è¢«åå­—å“ä½ï¼Œå­¦è¿‡æ‰å‘ç°åŸæ¥å®é™…ä¸Šå¾ˆç®€å•å‘€</div>
  <div class="_10o3OAxT_0">
    <p class="_3KxQPN3V_0">ä½œè€…å›å¤: æ˜¯çš„ï¼Œå¾ˆå¤šå…¶å®æŒºç®€å•çš„ä¸œè¥¿ï¼Œéœ€è¦å¾ˆé•¿çš„æ–‡æ¡£æ¥è¯´æ˜åœºæ™¯å’Œç”¨æ³•ï¼Œé€ æˆäº†çœ‹ä¸Šå»å¾ˆå¤æ‚çš„ç°è±¡ã€‚</p>
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2021-07-20 16:20:39</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/28/66/d5/f36495bd.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>81</span>
  </div>
  <div class="_2_QraFYR_0">å¼‚æ­¥æ“ä½œéœ€è¦ä¼ é€’æ•°æ®çš„æ—¶å€™ï¼Œå¯ä»¥è¿™æ ·æ“ä½œå˜›ï¼Ÿdispath((dispatch,playload)=&gt;{fetch(&quot;&#47;some-url&quot;ï¼Œ{playload}).then(dispatth({type:&quot;&#47;update&#47;msg&quot;,playload}))})ï¼›ã€‚ æ˜¯åœ¨dipatchæ´¾å‘çš„å‡½æ•°ä¸­çš„ç¬¬äºŒä¸ªå‚æ•°ä½ç½®ä¼ æ•°æ®  ç¬¬ä¸€ä¸ªå‚æ•°ä½ç½® å†™dispatchï¼Ÿ</div>
  <div class="_10o3OAxT_0">
    
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2021-06-18 14:41:26</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/20/fc/0f/df9edecd.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>å°ç°</span>
  </div>
  <div class="_2_QraFYR_0"><br>import { createStore } from &#39;redux&#39;<br><br>&#47;&#47; å®šä¹‰ Store çš„åˆå§‹å€¼<br>const initialState = { value: 0 }<br><br>&#47;&#47; Reducerï¼Œå¤„ç† Action è¿”å›æ–°çš„ State<br>function counterReducer(state = initialState, action) {<br>  switch (action.type) {<br>    case &#39;counter&#47;incremented&#39;:<br>      return { value: state.value + 1 }<br>    case &#39;counter&#47;decremented&#39;:<br>      return { value: state.value - 1 }<br>    case &#39;counter&#47;add&#39;: <br>      return {<br>          ...state,<br>          value: stat.value + action.data<br>      }<br>    default:<br>      return state<br>  }<br>}<br><br>&#47;&#47; åˆ©ç”¨ Redux API åˆ›å»ºä¸€ä¸ª Storeï¼Œå‚æ•°å°±æ˜¯ Reducer<br>const store = createStore(counterReducer)<br><br>&#47;&#47; Store æä¾›äº† subscribe ç”¨äºç›‘å¬æ•°æ®å˜åŒ–<br>store.subscribe(() =&gt; console.log(store.getState()))<br><br>&#47;&#47; è®¡æ•°å™¨åŠ  1ï¼Œç”¨ Store çš„ dispatch æ–¹æ³•åˆ†å‘ä¸€ä¸ª Actionï¼Œç”± Reducer å¤„ç†<br>const incrementAction = { type: &#39;counter&#47;incremented&#39; };<br><br>store.dispatch(incrementAction);<br>&#47;&#47; ç›‘å¬å‡½æ•°è¾“å‡ºï¼š{value: 1}<br><br>&#47;&#47; è®¡æ•°å™¨å‡ 1<br>const decrementAction = { type: &#39;counter&#47;decremented&#39; };<br>store.dispatch(decrementAction)<br>&#47;&#47; ç›‘å¬å‡½æ•°è¾“å‡ºï¼š{value: 0}<br><br>const add = (data)=&gt;({type: &#39;counter&#47;add&#39;, data});<br>store.dispatch(add(5));</div>
  <div class="_10o3OAxT_0">
    
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2021-06-08 22:07:56</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/12/d1/ad/1aed3dec.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>å°é£ä¾ î­</span>
  </div>
  <div class="_2_QraFYR_0">å°ç»“é‡Œé¢ï¼Œæœ€åä¸€ä¸ªè¯æœ‰é”™åˆ«å­—ï¼ˆâˆ©â–½âˆ©ï¼‰ï¼Œæ—¢èƒ½=&gt;æŠ€èƒ½</div>
  <div class="_10o3OAxT_0">
    <p class="_3KxQPN3V_0">ç¼–è¾‘å›å¤: æ„Ÿè°¢åé¦ˆï¼Œé©¬ä¸Šä¿®æ­£</p>
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2022-03-11 08:34:59</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJVpGfkkH8rqC7nTmX8DlTZ3lMQpCic3a7rjUTXqnzv5bhXfQwQ15SxJF5CETbVegcHFbQNc4XfGyA/132"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>Geek_9b9b7e</span>
  </div>
  <div class="_2_QraFYR_0">ä¸ºä»€ä¹ˆè¦å¼‚æ­¥action?è€å¸ˆçš„ç­”æ¡ˆæ˜¯ï¼šâ€œå‘é€è¯·æ±‚è·å–æ•°æ®å¹¶è¿›è¡Œé”™è¯¯å¤„ç†è¿™ä¸ªé€»è¾‘æ˜¯ä¸å¯é‡ç”¨çš„ã€‚å‡è®¾æˆ‘ä»¬å¸Œæœ›åœ¨å¦å¤–ä¸€ä¸ªç»„ä»¶ä¸­ä¹Ÿèƒ½å‘é€åŒæ ·çš„è¯·æ±‚ï¼Œå°±ä¸å¾—ä¸å°†è¿™æ®µä»£ç é‡æ–°å®ç°ä¸€éã€‚â€œ<br><br>ä¹Ÿå°±æ˜¯è¯´ï¼Œredux-thunk è¦åšçš„å°±æ˜¯ã€æŠŠè¿™æ®µä»£ç å®ç°ä¸€éã€‘ã€‚<br><br>å°±æ˜¯ä¸‹é¢è¿™æ®µä»£ç ï¼š<br>    &#47;&#47; è¯·æ±‚å‘é€æ—¶<br>    dispatch({ type: &#39;FETCH_DATA_BEGIN&#39; });<br>    fetch(&#39;&#47;some-url&#39;).then(res =&gt; {<br>      &#47;&#47; è¯·æ±‚æˆåŠŸæ—¶<br>      dispatch({ type: &#39;FETCH_DATA_SUCCESS&#39;, data: res });<br>    }).catch(err =&gt; {<br>      &#47;&#47; è¯·æ±‚å¤±è´¥æ—¶<br>      dispatch({ type: &#39;FETCH_DATA_FAILURE&#39;, error: err });<br>    });<br><br>ä¸ºäº†redux-thunkèƒ½é‡å¤ä½¿ç”¨è¿™æ®µä»£ç ï¼Œæˆ‘ä»¬è¿˜éœ€è¦å®šä¹‰ä¸€ä¸ª actionCreator å‡½æ•°ï¼Œç”¨æ¥è¿”å›è¿™æ®µä»£ç ã€‚<br><br>æˆ‘ä»¬ä¸ºå•¥ä¸ç›´æ¥ä½¿ç”¨è‡ªå®šä¹‰hookså‘¢ï¼Œhooksçš„ä¸»è¦åŠŸèƒ½ä¸å°±æ˜¯â€ä»£ç å¤ç”¨â€œã€‚<br><br>ä¾‹å¦‚ï¼š<br>useUserList(dispatch =&gt; {<br>    return useCallback(() =&gt; {<br>        &#47;&#47; è¯·æ±‚å‘é€æ—¶<br>    dispatch({ type: &#39;FETCH_DATA_BEGIN&#39; });<br>    fetch(&#39;&#47;some-url&#39;).then(res =&gt; {<br>      &#47;&#47; è¯·æ±‚æˆåŠŸæ—¶<br>      dispatch({ type: &#39;FETCH_DATA_SUCCESS&#39;, data: res });<br>    }).catch(err =&gt; {<br>      &#47;&#47; è¯·æ±‚å¤±è´¥æ—¶<br>      dispatch({ type: &#39;FETCH_DATA_FAILURE&#39;, error: err });<br>    }), [dispatch]);<br>    });<br>}) </div>
  <div class="_10o3OAxT_0">
    
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2022-03-07 11:20:36</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/12/ed/23/73af9e5c.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>å±±ä¸˜smith18651579836</span>
  </div>
  <div class="_2_QraFYR_0">ä¸ºä»€ä¹ˆä¸ç”¨usecontext</div>
  <div class="_10o3OAxT_0">
    
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2022-01-23 19:54:42</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/2b/e4/af/f8cf4bc2.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>Light èƒ–è™</span>
  </div>
  <div class="_2_QraFYR_0">è¿™æ ·å†™å¯ä»¥å—ï¼Œè€å¸ˆã€‚åœ¨å®šä¹‰actionå¯¹è±¡çš„æ—¶å€™å¢åŠ ä¸€ä¸ªå­—æ®µç”¨æ¥å­˜å‚¨æ¯æ¬¡è®¡ç®—çš„æ­¥é•¿ï¼ˆé»˜è®¤ä¸º1ï¼‰<br>&#47;&#47; å®šä¹‰ Store çš„åˆå§‹å€¼const initialState = { value: 0ï¼Œstep: 1 }<br>function counterReducer(state = initialState, action) <br>{ switch (action.type) { <br>case &#39;counter&#47;incremented&#39;: return { value: state.value + action.step || 1} <br>case &#39;counter&#47;decremented&#39;: return { value: state.value - action.step || 1 } <br>default: return state <br>}}<br><br><br>return (<br> dispatch({ type: &#39;counter&#47;incremented&#39;,action: 2 })} &gt;+ {count}<br> dispatch({ type: &#39;counter&#47;decremented&#39; })} &gt;-<br>)}</div>
  <div class="_10o3OAxT_0">
    
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2021-12-28 21:01:50</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src=""
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>Geek_dbfc78</span>
  </div>
  <div class="_2_QraFYR_0">ä½¿ç”¨actionå¯¹è±¡å±æ€§ä½œä¸º è¡¨ç°å±‚ -&gt; æ•°æ®å±‚ å‚æ•°ä¼ é€’çš„å…¥å£ï¼Œå®ç°åŠ¨æ€å€¼çš„åŠ å‡</div>
  <div class="_10o3OAxT_0">
    
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2021-10-09 16:20:00</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/0f/fa/21/abb7bfe3.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>Vongola</span>
  </div>
  <div class="_2_QraFYR_0">const data = useSelectore(state =&gt; state.data);<br>è¿™é‡Œåº”è¯¥æ˜¯useSelectorå§ï¼Ÿ</div>
  <div class="_10o3OAxT_0">
    <p class="_3KxQPN3V_0">ä½œè€…å›å¤: æ„Ÿè°¢æŒ‡å‡ºï¼Œå·²æäº¤ä¿®æ”¹ã€‚</p>
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2021-08-04 10:07:03</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/13/10/34/705572e6.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>é™ˆèŠ³</span>
  </div>
  <div class="_2_QraFYR_0">åœ¨ react-redux çš„å®ç°ä¸­ï¼Œä¸ºäº†ç¡®ä¿éœ€è¦ç»‘å®šçš„ç»„ä»¶èƒ½å¤Ÿè®¿é—®åˆ°å…¨å±€å”¯ä¸€çš„ Redux Storeï¼Œåˆ©ç”¨äº† React çš„ Conext æœºåˆ¶å»å­˜æ”¾ Store çš„ä¿¡æ¯ã€‚<br>åº”è¯¥æ˜¯Context</div>
  <div class="_10o3OAxT_0">
    <p class="_3KxQPN3V_0">ä½œè€…å›å¤: è°¢è°¢æŒ‡å‡ºï¼ä¼šæ›´æ–°ä¸€ä¸‹ã€‚</p>
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2021-07-24 17:22:16</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/29/05/6f/6a47d5b7.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>å›</span>
  </div>
  <div class="_2_QraFYR_0">æœ‰ä¸ªé—®é¢˜<br>å‡è®¾æˆ‘é¡µé¢æœ‰è¡¨å•<br>è¡¨å•æ§ä»¶å¤ç”¨ç¨‹åº¦å¾ˆå¤§<br>å¦‚ä½•æ›´ä¼˜é›…çš„ç®¡ç†<br>1ã€è¡¨å•æ•°æ®æº<br>2ã€è¡¨å•é‰´æƒ<br>3ã€è¡¨å•é‰´æƒåçš„æ•°æ®å†æ¬¡è¿‡æ»¤åº”å¯¹ä¸åŒåœºæ™¯<br>4ã€è¡¨å•åˆå§‹å€¼ç¡®å®šï¼ŒåŒæ­¥å’Œå¼‚æ­¥çš„æƒ…å†µ<br>5ã€ç»´æŠ¤ä¸€ä¸ªè¡¨å•å€¼å‡†å¤‡å¥½çš„çŠ¶æ€å¹¶ä»¥æ­¤ä¸ºå‡†ç•Œå®šåˆå§‹æŸ¥è¯¢<br><br>æ„Ÿè§‰è¡¨å•è¿™ä¸€å—è¿˜æ˜¯è›®å¥½ç©çš„</div>
  <div class="_10o3OAxT_0">
    
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2021-07-06 22:57:37</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/0f/db/ba/304a9a4a.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>JuntÃ­ng</span>
  </div>
  <div class="_2_QraFYR_0">Hooks çš„å‡ºç°ï¼Œç»“åˆ context APIï¼Œç”¨ç®¡ç†å…¨å±€çŠ¶æ€æ›´åŠ ç®€æ´æ˜“æ‡‚ï¼Œåªæ˜¯åœ¨æ•°æ®æµå˜æ›´æœºåˆ¶ä¸Šä¸å®¹æ˜“æ•è·ï¼Œä½†æ˜¯å´æ¯” Redux å¸¦æ¥çš„ä»£ç å¤æ‚åº¦çš„å¢åŠ ã€æ ·æ¿ä»£ç è¿‡å¤šï¼Œä¸æ˜“äºé˜…è¯»ä¸Šæ¥è¯´æˆ‘æ›´åŠ åçˆ± hooks + ContextAPI ã€‚</div>
  <div class="_10o3OAxT_0">
    
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2021-06-22 21:21:08</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/18/fc/c3/0991edfc.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>é—²é—²</span>
  </div>
  <div class="_2_QraFYR_0">è€å¸ˆæˆ‘æœ‰ä¸¤ä¸ªé—®é¢˜éº»çƒ¦é—®ä¸‹ï¼Œ<br>1ã€å¦‚æœé¡¹ç›®é‡Œé¢çŠ¶æ€å€¼ç‰¹åˆ«å¤šï¼Œä¸šåŠ¡æ¯”è¾ƒå¤æ‚ï¼Œæ„Ÿè§‰reduxå°±å¾ˆå®¹æ˜“é€ æˆä¸€äº›ä¸çŸ¥é“å“ªé‡Œå¼•èµ·çš„é‡å¤æ¸²æŸ“ï¼Œå¯¼è‡´ç»„ä»¶é¢‘ç¹æ¸²æŸ“ï¼Œè¿™ä¸ªé—®é¢˜æœ‰å•¥å¥½çš„åŠæ³•å—ï¼Ÿ<br>2ã€ä½¿ç”¨reduxï¼Œæ€ä¹ˆå®ç°Aè¯·æ±‚å®Œäº†å†å‘Bè¯·æ±‚å‘¢ï¼Ÿ</div>
  <div class="_10o3OAxT_0">
    <p class="_3KxQPN3V_0">ä½œè€…å›å¤: 1. æ¯ä¸ªç»„ä»¶ç”¨åˆ° redux ä¸Šå“ªäº› stateï¼Œä¸€å®šè¦å…·ä½“ï¼Œä¸è¦ç»‘å®šåœ¨ä¸€ä¸ªå¤ªå¤§çš„èŠ‚ç‚¹ä¸Šã€‚<br>2. ç¬¬9è¯¾ä¼šè®²å“¦ã€‚</p>
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2021-06-08 22:38:00</div>
  </div>
</div>
</div>
</li>
</ul>