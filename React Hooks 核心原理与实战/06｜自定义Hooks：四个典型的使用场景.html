<audio title="06ï½œè‡ªå®šä¹‰Hooksï¼šå››ä¸ªå…¸å‹çš„ä½¿ç”¨åœºæ™¯" src="https://static001.geekbang.org/resource/audio/c8/0c/c8e3e221fa6bd0780ea21d08577d190c.mp3" controls="controls"></audio> 
<p>ä½ å¥½ï¼Œæˆ‘æ˜¯ç‹æ²›ã€‚</p><p>æˆ‘åœ¨å¼€ç¯‡è¯å°±è¯´è¿‡ï¼Œè¦ç”¨å¥½ React Hooksï¼Œå¾ˆé‡è¦çš„ä¸€ç‚¹ï¼Œå°±æ˜¯è¦èƒ½å¤Ÿä» Hooks çš„è§’åº¦å»æ€è€ƒé—®é¢˜ã€‚è¦åšåˆ°è¿™ä¸€ç‚¹å…¶å®ä¹Ÿä¸éš¾ï¼Œå°±æ˜¯åœ¨é‡åˆ°ä¸€ä¸ªåŠŸèƒ½å¼€å‘çš„éœ€æ±‚æ—¶ï¼Œé¦–å…ˆé—®è‡ªå·±ä¸€ä¸ªé—®é¢˜ï¼š<strong>è¿™ä¸ªåŠŸèƒ½ä¸­çš„å“ªäº›é€»è¾‘å¯ä»¥æŠ½å‡ºæ¥æˆä¸ºç‹¬ç«‹çš„ Hooksï¼Ÿ</strong></p><p>è¿™ä¹ˆé—®çš„ç›®çš„ï¼Œæ˜¯ä¸ºäº†è®©æˆ‘ä»¬å°½å¯èƒ½åœ°æŠŠä¸šåŠ¡é€»è¾‘æ‹†æˆç‹¬ç«‹çš„ Hooks ï¼Œè¿™æ ·æœ‰åŠ©äºå®ç°ä»£ç çš„æ¨¡å—åŒ–å’Œè§£è€¦ï¼ŒåŒæ—¶ä¹Ÿæ–¹ä¾¿åé¢çš„ç»´æŠ¤ã€‚å¦‚æœä½ åŸºç¡€ç¯‡çš„çŸ¥è¯†æŒæ¡å¾—ç‰¢å›ºçš„è¯ï¼Œå°±ä¼šå‘ç°ï¼Œè¿™æ˜¯å› ä¸º Hooks æœ‰ä¸¤ä¸ªéå¸¸æ ¸å¿ƒçš„ä¼˜ç‚¹ï¼š</p><ul>
<li>ä¸€æ˜¯æ–¹ä¾¿è¿›è¡Œé€»è¾‘å¤ç”¨ï¼›</li>
<li>äºŒæ˜¯å¸®åŠ©å…³æ³¨åˆ†ç¦»ã€‚</li>
</ul><p>æ¥ä¸‹æ¥æˆ‘å°±é€šè¿‡ä¸€ä¸ªæ¡ˆä¾‹ï¼Œæ¥å¸¦ä½ è®¤è¯†ä»€ä¹ˆæ˜¯è‡ªå®šä¹‰Hooksï¼Œä»¥åŠå¦‚ä½•åˆ›å»ºã€‚ç„¶åï¼Œæˆ‘ä»¬å†é€šè¿‡å…¶å®ƒ3ä¸ªå…¸å‹æ¡ˆä¾‹ï¼Œæ¥çœ‹çœ‹è‡ªå®šä¹‰Hooks å…·ä½“æœ‰ä»€ä¹ˆç”¨ï¼Œä»è€Œå¸®ä½ æŒæ¡ä» Hooks è§’åº¦å»è§£å†³é—®é¢˜çš„æ€è€ƒæ–¹å¼ã€‚</p><h1>å¦‚ä½•åˆ›å»ºè‡ªå®šä¹‰ Hooksï¼Ÿ</h1><p>è‡ªå®šä¹‰ Hooks åœ¨å½¢å¼ä¸Šå…¶å®éå¸¸ç®€å•ï¼Œå°±æ˜¯<strong>å£°æ˜ä¸€ä¸ªåå­—ä»¥ use å¼€å¤´çš„å‡½æ•°</strong>ï¼Œæ¯”å¦‚ useCounterã€‚è¿™ä¸ªå‡½æ•°åœ¨å½¢å¼ä¸Šå’Œæ™®é€šçš„ JavaScript å‡½æ•°æ²¡æœ‰ä»»ä½•åŒºåˆ«ï¼Œä½ å¯ä»¥ä¼ é€’ä»»æ„å‚æ•°ç»™è¿™ä¸ª Hookï¼Œä¹Ÿå¯ä»¥è¿”å›ä»»ä½•å€¼ã€‚</p><p>ä½†æ˜¯è¦æ³¨æ„ï¼ŒHooks å’Œæ™®é€šå‡½æ•°åœ¨è¯­ä¹‰ä¸Šæ˜¯æœ‰åŒºåˆ«çš„ï¼Œå°±åœ¨äº<strong>å‡½æ•°ä¸­æœ‰æ²¡æœ‰ç”¨åˆ°å…¶å®ƒ Hooksã€‚</strong></p><!-- [[[read_end]]] --><p>ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿå°±æ˜¯è¯´å¦‚æœä½ åˆ›å»ºäº†ä¸€ä¸ª useXXX çš„å‡½æ•°ï¼Œä½†æ˜¯å†…éƒ¨å¹¶æ²¡æœ‰ç”¨ä»»ä½•å…¶å®ƒ Hooksï¼Œé‚£ä¹ˆè¿™ä¸ªå‡½æ•°å°±ä¸æ˜¯ä¸€ä¸ª Hookï¼Œè€Œåªæ˜¯ä¸€ä¸ªæ™®é€šçš„å‡½æ•°ã€‚ä½†æ˜¯å¦‚æœç”¨äº†å…¶å®ƒ Hooks ï¼Œé‚£ä¹ˆå®ƒå°±æ˜¯ä¸€ä¸ª Hookã€‚</p><p>ä¸¾ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œåœ¨ç¬¬3è®²ä¸­æˆ‘ä»¬çœ‹åˆ°è¿‡ä¸€ä¸ªç®€å•è®¡æ•°å™¨çš„å®ç°ï¼Œå½“æ—¶æŠŠä¸šåŠ¡é€»è¾‘éƒ½å†™åœ¨äº†å‡½æ•°ç»„ä»¶å†…éƒ¨ï¼Œä½†å…¶å®æ˜¯å¯ä»¥æŠŠä¸šåŠ¡é€»è¾‘æå–å‡ºæ¥æˆä¸ºä¸€ä¸ª Hookã€‚æ¯”å¦‚ä¸‹é¢çš„ä»£ç ï¼š</p><pre><code>import { useState, useCallback }from 'react';
 
function useCounter() {
  // å®šä¹‰ count è¿™ä¸ª state ç”¨äºä¿å­˜å½“å‰æ•°å€¼
  const [count, setCount] = useState(0);
  // å®ç°åŠ  1 çš„æ“ä½œ
  const increment = useCallback(() =&gt; setCount(count + 1), [count]);
  // å®ç°å‡ 1 çš„æ“ä½œ
  const decrement = useCallback(() =&gt; setCount(count - 1), [count]);
  // é‡ç½®è®¡æ•°å™¨
  const reset = useCallback(() =&gt; setCount(0), []);
  
  // å°†ä¸šåŠ¡é€»è¾‘çš„æ“ä½œ export å‡ºå»ä¾›è°ƒç”¨è€…ä½¿ç”¨
  return { count, increment, decrement, reset };
}
</code></pre><p>æœ‰äº†è¿™ä¸ª Hookï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨ç»„ä»¶ä¸­ä½¿ç”¨å®ƒï¼Œæ¯”å¦‚ä¸‹é¢çš„ä»£ç ï¼š</p><pre><code>import React from 'react';

function Counter() {
  // è°ƒç”¨è‡ªå®šä¹‰ Hook
  const { count, increment, decrement, reset } = useCounter();

  // æ¸²æŸ“ UI
  return (
    &lt;div&gt;
      &lt;button onClick={decrement}&gt; - &lt;/button&gt;
      &lt;p&gt;{count}&lt;/p&gt;
      &lt;button onClick={increment}&gt; + &lt;/button&gt;
      &lt;button onClick={reset}&gt; reset &lt;/button&gt;
    &lt;/div&gt;
  );
}
</code></pre><p>åœ¨è¿™æ®µä»£ç ä¸­ï¼Œæˆ‘ä»¬æŠŠåŸæ¥åœ¨å‡½æ•°ç»„ä»¶ä¸­å®ç°çš„é€»è¾‘æå–äº†å‡ºæ¥ï¼Œæˆä¸ºä¸€ä¸ªå•ç‹¬çš„ Hookï¼Œ<strong>ä¸€æ–¹é¢èƒ½è®©è¿™ä¸ªé€»è¾‘å¾—åˆ°é‡ç”¨ï¼Œå¦å¤–ä¸€æ–¹é¢ä¹Ÿèƒ½è®©ä»£ç æ›´åŠ è¯­ä¹‰åŒ–</strong>ï¼Œ<strong>å¹¶ä¸”æ˜“äºç†è§£å’Œç»´æŠ¤ã€‚</strong></p><p>ä»è¿™ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°è‡ªå®šä¹‰ Hooks çš„ä¸¤ä¸ªç‰¹ç‚¹ï¼š</p><ol>
<li>åå­—ä¸€å®šæ˜¯ä»¥ use å¼€å¤´çš„å‡½æ•°ï¼Œè¿™æ · React æ‰èƒ½å¤ŸçŸ¥é“è¿™ä¸ªå‡½æ•°æ˜¯ä¸€ä¸ª Hookï¼›</li>
<li>å‡½æ•°å†…éƒ¨ä¸€å®šè°ƒç”¨äº†å…¶å®ƒçš„ Hooksï¼Œå¯ä»¥æ˜¯å†…ç½®çš„ Hooksï¼Œä¹Ÿå¯ä»¥æ˜¯å…¶å®ƒè‡ªå®šä¹‰ Hooksã€‚è¿™æ ·æ‰èƒ½å¤Ÿè®©ç»„ä»¶åˆ·æ–°ï¼Œæˆ–è€…å»äº§ç”Ÿå‰¯ä½œç”¨ã€‚</li>
</ol><p>å½“ç„¶ï¼Œè¿™åªæ˜¯ä¸€ä¸ªéå¸¸ç®€å•çš„ä¾‹å­ï¼Œå®ç°äº†è®¡æ•°å™¨ä¸šåŠ¡é€»è¾‘çš„æ‹†åˆ†å’Œé‡ç”¨ã€‚ä¸è¿‡é€šè¿‡è¿™ä¸ªä¾‹å­ï¼Œä½ ä¹Ÿçœ‹åˆ°äº†åˆ›å»ºè‡ªå®šä¹‰ Hook æ˜¯å¦‚æ­¤ä¹‹ç®€å•ï¼Œå’Œè¿‡å»çš„é«˜é˜¶ç»„ä»¶è®¾è®¡æ¨¡å¼ç›¸æ¯”ï¼Œç®€ç›´æ˜¯å¤©ä¸Šåœ°ä¸‹çš„åŒºåˆ«ã€‚ä¹Ÿæ­£å› å¦‚æ­¤ï¼ŒHooks å‡ºç°åå°±å¾—åˆ°äº†è¿…é€Ÿçš„æ™®åŠã€‚</p><p>é‚£ä¹ˆï¼Œåœ¨æ—¥å¸¸å¼€å‘çš„æ—¶å€™ï¼Œé™¤äº†è§£è€¦ä¸šåŠ¡ç›¸å…³çš„é€»è¾‘ï¼Œè¿˜æœ‰å“ªäº›åœºæ™¯éœ€è¦å»åˆ›å»ºè‡ªå®šä¹‰ Hooks å‘¢ï¼Ÿä¸‹é¢æˆ‘å°±å†ç»™ä½ ä»‹ç»ä¸‰ä¸ªå…¸å‹çš„ä¸šåŠ¡åœºæ™¯ã€‚</p><h1>å°è£…é€šç”¨é€»è¾‘ï¼šuseAsync</h1><p>åœ¨ç»„ä»¶çš„å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæœ‰ä¸€äº›å¸¸ç”¨çš„é€šç”¨é€»è¾‘ã€‚è¿‡å»å¯èƒ½ä¼šå› ä¸ºé€»è¾‘é‡ç”¨æ¯”è¾ƒç¹çï¼Œè€Œç»å¸¸åœ¨æ¯ä¸ªç»„ä»¶ä¸­å»è‡ªå·±å®ç°ï¼Œé€ æˆç»´æŠ¤çš„å›°éš¾ã€‚ä½†ç°åœ¨æœ‰äº† Hooksï¼Œå°±å¯ä»¥å°†æ›´å¤šçš„é€šç”¨é€»è¾‘é€šè¿‡ Hooks çš„å½¢å¼è¿›è¡Œå°è£…ï¼Œæ–¹ä¾¿è¢«ä¸åŒçš„ç»„ä»¶é‡ç”¨ã€‚</p><p>æ¯”å¦‚è¯´ï¼Œåœ¨æ—¥å¸¸ UI çš„å¼€å‘ä¸­ï¼Œæœ‰ä¸€ä¸ªæœ€å¸¸è§çš„éœ€æ±‚ï¼š<strong>å‘èµ·å¼‚æ­¥è¯·æ±‚è·å–æ•°æ®å¹¶æ˜¾ç¤ºåœ¨ç•Œé¢ä¸Š</strong>ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¸ä»…è¦å…³å¿ƒè¯·æ±‚æ­£ç¡®è¿”å›æ—¶ï¼ŒUI ä¼šå¦‚ä½•å±•ç°æ•°æ®ï¼›è¿˜éœ€è¦å¤„ç†è¯·æ±‚å‡ºé”™ï¼Œä»¥åŠå…³æ³¨ Loading çŠ¶æ€åœ¨ UI ä¸Šå¦‚ä½•æ˜¾ç¤ºã€‚</p><p>æˆ‘ä»¬å¯ä»¥é‡æ–°çœ‹ä¸‹åœ¨ç¬¬1è®²ä¸­çœ‹åˆ°çš„å¼‚æ­¥è¯·æ±‚çš„ä¾‹å­ï¼Œä» Server ç«¯è·å–ç”¨æˆ·åˆ—è¡¨ï¼Œå¹¶æ˜¾ç¤ºåœ¨ç•Œé¢ä¸Šï¼š</p><pre><code>import React from &quot;react&quot;;

export default function UserList() {
  // ä½¿ç”¨ä¸‰ä¸ª state åˆ†åˆ«ä¿å­˜ç”¨æˆ·åˆ—è¡¨ï¼Œloading çŠ¶æ€å’Œé”™è¯¯çŠ¶æ€
  const [users, setUsers] = React.useState([]);
  const [loading, setLoading] = React.useState(false);
  const [error, setError] = React.useState(null);

  // å®šä¹‰è·å–ç”¨æˆ·çš„å›è°ƒå‡½æ•°
  const fetchUsers = async () =&gt; {
    setLoading(true);
    try {
      const res = await fetch(&quot;https://reqres.in/api/users/&quot;);
      const json = await res.json();
      // è¯·æ±‚æˆåŠŸåå°†ç”¨æˆ·æ•°æ®æ”¾å…¥ state
      setUsers(json.data);
    } catch (err) {
      // è¯·æ±‚å¤±è´¥å°†é”™è¯¯çŠ¶æ€æ”¾å…¥ state
      setError(err);
    }
    setLoading(false);
  };

  return (
    &lt;div className=&quot;user-list&quot;&gt;
      &lt;button onClick={fetchUsers} disabled={loading}&gt;
        {loading ? &quot;Loading...&quot; : &quot;Show Users&quot;}
      &lt;/button&gt;
      {error &amp;&amp; 
        &lt;div style={{ color: &quot;red&quot; }}&gt;Failed: {String(error)}&lt;/div&gt;
      }
      &lt;br /&gt;
      &lt;ul&gt;
        {users &amp;&amp; users.length &gt; 0 &amp;&amp;
          users.map((user) =&gt; {
            return &lt;li key={user.id}&gt;{user.first_name}&lt;/li&gt;;
          })}
      &lt;/ul&gt;
    &lt;/div&gt;
  );
}
</code></pre><p>åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å®šä¹‰äº† usersã€loading å’Œ error ä¸‰ä¸ªçŠ¶æ€ã€‚å¦‚æœæˆ‘ä»¬åœ¨å¼‚æ­¥è¯·æ±‚çš„ä¸åŒé˜¶æ®µå»è®¾ç½®ä¸åŒçš„çŠ¶æ€ï¼Œè¿™æ · UI æœ€ç»ˆèƒ½å¤Ÿæ ¹æ®è¿™äº›çŠ¶æ€å±•ç°å‡ºæ¥ã€‚åœ¨æ¯ä¸ªéœ€è¦å¼‚æ­¥è¯·æ±‚çš„ç»„ä»¶ä¸­ï¼Œå…¶å®éƒ½éœ€è¦é‡å¤ç›¸åŒçš„é€»è¾‘ã€‚</p><p>äº‹å®ä¸Šï¼Œåœ¨å¤„ç†è¿™ç±»è¯·æ±‚çš„æ—¶å€™ï¼Œæ¨¡å¼éƒ½æ˜¯ç±»ä¼¼çš„ï¼Œé€šå¸¸éƒ½ä¼šéµå¾ªä¸‹é¢æ­¥éª¤ï¼š</p><ol>
<li>åˆ›å»º dataï¼Œloadingï¼Œerror è¿™3ä¸ª stateï¼›</li>
<li>è¯·æ±‚å‘å‡ºåï¼Œè®¾ç½® loading state ä¸º trueï¼›</li>
<li>è¯·æ±‚æˆåŠŸåï¼Œå°†è¿”å›çš„æ•°æ®æ”¾åˆ°æŸä¸ª state ä¸­ï¼Œå¹¶å°† loading state è®¾ä¸º falseï¼›</li>
<li>è¯·æ±‚å¤±è´¥åï¼Œè®¾ç½® error state ä¸º trueï¼Œå¹¶å°† loading state è®¾ä¸º falseã€‚</li>
</ol><p>æœ€åï¼ŒåŸºäº dataã€loadingã€error è¿™3ä¸ª state çš„æ•°æ®ï¼ŒUI å°±å¯ä»¥æ­£ç¡®åœ°æ˜¾ç¤ºæ•°æ®ï¼Œæˆ–è€… loadingã€error è¿™äº›åé¦ˆç»™ç”¨æˆ·äº†ã€‚</p><p>æ‰€ä»¥ï¼Œé€šè¿‡åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰ Hookï¼Œå¯ä»¥å¾ˆå¥½åœ°å°†è¿™æ ·çš„é€»è¾‘æå–å‡ºæ¥ï¼Œæˆä¸ºä¸€ä¸ªå¯é‡ç”¨çš„æ¨¡å—ã€‚æ¯”å¦‚ä»£ç å¯ä»¥è¿™æ ·å®ç°ï¼š</p><pre><code>import { useState } from 'react';

const useAsync = (asyncFunction) =&gt; {
  // è®¾ç½®ä¸‰ä¸ªå¼‚æ­¥é€»è¾‘ç›¸å…³çš„ state
  const [data, setData] = useState(null);
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState(null);
  // å®šä¹‰ä¸€ä¸ª callback ç”¨äºæ‰§è¡Œå¼‚æ­¥é€»è¾‘
  const execute = useCallback(() =&gt; {
    // è¯·æ±‚å¼€å§‹æ—¶ï¼Œè®¾ç½® loading ä¸º trueï¼Œæ¸…é™¤å·²æœ‰æ•°æ®å’Œ error çŠ¶æ€
    setLoading(true);
    setData(null);
    setError(null);
    return asyncFunction()
      .then((response) =&gt; {
        // è¯·æ±‚æˆåŠŸæ—¶ï¼Œå°†æ•°æ®å†™è¿› stateï¼Œè®¾ç½® loading ä¸º false
        setData(response);
        setLoading(false);
      })
      .catch((error) =&gt; {
        // è¯·æ±‚å¤±è´¥æ—¶ï¼Œè®¾ç½® loading ä¸º falseï¼Œå¹¶è®¾ç½®é”™è¯¯çŠ¶æ€
        setError(error);
        setLoading(false);
      });
  }, [asyncFunction]);

  return { execute, loading, data, error };
};
</code></pre><p>é‚£ä¹ˆæœ‰äº†è¿™ä¸ª Hookï¼Œæˆ‘ä»¬åœ¨ç»„ä»¶ä¸­å°±åªéœ€è¦å…³å¿ƒä¸ä¸šåŠ¡é€»è¾‘ç›¸å…³çš„éƒ¨åˆ†ã€‚æ¯”å¦‚ä»£ç å¯ä»¥ç®€åŒ–æˆè¿™æ ·çš„å½¢å¼ï¼š</p><pre><code>import React from &quot;react&quot;;
import useAsync from './useAsync';

export default function UserList() {
  // é€šè¿‡ useAsync è¿™ä¸ªå‡½æ•°ï¼Œåªéœ€è¦æä¾›å¼‚æ­¥é€»è¾‘çš„å®ç°
  const {
    execute: fetchUsers,
    data: users,
    loading,
    error,
  } = useAsync(async () =&gt; {
    const res = await fetch(&quot;https://reqres.in/api/users/&quot;);
    const json = await res.json();
    return json.data;
  });
  
  return (
    // æ ¹æ®çŠ¶æ€æ¸²æŸ“ UI...
  );
}
</code></pre><p>é€šè¿‡è¿™ä¸ªä¾‹å­å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬<strong>åˆ©ç”¨äº† Hooks èƒ½å¤Ÿç®¡ç† React ç»„ä»¶çŠ¶æ€çš„èƒ½åŠ›ï¼Œå°†ä¸€ä¸ªç»„ä»¶ä¸­çš„æŸä¸€éƒ¨åˆ†çŠ¶æ€ç‹¬ç«‹å‡ºæ¥ï¼Œä»è€Œå®ç°äº†é€šç”¨é€»è¾‘çš„é‡ç”¨</strong>ã€‚</p><p>ä¸è¿‡åœ¨è¿™é‡Œä½ å¯èƒ½ä¼šæœ‰ä¸€ä¸ªç–‘é—®ï¼šè¿™ç§ç±»å‹çš„å°è£…æˆ‘å†™ä¸€ä¸ªå·¥å…·ç±»ä¸å°±å¯ä»¥äº†ï¼Ÿä¸ºä»€ä¹ˆä¸€å®šè¦é€šè¿‡ Hooks è¿›è¡Œå°è£…å‘¢ï¼Ÿ</p><p>ç­”æ¡ˆå¾ˆå®¹æ˜“å°±èƒ½æƒ³åˆ°ã€‚å› ä¸ºåœ¨ Hooks ä¸­ï¼Œä½ å¯ä»¥ç®¡ç†å½“å‰ç»„ä»¶çš„ stateï¼Œä»è€Œå°†æ›´å¤šçš„é€»è¾‘å†™åœ¨å¯é‡ç”¨çš„ Hooks ä¸­ã€‚ä½†æ˜¯è¦çŸ¥é“ï¼Œåœ¨æ™®é€šçš„å·¥å…·ç±»ä¸­æ˜¯æ— æ³•ç›´æ¥ä¿®æ”¹ç»„ä»¶ state çš„ï¼Œé‚£ä¹ˆä¹Ÿå°±æ— æ³•åœ¨æ•°æ®æ”¹å˜çš„æ—¶å€™è§¦å‘ç»„ä»¶çš„é‡æ–°æ¸²æŸ“ã€‚</p><h1>ç›‘å¬æµè§ˆå™¨çŠ¶æ€ï¼šuseScroll</h1><p>è™½ç„¶ React ç»„ä»¶åŸºæœ¬ä¸Šä¸éœ€è¦å…³å¿ƒå¤ªå¤šçš„æµè§ˆå™¨ APIï¼Œä½†æ˜¯æœ‰æ—¶å€™å´æ˜¯å¿…é¡»çš„ï¼š</p><ul>
<li>ç•Œé¢éœ€è¦æ ¹æ®åœ¨çª—å£å¤§å°å˜åŒ–é‡æ–°å¸ƒå±€ï¼›</li>
<li>åœ¨é¡µé¢æ»šåŠ¨æ—¶ï¼Œéœ€è¦æ ¹æ®æ»šåŠ¨æ¡ä½ç½®ï¼Œæ¥å†³å®šæ˜¯å¦æ˜¾ç¤ºä¸€ä¸ªâ€œè¿”å›é¡¶éƒ¨â€çš„æŒ‰é’®ã€‚</li>
</ul><p>è¿™éƒ½éœ€è¦ç”¨åˆ°æµè§ˆå™¨çš„ API æ¥ç›‘å¬è¿™äº›çŠ¶æ€çš„å˜åŒ–ã€‚é‚£ä¹ˆæˆ‘ä»¬å°±ä»¥æ»šåŠ¨æ¡ä½ç½®çš„åœºæ™¯ä¸ºä¾‹ï¼Œæ¥çœ‹çœ‹åº”è¯¥å¦‚ä½•ç”¨ Hooks ä¼˜é›…åœ°ç›‘å¬æµè§ˆå™¨çŠ¶æ€ã€‚</p><p>æ­£å¦‚ Hooks çš„å­—é¢æ„æ€æ˜¯â€œé’©å­â€ï¼Œå®ƒå¸¦æ¥çš„ä¸€å¤§å¥½å¤„å°±æ˜¯ï¼š<strong>å¯ä»¥è®© React çš„ç»„ä»¶ç»‘å®šåœ¨ä»»ä½•å¯èƒ½çš„æ•°æ®æºä¸Šã€‚è¿™æ ·å½“æ•°æ®æºå‘ç”Ÿå˜åŒ–æ—¶ï¼Œç»„ä»¶èƒ½å¤Ÿè‡ªåŠ¨åˆ·æ–°</strong>ã€‚æŠŠè¿™ä¸ªå¥½å¤„å¯¹åº”åˆ°æ»šåŠ¨æ¡ä½ç½®è¿™ä¸ªåœºæ™¯å°±æ˜¯ï¼šç»„ä»¶éœ€è¦ç»‘å®šåˆ°å½“å‰æ»šåŠ¨æ¡çš„ä½ç½®æ•°æ®ä¸Šã€‚</p><p>è™½ç„¶è¿™ä¸ªé€»è¾‘åœ¨å‡½æ•°ç»„ä»¶ä¸­å¯ä»¥ç›´æ¥å®ç°ï¼Œä½†æ˜¯æŠŠè¿™ä¸ªé€»è¾‘å®ç°ä¸ºä¸€ä¸ªç‹¬ç«‹çš„Hooksï¼Œæ—¢å¯ä»¥è¾¾åˆ°é€»è¾‘é‡ç”¨ï¼Œåœ¨è¯­ä¹‰ä¸Šä¹Ÿæ›´åŠ æ¸…æ™°ã€‚è¿™ä¸ªå’Œä¸Šé¢çš„ useAsync çš„ä½œç”¨æ˜¯éå¸¸ç±»ä¼¼çš„ã€‚</p><p>æˆ‘ä»¬å¯ä»¥ç›´æ¥æ¥çœ‹è¿™ä¸ª Hooks åº”è¯¥å¦‚ä½•å®ç°ï¼š</p><pre><code>import { useState, useEffect } from 'react';

// è·å–æ¨ªå‘ï¼Œçºµå‘æ»šåŠ¨æ¡ä½ç½®
const getPosition = () =&gt; {
  return {
    x: document.body.scrollLeft,
    y: document.body.scrollTop,
  };
};
const useScroll = () =&gt; {
  // å®šä¸€ä¸ª position è¿™ä¸ª state ä¿å­˜æ»šåŠ¨æ¡ä½ç½®
  const [position, setPosition] = useState(getPosition());
  useEffect(() =&gt; {
    const handler = () =&gt; {
      setPosition(getPosition(document));
    };
    // ç›‘å¬ scroll äº‹ä»¶ï¼Œæ›´æ–°æ»šåŠ¨æ¡ä½ç½®
    document.addEventListener(&quot;scroll&quot;, handler);
    return () =&gt; {
      // ç»„ä»¶é”€æ¯æ—¶ï¼Œå–æ¶ˆäº‹ä»¶ç›‘å¬
      document.removeEventListener(&quot;scroll&quot;, handler);
    };
  }, []);
  return position;
};

</code></pre><p>æœ‰äº†è¿™ä¸ª Hookï¼Œä½ å°±å¯ä»¥éå¸¸æ–¹ä¾¿åœ°ç›‘å¬å½“å‰æµè§ˆå™¨çª—å£çš„æ»šåŠ¨æ¡ä½ç½®äº†ã€‚æ¯”å¦‚ä¸‹é¢çš„ä»£ç å°±å±•ç¤ºäº†â€œè¿”å›é¡¶éƒ¨â€è¿™æ ·ä¸€ä¸ªåŠŸèƒ½çš„å®ç°ï¼š</p><pre><code>import React, { useCallback } from 'react';
import useScroll from './useScroll';

function ScrollTop() {
  const { y } = useScroll();

  const goTop = useCallback(() =&gt; {
    document.body.scrollTop = 0;
  }, []);

  const style = {
    position: &quot;fixed&quot;,
    right: &quot;10px&quot;,
    bottom: &quot;10px&quot;,
  };
  // å½“æ»šåŠ¨æ¡ä½ç½®çºµå‘è¶…è¿‡ 300 æ—¶ï¼Œæ˜¾ç¤ºè¿”å›é¡¶éƒ¨æŒ‰é’®
  if (y &gt; 300) {
    return (
      &lt;button onClick={goTop} style={style}&gt;
        Back to Top
      &lt;/button&gt;
    );
  }
  // å¦åˆ™ä¸ render ä»»ä½• UI
  return null;
}

</code></pre><p>é€šè¿‡è¿™ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬çœ‹åˆ°äº†å¦‚ä½•å°†æµè§ˆå™¨çŠ¶æ€å˜æˆå¯è¢« React ç»„ä»¶ç»‘å®šçš„æ•°æ®æºï¼Œä»è€Œåœ¨ä½¿ç”¨ä¸Šæ›´åŠ ä¾¿æ·å’Œç›´è§‚ã€‚å½“ç„¶ï¼Œé™¤äº†çª—å£å¤§å°ã€æ»šåŠ¨æ¡ä½ç½®è¿™äº›çŠ¶æ€ï¼Œè¿˜æœ‰å…¶å®ƒä¸€äº›æ•°æ®ä¹Ÿå¯ä»¥è¿™æ ·æ“ä½œï¼Œæ¯”å¦‚ cookiesï¼ŒlocalStorage, URLï¼Œç­‰ç­‰ã€‚ä½ éƒ½å¯ä»¥é€šè¿‡è¿™æ ·çš„æ–¹æ³•æ¥å®ç°ã€‚</p><h1>æ‹†åˆ†å¤æ‚ç»„ä»¶</h1><p>å‡½æ•°ç»„ä»¶è™½ç„¶å¾ˆå®¹æ˜“ä¸Šæ‰‹ï¼Œä½†æ˜¯å½“æŸä¸ªç»„ä»¶åŠŸèƒ½è¶Šæ¥è¶Šå¤æ‚çš„æ—¶å€™ï¼Œæˆ‘å‘ç°å¾ˆå¤šåŒå­¦ä¼šå‡ºç°ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯ç»„ä»¶ä»£ç å¾ˆå®¹æ˜“å˜å¾—ç‰¹åˆ«é•¿ï¼Œæ¯”å¦‚è¶…è¿‡500è¡Œï¼Œç”šè‡³1000è¡Œã€‚è¿™å°±å˜å¾—éå¸¸éš¾ç»´æŠ¤äº†ã€‚</p><p>è®¾æƒ³å½“ä½ æ¥æ‰‹æŸä¸ªé¡¹ç›®ï¼Œå‘ç°ä¸€ä¸ªå‡½æ•°åŠ¨è¾„å°±è¶…è¿‡äº†500è¡Œï¼Œé‚£ä¼šæ˜¯ä»€ä¹ˆæ„Ÿå—ï¼Ÿæ‰€ä»¥<strong>â€œä¿æŒæ¯ä¸ªå‡½æ•°çš„çŸ­å°â€</strong>è¿™æ ·é€šç”¨çš„æœ€ä½³å®è·µï¼ŒåŒæ ·é€‚ç”¨äºå‡½æ•°ç»„ä»¶ã€‚åªæœ‰è¿™æ ·ï¼Œæ‰èƒ½è®©ä»£ç å§‹ç»ˆæ˜“äºç†è§£å’Œç»´æŠ¤ã€‚</p><p>é‚£ä¹ˆç°åœ¨çš„å…³é”®é—®é¢˜å°±æ˜¯ï¼Œæ€ä¹ˆæ‰èƒ½è®©å‡½æ•°ç»„ä»¶ä¸ä¼šå¤ªè¿‡å†—é•¿å‘¢ï¼Ÿåšæ³•å¾ˆç®€å•ï¼Œå°±æ˜¯<strong>å°½é‡å°†ç›¸å…³çš„é€»è¾‘åšæˆç‹¬ç«‹çš„ Hooksï¼Œç„¶ååœ¨å‡½æ•°ç»„ä¸­ä½¿ç”¨è¿™äº› Hooksï¼Œé€šè¿‡å‚æ•°ä¼ é€’å’Œè¿”å›å€¼è®© Hooks ä¹‹é—´å®Œæˆäº¤äº’</strong>ã€‚</p><p>è¿™é‡Œå¯ä»¥æ³¨æ„ä¸€ç‚¹ï¼Œæ‹†åˆ†é€»è¾‘çš„ç›®çš„ä¸ä¸€å®šæ˜¯ä¸ºäº†é‡ç”¨ï¼Œè€Œå¯ä»¥æ˜¯ä»…ä»…ä¸ºäº†ä¸šåŠ¡é€»è¾‘çš„éš”ç¦»ã€‚æ‰€ä»¥åœ¨è¿™ä¸ªåœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬ä¸ä¸€å®šè¦æŠŠ Hooks æ”¾åˆ°ç‹¬ç«‹çš„æ–‡ä»¶ä¸­ï¼Œè€Œæ˜¯å¯ä»¥å’Œå‡½æ•°ç»„ä»¶å†™åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­ã€‚è¿™ä¹ˆåšçš„åŸå› å°±åœ¨äºï¼Œè¿™äº› Hooks æ˜¯å’Œå½“å‰å‡½æ•°ç»„ä»¶ç´§å¯†ç›¸å…³çš„ï¼Œæ‰€ä»¥å†™åˆ°ä¸€èµ·ï¼Œåè€Œæ›´å®¹æ˜“é˜…è¯»å’Œç†è§£ã€‚</p><p>ä¸ºäº†è®©ä½ å¯¹è¿™ä¸€ç‚¹æœ‰æ›´ç›´è§‚çš„æ„Ÿå—ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªä¾‹å­ã€‚è®¾æƒ³ç°åœ¨æœ‰è¿™æ ·ä¸€ä¸ªéœ€æ±‚ï¼šæˆ‘ä»¬éœ€è¦å±•ç¤ºä¸€ä¸ªåšå®¢æ–‡ç« çš„åˆ—è¡¨ï¼Œå¹¶ä¸”æœ‰ä¸€åˆ—è¦æ˜¾ç¤ºæ–‡ç« çš„åˆ†ç±»ã€‚åŒæ—¶ï¼Œæˆ‘ä»¬è¿˜éœ€è¦æä¾›è¡¨æ ¼è¿‡æ»¤åŠŸèƒ½ï¼Œä»¥ä¾¿èƒ½å¤Ÿåªæ˜¾ç¤ºæŸä¸ªåˆ†ç±»çš„æ–‡ç« ã€‚</p><p>ä¸ºäº†æ”¯æŒè¿‡æ»¤åŠŸèƒ½ï¼Œåç«¯æä¾›äº†ä¸¤ä¸ª APIï¼šä¸€ä¸ªç”¨äºè·å–æ–‡ç« çš„åˆ—è¡¨ï¼Œå¦ä¸€ä¸ªç”¨äºè·å–æ‰€æœ‰çš„åˆ†ç±»ã€‚è¿™å°±éœ€è¦æˆ‘ä»¬åœ¨å‰ç«¯å°†æ–‡ç« åˆ—è¡¨è¿”å›çš„æ•°æ®åˆ†ç±» ID æ˜ å°„åˆ°åˆ†ç±»çš„åå­—ï¼Œä»¥ä¾¿æ˜¾ç¤ºåœ¨åˆ—è¡¨é‡Œã€‚</p><p>è¿™æ—¶å€™ï¼Œå¦‚æœæŒ‰ç…§ç›´è§‚çš„æ€è·¯å»å®ç°ï¼Œé€šå¸¸éƒ½ä¼šæŠŠé€»è¾‘éƒ½å†™åœ¨ä¸€ä¸ªç»„ä»¶é‡Œï¼Œæ¯”å¦‚ç±»ä¼¼ä¸‹é¢çš„ä»£ç ï¼š</p><pre><code>function BlogList() {
  // è·å–æ–‡ç« åˆ—è¡¨...
  // è·å–åˆ†ç±»åˆ—è¡¨...
  // ç»„åˆæ–‡ç« æ•°æ®å’Œåˆ†ç±»æ•°æ®...
  // æ ¹æ®é€‰æ‹©çš„åˆ†ç±»è¿‡æ»¤æ–‡ç« ...
  
  // æ¸²æŸ“ UI ...
}
</code></pre><p>ä½ å¯ä»¥æƒ³ä¸€ä¸‹ï¼Œå¦‚æœä½ æ˜¯åœ¨å†™ä¸€ä¸ªå…¶å®ƒçš„æ™®é€šå‡½æ•°ï¼Œä¼šä¸ä¼šå°†å…¶ä¸­ä¸€äº›é€»è¾‘å†™æˆå•ç‹¬çš„å‡½æ•°å‘¢ï¼Ÿç›¸ä¿¡ç­”æ¡ˆæ˜¯è‚¯å®šçš„ï¼Œå› ä¸ºè¿™æ ·åšå¯ä»¥éš”ç¦»ä¸šåŠ¡é€»è¾‘ï¼Œè®©ä»£ç æ›´åŠ æ¸…æ¥šã€‚</p><p>ä½†æˆ‘å´å‘ç°å¾ˆå¤šåŒå­¦åœ¨å†™å‡½æ•°ç»„ä»¶æ—¶æ²¡æœ‰æ„è¯†åˆ° Hooks å°±æ˜¯æ™®é€šçš„å‡½æ•°ï¼Œæ‰€ä»¥é€šå¸¸ä¸ä¼šè¿™ä¹ˆå»åšéš”ç¦»ï¼Œè€Œæ˜¯ä¹ æƒ¯äºä¸€è·¯å†™ä¸‹æ¥ï¼Œè¿™å°±ä¼šé€ æˆæŸä¸ªå‡½æ•°ç»„ä»¶ç‰¹åˆ«é•¿ã€‚è¿˜æ˜¯è€ç”Ÿå¸¸è°ˆçš„é‚£å¥è¯ï¼Œ<strong>æ”¹å˜è¿™ä¸ªçŠ¶å†µçš„å…³é”®ä»ç„¶åœ¨äºå¼€å‘æ€è·¯çš„è½¬å˜</strong>ã€‚æˆ‘ä»¬è¦çœŸæ­£<strong>æŠŠ Hooks å°±çœ‹æˆæ™®é€šçš„å‡½æ•°ï¼Œèƒ½éš”ç¦»çš„å°½é‡å»åšéš”ç¦»</strong>ï¼Œä»è€Œè®©ä»£ç æ›´åŠ æ¨¡å—åŒ–ï¼Œæ›´æ˜“äºç†è§£å’Œç»´æŠ¤ã€‚</p><p>é‚£ä¹ˆé’ˆå¯¹è¿™æ ·ä¸€ä¸ªåŠŸèƒ½ï¼Œæˆ‘ä»¬ç”šè‡³å¯ä»¥å°†å…¶æ‹†åˆ†æˆ4ä¸ª Hooksï¼Œæ¯ä¸€ä¸ª Hook éƒ½å°½é‡å°ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><pre><code>import React, { useEffect, useCallback, useMemo, useState } from &quot;react&quot;;
import { Select, Table } from &quot;antd&quot;;
import _ from &quot;lodash&quot;;
import useAsync from &quot;./useAsync&quot;;

const endpoint = &quot;https://myserver.com/api/&quot;;
const useArticles = () =&gt; {
  // ä½¿ç”¨ä¸Šé¢åˆ›å»ºçš„ useAsync è·å–æ–‡ç« åˆ—è¡¨
  const { execute, data, loading, error } = useAsync(
    useCallback(async () =&gt; {
      const res = await fetch(`${endpoint}/posts`);
      return await res.json();
    }, []),
  );
  // æ‰§è¡Œå¼‚æ­¥è°ƒç”¨
  useEffect(() =&gt; execute(), [execute]);
  // è¿”å›è¯­ä¹‰åŒ–çš„æ•°æ®ç»“æ„
  return {
    articles: data,
    articlesLoading: loading,
    articlesError: error,
  };
};
const useCategories = () =&gt; {
  // ä½¿ç”¨ä¸Šé¢åˆ›å»ºçš„ useAsync è·å–åˆ†ç±»åˆ—è¡¨
  const { execute, data, loading, error } = useAsync(
    useCallback(async () =&gt; {
      const res = await fetch(`${endpoint}/categories`);
      return await res.json();
    }, []),
  );
  // æ‰§è¡Œå¼‚æ­¥è°ƒç”¨
  useEffect(() =&gt; execute(), [execute]);

  // è¿”å›è¯­ä¹‰åŒ–çš„æ•°æ®ç»“æ„
  return {
    categories: data,
    categoriesLoading: loading,
    categoriesError: error,
  };
};
const useCombinedArticles = (articles, categories) =&gt; {
  // å°†æ–‡ç« æ•°æ®å’Œåˆ†ç±»æ•°æ®ç»„åˆåˆ°ä¸€èµ·
  return useMemo(() =&gt; {
    // å¦‚æœæ²¡æœ‰æ–‡ç« æˆ–è€…åˆ†ç±»æ•°æ®åˆ™è¿”å› null
    if (!articles || !categories) return null;
    return articles.map((article) =&gt; {
      return {
        ...article,
        category: categories.find(
          (c) =&gt; String(c.id) === String(article.categoryId),
        ),
      };
    });
  }, [articles, categories]);
};
const useFilteredArticles = (articles, selectedCategory) =&gt; {
  // å®ç°æŒ‰ç…§åˆ†ç±»è¿‡æ»¤
  return useMemo(() =&gt; {
    if (!articles) return null;
    if (!selectedCategory) return articles;
    return articles.filter((article) =&gt; {
      console.log(&quot;filter: &quot;, article.categoryId, selectedCategory);
      return String(article?.category?.name) === String(selectedCategory);
    });
  }, [articles, selectedCategory]);
};

const columns = [
  { dataIndex: &quot;title&quot;, title: &quot;Title&quot; },
  { dataIndex: [&quot;category&quot;, &quot;name&quot;], title: &quot;Category&quot; },
];

export default function BlogList() {
  const [selectedCategory, setSelectedCategory] = useState(null);
  // è·å–æ–‡ç« åˆ—è¡¨
  const { articles, articlesError } = useArticles();
  // è·å–åˆ†ç±»åˆ—è¡¨
  const { categories, categoriesError } = useCategories();
  // ç»„åˆæ•°æ®
  const combined = useCombinedArticles(articles, categories);
  // å®ç°è¿‡æ»¤
  const result = useFilteredArticles(combined, selectedCategory);

  // åˆ†ç±»ä¸‹æ‹‰æ¡†é€‰é¡¹ç”¨äºè¿‡æ»¤
  const options = useMemo(() =&gt; {
    const arr = _.uniqBy(categories, (c) =&gt; c.name).map((c) =&gt; ({
      value: c.name,
      label: c.name,
    }));
    arr.unshift({ value: null, label: &quot;All&quot; });
    return arr;
  }, [categories]);

  // å¦‚æœå‡ºé”™ï¼Œç®€å•è¿”å› Failed
  if (articlesError || categoriesError) return &quot;Failed&quot;;

  // å¦‚æœæ²¡æœ‰ç»“æœï¼Œè¯´æ˜æ­£åœ¨åŠ è½½
  if (!result) return &quot;Loading...&quot;;

  return (
    &lt;div&gt;
      &lt;Select
        value={selectedCategory}
        onChange={(value) =&gt; setSelectedCategory(value)}
        options={options}
        style={{ width: &quot;200px&quot; }}
        placeholder=&quot;Select a category&quot;
      /&gt;
      &lt;Table dataSource={result} columns={columns} /&gt;
    &lt;/div&gt;
  );
}
</code></pre><p>é€šè¿‡è¿™æ ·çš„æ–¹å¼ï¼Œæˆ‘ä»¬å°±æŠŠä¸€ä¸ªè¾ƒä¸ºå¤æ‚çš„é€»è¾‘æ‹†åˆ†æˆä¸€ä¸ªä¸ªç‹¬ç«‹çš„ Hook äº†ï¼Œä¸ä»…éš”ç¦»äº†ä¸šåŠ¡é€»è¾‘ï¼Œä¹Ÿè®©ä»£ç åœ¨è¯­ä¹‰ä¸Šæ›´åŠ æ˜ç¡®ã€‚æ¯”å¦‚è¯´æœ‰ useArticlesã€useCategories è¿™æ ·ä¸ä¸šåŠ¡ç›¸å…³çš„åå­—ï¼Œå°±éå¸¸æ˜“äºç†è§£ã€‚</p><p>è™½ç„¶è¿™ä¸ªä¾‹å­ä¸­æŠ½å–å‡ºæ¥çš„ Hooks éƒ½éå¸¸ç®€å•ï¼Œç”šè‡³çœ‹ä¸Šå»æ²¡æœ‰å¿…è¦ã€‚ä½†æ˜¯å®é™…çš„å¼€å‘åœºæ™¯ä¸€å®šæ˜¯æ¯”è¿™ä¸ªå¤æ‚çš„ï¼Œæ¯”å¦‚å¯¹äº API è¿”å›çš„æ•°æ®éœ€è¦åšä¸€äº›æ•°æ®çš„è½¬æ¢ï¼Œè¿›è¡Œæ•°æ®çš„ç¼“å­˜ï¼Œç­‰ç­‰ã€‚é‚£ä¹ˆè¿™æ—¶å°±è¦é¿å…æŠŠè¿™äº›é€»è¾‘éƒ½æ”¾åˆ°ä¸€èµ·ï¼Œè€Œæ˜¯å°±è¦æ‹†åˆ†åˆ°ç‹¬ç«‹çš„ Hooksï¼Œä»¥å…äº§ç”Ÿè¿‡äºå¤æ‚çš„ç»„ä»¶ã€‚åˆ°æ—¶å€™ä½ ä¹Ÿå°±æ›´èƒ½æ›´ä½“ä¼šåˆ° Hooks å¸¦ç»™ä½ çš„æƒŠå–œäº†ã€‚</p><h1>å°ç»“</h1><p>å¥½äº†ï¼Œè¿™ä¸€è®²æˆ‘ä¸»è¦ç»™ä½ ä»‹ç»äº†è‡ªå®šä¹‰ Hooks çš„æ¦‚å¿µï¼Œä»¥åŠå…¸å‹çš„å››ä¸ªä½¿ç”¨åœºæ™¯ï¼š</p><ol>
<li>æŠ½å–ä¸šåŠ¡é€»è¾‘ï¼›</li>
<li>å°è£…é€šç”¨é€»è¾‘ï¼›</li>
<li>ç›‘å¬æµè§ˆå™¨çŠ¶æ€ï¼›</li>
<li>æ‹†åˆ†å¤æ‚ç»„ä»¶ã€‚</li>
</ol><p>å…¶ä¸­ï¼Œæˆ‘é€šè¿‡å››ä¸ªæ¡ˆä¾‹æ¥å¸®åŠ©ä½ çœŸæ­£ç†è§£ Hooks ï¼Œå¹¶ç†Ÿç»ƒæŒæ¡è‡ªå®šä¹‰ Hooks çš„ç”¨æ³•ã€‚åº”å§‹ç»ˆè®°å¾—ï¼Œè¦ç”¨Hooks çš„æ€è·¯å»è§£å†³é—®é¢˜ï¼Œå‘æŒ¥ Hooks çš„æœ€å¤§ä»·å€¼ï¼Œå°±æ˜¯è¦ç»å¸¸å»æ€è€ƒå“ªäº›é€»è¾‘åº”è¯¥å°è£…åˆ°ä¸€ä¸ªç‹¬ç«‹çš„ Hookï¼Œä¿è¯æ¯ä¸ª Hook çš„çŸ­å°ç²¾æ‚ï¼Œä»è€Œè®©ä»£ç æ›´åŠ æ¸…æ™°ï¼Œæ˜“äºç†è§£å’Œç»´æŠ¤ã€‚</p><h1>æ€è€ƒé¢˜</h1><p>åœ¨ useCounter è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æ˜¯å›ºå®šè®©æ•°å­—æ¯æ¬¡åŠ ä¸€ã€‚å‡å¦‚è¦åšä¸€ä¸ªæ”¹è¿›ï¼Œå…è®¸çµæ´»é…ç½®ç‚¹å‡»åŠ å·æ—¶åº”è¯¥åŠ å‡ ï¼Œæ¯”å¦‚è¯´æ¯æ¬¡åŠ 10ï¼Œé‚£ä¹ˆåº”è¯¥å¦‚ä½•å®ç°ï¼Ÿ</p><p>æ¬¢è¿åœ¨ç•™è¨€åŒºåˆ†äº«ä½ çš„æ€è€ƒå’Œæƒ³æ³•ï¼Œæˆ‘ä¼šå’Œä½ äº¤æµè®¨è®ºã€‚æˆ‘ä»¬ä¸‹èŠ‚è¯¾å†è§ï¼</p>
<style>
    ul {
      list-style: none;
      display: block;
      list-style-type: disc;
      margin-block-start: 1em;
      margin-block-end: 1em;
      margin-inline-start: 0px;
      margin-inline-end: 0px;
      padding-inline-start: 40px;
    }
    li {
      display: list-item;
      text-align: -webkit-match-parent;
    }
    ._2sjJGcOH_0 {
      list-style-position: inside;
      width: 100%;
      display: -webkit-box;
      display: -ms-flexbox;
      display: flex;
      -webkit-box-orient: horizontal;
      -webkit-box-direction: normal;
      -ms-flex-direction: row;
      flex-direction: row;
      margin-top: 26px;
      border-bottom: 1px solid rgba(233,233,233,0.6);
    }
    ._2sjJGcOH_0 ._3FLYR4bF_0 {
      width: 34px;
      height: 34px;
      -ms-flex-negative: 0;
      flex-shrink: 0;
      border-radius: 50%;
    }
    ._2sjJGcOH_0 ._36ChpWj4_0 {
      margin-left: 0.5rem;
      -webkit-box-flex: 1;
      -ms-flex-positive: 1;
      flex-grow: 1;
      padding-bottom: 20px;
    }
    ._2sjJGcOH_0 ._36ChpWj4_0 ._2zFoi7sd_0 {
      font-size: 16px;
      color: #3d464d;
      font-weight: 500;
      -webkit-font-smoothing: antialiased;
      line-height: 34px;
    }
    ._2sjJGcOH_0 ._36ChpWj4_0 ._2_QraFYR_0 {
      margin-top: 12px;
      color: #505050;
      -webkit-font-smoothing: antialiased;
      font-size: 14px;
      font-weight: 400;
      white-space: normal;
      word-break: break-all;
      line-height: 24px;
    }
    ._2sjJGcOH_0 ._10o3OAxT_0 {
      margin-top: 18px;
      border-radius: 4px;
      background-color: #f6f7fb;
    }
    ._2sjJGcOH_0 ._3klNVc4Z_0 {
      display: -webkit-box;
      display: -ms-flexbox;
      display: flex;
      -webkit-box-orient: horizontal;
      -webkit-box-direction: normal;
      -ms-flex-direction: row;
      flex-direction: row;
      -webkit-box-pack: justify;
      -ms-flex-pack: justify;
      justify-content: space-between;
      -webkit-box-align: center;
      -ms-flex-align: center;
      align-items: center;
      margin-top: 15px;
    }
    ._2sjJGcOH_0 ._10o3OAxT_0 ._3KxQPN3V_0 {
      color: #505050;
      -webkit-font-smoothing: antialiased;
      font-size: 14px;
      font-weight: 400;
      white-space: normal;
      word-break: break-word;
      padding: 20px 20px 20px 24px;
    }
    ._2sjJGcOH_0 ._3klNVc4Z_0 {
      display: -webkit-box;
      display: -ms-flexbox;
      display: flex;
      -webkit-box-orient: horizontal;
      -webkit-box-direction: normal;
      -ms-flex-direction: row;
      flex-direction: row;
      -webkit-box-pack: justify;
      -ms-flex-pack: justify;
      justify-content: space-between;
      -webkit-box-align: center;
      -ms-flex-align: center;
      align-items: center;
      margin-top: 15px;
    }
    ._2sjJGcOH_0 ._3Hkula0k_0 {
      color: #b2b2b2;
      font-size: 14px;
    }
</style><ul><li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/18/03/86/c9051c6a.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>Bugèˆ¬çš„å­˜åœ¨</span>
  </div>
  <div class="_2_QraFYR_0">ã€Šæ‹†åˆ†å¤æ‚ç»„ä»¶ã€‹ è¿™ä¸ªä¾‹å­ï¼Œæœ‰ç§é†é†çŒé¡¶çš„æ„Ÿè§‰ï¼Œè±ç„¶å¼€æœ—ï¼Œæ„Ÿè°¢-</div>
  <div class="_10o3OAxT_0">
    <p class="_3KxQPN3V_0">ä½œè€…å›å¤: ğŸ‘ğŸ»</p>
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2021-06-06 23:43:28</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/14/f8/3a/dbf7bdee.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>å‡¡å‡¡</span>
  </div>
  <div class="_2_QraFYR_0">import { useState, useCallback } from &#39;react&#39;;<br><br>const useCounter = (step) =&gt; {<br>  const [counter, setCounter] = useState(0);<br>  const increment = useCallback(() =&gt; setCounter(counter + step), [counter, step]);<br>  const decrement = useCallback(() =&gt; setCounter(counter - step), [counter, step]);<br>  const reset = useCallback(() =&gt; setCounter(0), []);<br>  <br>  return {counter, increment, decrement, reset};<br>}<br><br>export default useCounter;</div>
  <div class="_10o3OAxT_0">
    <p class="_3KxQPN3V_0">ä½œè€…å›å¤: èµï¼Hooks ä½œä¸ºæ™®é€šå‡½æ•°ï¼Œæ˜¯å¯ä»¥ä¼ é€’ä»»ä½•å‚æ•°çš„ã€‚</p>
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2021-06-05 11:15:36</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/12/ee/e2/23e44221.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>ä½™ç†™</span>
  </div>
  <div class="_2_QraFYR_0">è¿™ä¸€èŠ‚æ€»ç»“å¾—éå¸¸å¥½ï¼Œå®˜æ–¹æ–‡æ¡£å’Œç½‘ä¸Šæ–‡ç« æ²¡å†™å‡ºæ¥çš„å¹²è´§ğŸ‘</div>
  <div class="_10o3OAxT_0">
    
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2021-06-27 23:59:21</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/27/e0/4c/e6042c6c.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>åˆ«æ‹¦æˆ‘è®©æˆ‘å­¦</span>
  </div>
  <div class="_2_QraFYR_0">useScrollä¸­getPositionä¸­åº”è¯¥å°†document.body.scrollTopæ”¹ä¸ºdocument.documentElement.scrollTopã€‚</div>
  <div class="_10o3OAxT_0">
    
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2021-07-09 16:33:39</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/28/51/c2/90a959d2.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>å±±åŸæ—§å®¢</span>
  </div>
  <div class="_2_QraFYR_0"><br>import React from &quot;react&quot;;<br>import useAsync from &#39;.&#47;useAsync&#39;;<br><br>export default function UserList() {<br>  &#47;&#47; é€šè¿‡ useAsync è¿™ä¸ªå‡½æ•°ï¼Œåªéœ€è¦æä¾›å¼‚æ­¥é€»è¾‘çš„å®ç°<br>  const {<br>    execute: fetchUsers,<br>    data: users,<br>    loading,<br>    error,<br>  } = useAsync(async () =&gt; {<br>    const res = await fetch(&quot;https:&#47;&#47;reqres.in&#47;api&#47;users&#47;&quot;);<br>    const json = await res.json();<br>    return json.data;<br>  });<br>  <br>  return (<br>    &#47;&#47; æ ¹æ®çŠ¶æ€æ¸²æŸ“ UI...<br>  );<br>}<br><br>æˆ‘éªŒè¯äº†è¿™ä¸ªæ¡ˆä¾‹å¿…é¡»æ‰§è¡Œå‰¯ä½œç”¨useEffect(() =&gt; fetchUsers(), []);æ‰èƒ½å‘èµ·å¼‚æ­¥æ•°æ®è¯·æ±‚ï¼Œå¦‚æœåœ¨ä¾èµ–é¡¹æ•°ç»„ä¸­å†ä¼ å…¥useEffect(() =&gt; fetchUsers(), [fetchUsers]);ä¼šé™·å…¥å¼‚æ­¥æ•°æ®è¯·æ±‚æ­»å¾ªç¯ã€‚</div>
  <div class="_10o3OAxT_0">
    
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2021-06-09 11:08:06</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/13/92/d9/84c1de45.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>å‚»å­æ¥äº†å¿«è·‘ä¸¶</span>
  </div>
  <div class="_2_QraFYR_0">è€å¸ˆï¼Œåé¢çš„è¯¾ç¨‹èƒ½ä¸èƒ½å‡ºé—¨æ›´æ·±å…¥çš„ï¼Œæ¯”å¦‚fibierï¼Œhooksçš„åº•å±‚å®ç°å•Šï¼Œè¿™ç§ï¼Œä»¥åŠfiberçš„å„ç§è°ƒåº¦ï¼Œå•¥çš„</div>
  <div class="_10o3OAxT_0">
    
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2021-12-03 10:04:10</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src=""
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>æå…‹å‹¤</span>
  </div>
  <div class="_2_QraFYR_0">function useCounter() {<br><br>    const [count,setCount] = useState(0);<br>    const [step ,setStep] =useState(1)  <br><br>    const changeStep = useCallback((value) =&gt; {<br>        setStep(value);<br>    },[]);<br>    const increment = useCallback(() =&gt; {<br>        setCount(count+step);<br>    },[count,step]);<br>    const decrement = useCallback(() =&gt; {<br>        setCount(count-step);<br>    },[count,step]);<br>    <br>    const reset = useCallback(() =&gt; {<br>        setCount(0);<br>    },[])<br><br>    return {count,increment,decrement,reset,changeStep};<br><br>}<br>export default function Counter () {<br><br>   <br>   const {count,increment,decrement,reset,changeStep} = useCounter();<br><br>   return(<br>       &lt;div&gt;<br>           &lt;button onClick={decrement}&gt;-&lt;&#47;button&gt;<br>           &lt;p&gt;count:{count}&lt;&#47;p&gt;<br>           &lt;button onClick={increment}&gt;+&lt;&#47;button&gt;<br>           &lt;button onClick={reset}&gt;Reset&lt;&#47;button&gt;<br>           &lt;div&gt;<br>               &lt;InputNumber defaultValue={1} onChange={(v) =&gt; changeStep(v)}&#47;&gt;<br>           &lt;&#47;div&gt;<br>       &lt;&#47;div&gt;<br>   )<br>}</div>
  <div class="_10o3OAxT_0">
    
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2021-09-14 19:41:21</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/0f/47/74/5e292ded.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>å¯‡äº‘</span>
  </div>
  <div class="_2_QraFYR_0">æ„Ÿè°¢è€å¸ˆï¼Œä¹‹å‰å¯¹äºhooks åªåœç•™åœ¨å¦‚ä½•ä½¿ç”¨çš„å±‚é¢ã€‚ æ…¢æ…¢çš„ä¼šæŠŠå•æ–‡ä»¶ä¸­å¼•å…¥å¾ˆå¤šçš„useStateï¼Œé€šè¿‡è¿™èŠ‚è¯¾ï¼ŒçŸ¥é“äº†åº”è¯¥å¦‚ä½•åˆ›å»ºè‡ªå·±çš„ hooks æ¥ä¼˜åŒ–ä»£ç ã€‚</div>
  <div class="_10o3OAxT_0">
    
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2021-06-08 16:17:44</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/1e/f5/95/a362f01b.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>Geek1560</span>
  </div>
  <div class="_2_QraFYR_0">è€å¸ˆæ‚¨å¥½ï¼ŒuesAsync è¿™ä¸ªä¾‹å­ä¸­ï¼Œexecute ä½¿ç”¨äº† useCallbackï¼Œä½†å®é™…ä¼ å…¥çš„å‡½æ•°æ¯æ¬¡éƒ½æ˜¯é‡æ–°åˆ›å»ºçš„ï¼Œæµ…æ¯”è¾ƒç»“æœæ˜¯ä¸ç›¸åŒï¼Œç¼“å­˜ä¾ç„¶ä¼šæ›´æ–°ï¼Œå¦‚æœè¦ä½¿ç”¨uesCallbackï¼Œæ˜¯å¦æ˜¯åº”è¯¥åœ¨å¤–å±‚ç¼“å­˜ä¼ å…¥çš„asyncFunction</div>
  <div class="_10o3OAxT_0">
    
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2021-06-06 15:43:44</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src=""
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>æ—èŠŠèŠŠ</span>
  </div>
  <div class="_2_QraFYR_0">reactæ ¹æœ¬ä¸å…³å¿ƒ åå­—æ˜¯å¦æ˜¯usexxx ã€‚ </div>
  <div class="_10o3OAxT_0">
    
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2022-06-11 20:50:26</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/2c/d3/bc/51c1029f.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>Geek_983da8</span>
  </div>
  <div class="_2_QraFYR_0">åŸæ¥è¿™å°±æ˜¯èŠ±é’±çš„æ‰èƒ½æ„Ÿå—åˆ°çš„é­…åŠ›</div>
  <div class="_10o3OAxT_0">
    
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2022-03-08 17:13:52</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/13/bb/82/5a32de87.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>æ³·æ²å¿ƒ</span>
  </div>
  <div class="_2_QraFYR_0">å†™äº†è¿™ä¹ˆä¹…Hooksï¼Œä¸€ç›´ä»¥é€»è¾‘+UIä½œä¸ºåŸºæœ¬åŒºåˆ†ï¼Œçœ‹åˆ°è¿™é‡Œè€å¸ˆçš„å‡ ä¸ªä¾‹å­ï¼Œæ›´åŠ å¯¹Hookså¦çœ¼ç›¸çœ‹äº†ï¼Œæ„Ÿè°¢è€å¸ˆï¼Œå¤§èµï¼ï¼ï¼</div>
  <div class="_10o3OAxT_0">
    
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2021-09-22 11:37:08</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/17/db/0b/f0ded153.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>æ±Ÿè°¢æœ¨</span>
  </div>
  <div class="_2_QraFYR_0">è€å¸ˆï¼ŒuseMemoã€useCallbackå¯¹æ•°æ®è¿›è¡Œç¼“å­˜æ—¶ï¼Œä¾èµ–é¡¹æ˜¯è¿›è¡Œæµ…æ¯”è¾ƒï¼Ÿ å¦‚æœå­˜åœ¨ä¾èµ–é¡¹æ˜¯æ·±å±‚å¯¹è±¡çš„æ•°æ®å‘ç”Ÿå˜åŒ–ä¼šå½±å“ç¼“å­˜è®¡ç®—ç»“æœï¼Ÿ</div>
  <div class="_10o3OAxT_0">
    <p class="_3KxQPN3V_0">ä½œè€…å›å¤: åªæ˜¯å¼•ç”¨æ¯”è¾ƒã€‚åªè¦å¼•ç”¨æ²¡å˜ï¼Œå¯¹è±¡å†…éƒ¨ç»“æ„æ€ä¹ˆå˜åŒ–éƒ½ä¸ä¼šè¢«è®¤ä¸ºä¾èµ–é¡¹å˜åŒ–äº†ã€‚æ‰€ä»¥ react ä¸­éƒ½æ˜¯ç”¨ immutable çš„æ•°æ®ç»“æ„ã€‚</p>
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2021-08-17 19:45:16</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/14/be/74/0d900ed9.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>Tristan</span>
  </div>
  <div class="_2_QraFYR_0">é†é†çŒé¡¶å•Šï¼Œæ•¢é—®å¦‚ä½•ä¿å…»å¤´å‘ï¼Ÿ</div>
  <div class="_10o3OAxT_0">
    <p class="_3KxQPN3V_0">ä½œè€…å›å¤: ç¥–ä¼ ç§˜æ–¹ï¼Œä¸å¯å¤–ä¼ ~</p>
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2021-07-29 00:29:18</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/13/b1/81/13f23d1e.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>æ–¹å‹‡(gopher)</span>
  </div>
  <div class="_2_QraFYR_0">ahooksæ˜¯è¿™ä¹ˆå¤„ç†scrollTopçš„<br>top: Math.max(<br>  window.pageYOffset,<br>  document.documentElement.scrollTop,<br>  document.body.scrollTop,<br>),</div>
  <div class="_10o3OAxT_0">
    
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2023-03-14 10:32:50</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/13/b1/81/13f23d1e.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>æ–¹å‹‡(gopher)</span>
  </div>
  <div class="_2_QraFYR_0">document.body.scrollTop è¿™ä¸ªapiåœ¨chromé‡Œæœ‰é—®é¢˜ï¼Œy: document.documentElement.scrollTop || document.body.scrollTop</div>
  <div class="_10o3OAxT_0">
    
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2023-03-14 10:25:20</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/2c/62/67/cd17dabe.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>elune3344</span>
  </div>
  <div class="_2_QraFYR_0">useEffect(() =&gt; execute(), [execute]);<br>ä¸ºå•¥ä¸æŠŠè¿™ä¸ªæ‰§è¡Œçš„é€»è¾‘å°åœ¨useAsyncé‡Œé¢å‘¢</div>
  <div class="_10o3OAxT_0">
    
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2022-08-31 15:13:45</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/2c/62/67/cd17dabe.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>elune3344</span>
  </div>
  <div class="_2_QraFYR_0">useEffect(() =&gt; execute(), [execute]);<br>è¿™ä¸€å¥ä¸ºä»€ä¹ˆä¸åœ¨useAsync ç›´æ¥æ‰§è¡Œå‘¢</div>
  <div class="_10o3OAxT_0">
    
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2022-08-31 15:13:02</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="https://static001.geekbang.org/account/avatar/00/0f/61/3b/abb7bfe3.jpg"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>siegfried</span>
  </div>
  <div class="_2_QraFYR_0">æ€è€ƒé¢˜ã€‚åœ¨useCounterçš„functionå†…æ·»åŠ å‚æ•°ã€‚</div>
  <div class="_10o3OAxT_0">
    
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2022-03-28 11:42:13</div>
  </div>
</div>
</div>
</li>
<li>
<div class="_2sjJGcOH_0"><img src="https://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqdH1VzVC9fJySwZib0vGSTS6EQib1JMtXb0TeHmWhdibASnnx5RqEGoreVT6005LnY4iaXOprwHtMp6A/132"
  class="_3FLYR4bF_0">
<div class="_36ChpWj4_0">
  <div class="_2zFoi7sd_0"><span>é™ˆå† å—</span>
  </div>
  <div class="_2_QraFYR_0">é†é†çŒé¡¶ï¼Œè¿™å°±æŠŠä¹‹å‰åœ¨å…¬å¸å†™çš„å¾ˆéš¾ç»´æŠ¤çš„ä»£ç ç”¨è‡ªå®šä¹‰hooksæ‹†åˆ†ä¸€ä¸‹ï½ è°¢è°¢è€å¸ˆï¼</div>
  <div class="_10o3OAxT_0">
    
  </div>
  <div class="_3klNVc4Z_0">
    <div class="_3Hkula0k_0">2022-02-15 20:36:36</div>
  </div>
</div>
</div>
</li>
</ul>